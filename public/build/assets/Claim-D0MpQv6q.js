import{a as i,o as m,g as v,b as e,k as g,C as ye,l as W,m as ge,c as j,w as A,e as M,u as o,f as _e,t as _,j as $,p as z,F as k,q as T,s as Q,h as V,x as be,n as F,y as he,i as xe,P as Ce,d as we,z as X}from"./app-A0C175HP.js";import{i as se,c as Se,_ as Pe,g as Oe}from"./AuthenticatedLayout-3vP79k14.js";import{I as B,_ as $e}from"./BreadcrumbComponent-DjwF1dgz.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as U,f as ne,a as Ae,b as ke}from"./helpers-CrnjLOwt.js";import{_ as je}from"./StatusLabel-DiTo8fdG.js";import{_ as Te,a as oe}from"./ListComponent-DaUk5278.js";import{_ as S}from"./InputError-BojD3VlQ.js";import{_ as P,a as N}from"./TextInput-CBysiCEX.js";import{M as Ve}from"./Modal-DhIGwpkC.js";import{P as Z}from"./PrimaryButton-yMXZhnA5.js";import{L as Fe}from"./NotFound-DEMZmjYG.js";import{C as Ue}from"./CustomSelectComponent-tXIRZZ7Z.js";import"./DateRangeComponent-ECC4qWrI.js";var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function K(t){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Be(t,u,l[u])})}return t}function Be(t,s,l){return s in t?Object.defineProperty(t,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[s]=l,t}var E=function(s,l){var r=K({},s,l.attrs);return i(B,K({},r,{icon:Me}),null)};E.displayName="DeleteOutlined";E.inheritAttrs=!1;var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function ee(t){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Ie(t,u,l[u])})}return t}function Ie(t,s,l){return s in t?Object.defineProperty(t,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[s]=l,t}var L=function(s,l){var r=ee({},s,l.attrs);return i(B,ee({},r,{icon:De}),null)};L.displayName="EditOutlined";L.inheritAttrs=!1;var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};function te(t){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Ne(t,u,l[u])})}return t}function Ne(t,s,l){return s in t?Object.defineProperty(t,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[s]=l,t}var R=function(s,l){var r=te({},s,l.attrs);return i(B,te({},r,{icon:ze}),null)};R.displayName="FieldTimeOutlined";R.inheritAttrs=!1;var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zm-40 600H184V312h528v528zm168-728H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM300 550h296v64H300z"}}]},name:"switcher",theme:"outlined"};function ae(t){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Le(t,u,l[u])})}return t}function Le(t,s,l){return s in t?Object.defineProperty(t,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[s]=l,t}var q=function(s,l){var r=ae({},s,l.attrs);return i(B,ae({},r,{icon:Ee}),null)};q.displayName="SwitcherOutlined";q.inheritAttrs=!1;const Re={},qe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function He(t,s){return m(),v("svg",qe,s[0]||(s[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const Ge=re(Re,[["render",He]]),Je={class:"space-y-6"},Ye={key:0},We={key:1},Qe={class:"text-lg font-medium text-gray-900"},Xe={class:"grid grid-cols-1 gap-4 mt-4"},Ze=["value"],Ke=["value"],et={class:"col-span-2"},tt={class:"flex items-center space-x-4 mt-1"},at={class:"flex space-x-4"},lt={class:"inline-flex items-center"},st={class:"inline-flex items-center"},rt={key:0},nt={class:"col-span-2"},ot={class:"col-span-2"},it={key:2,class:"text-right mt-6"},ie={__name:"CreateClaimForm",props:{claimData:{type:Object,default:null}},setup(t,{emit:s}){const l=t,r=g(!1),u=g(!1),x=g(!1),C=s,h=g([]),f=g([]),c=g([]),b=g(""),y=g(null),a=ye({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",gst_value:"",purpose:"",receipt_date:"",receipt:null}),O=g(0),de=g(),H=g(),G=()=>{a.gst==1?(J(),x.value=!0):x.value=!1},ue=async(d=1)=>{try{const{data:n}=await axios.get(route("variables.fetchesGst"));O.value=n}catch(n){y.value=n}},J=()=>{a.gst_value=(a.amount*O.value/100).toFixed(2)},Y=()=>{r.value=!0},D=()=>{r.value=!1},me=async()=>{u.value=!0;try{const d=new FormData;a.receipt!=null&&d.append("receipt",a.receipt);for(const[w,I]of Object.entries(a.data()))w!="receipt"&&d.append(w,I);const n=l.claimData?route("claims.update",l.claimData.id):route("claims.store"),p=await axios.post(n,d,{headers:{"Content-Type":"multipart/form-data"}});U.fire({title:"Success!",text:p.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"},willClose:()=>{location.reload()}}),D(),a.reset(),C("createComplete",!0),u.value=!1}catch(d){d.response&&d.response.data.errors?a.errors=d.response.data.errors:U.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),u.value=!1}},pe=async()=>{try{const{data:d}=await axios.get(route("currency.listShortCode"));h.value=d}catch(d){y.value=d}},ve=async()=>{try{const{data:d}=await axios.get(route("paymentCategory.listChoice"));c.value=d}catch(d){y.value=d}},fe=async()=>{try{const{data:d}=await axios.get(route("paymentReceiver.listNameAndId"));f.value=d;for(let n=0;n<f.value.length;n++)if(f.value[n].id==a.payment_to){H.value=f.value[n].name;break}}catch(d){y.value=d}};return W(()=>b.value,(d,n)=>{if(a&&"payment_to"in a){a.payment_to=d.toString();const p=f.value.find(I=>I.id===parseInt(d)),w=p?p.currency_id:null;a.currency=w}},{immediate:!0}),W(()=>l.claimData,d=>{d?(he(()=>{a.payment_to=d.payment_receiver_id}),a.payment_type=d.payment_type,a.payment_category=d.payment_category_id,a.currency=d.currency_id,a.amount=d.amount,a.gst=d.gst_amount!=0?"1":"0",a.gst_value=d.gst_amount,a.purpose=d.purpose,a.receipt_date=d.receipt_date,d.gst_amount!=0&&(x.value=!0)):a.reset()},{immediate:!0}),ge(()=>{ue(),pe(),ve(),fe()}),(d,n)=>(m(),v("section",Je,[l.claimData==null?(m(),j(Z,{key:0,onClick:Y},{default:A(()=>n[11]||(n[11]=[M("Create Payment")])),_:1})):(m(),j(o(L),{key:1,class:"mb-4 mr-2",onClick:Y})),i(Ve,{show:r.value,onClose:D},{default:A(()=>[e("form",{onSubmit:_e(me,["prevent"]),class:"p-5"},[u.value?(m(),v("div",Ye,[i(Fe,{class:"mt-32 mb-32"})])):(m(),v("div",We,[e("h2",Qe,_(l.claimData!=null?"Edit Payment":"Create New Payment"),1),e("div",Xe,[e("div",null,[i(P,{for:"payment_to",value:"Payment To"}),i(Ue,{choices:f.value,modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=p=>b.value=p),isEdit:l.claimData!=null,label:l.claimData!=null?H.value:"Payment Receiver",choicesIsObject:!0,ref_key:"customSelect",ref:de},null,8,["choices","modelValue","isEdit","label"]),i(S,{message:o(a).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[i(P,{for:"payment_type",value:"Payment Type"}),$(e("select",{id:"payment_type","onUpdate:modelValue":n[1]||(n[1]=p=>o(a).payment_type=p),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},n[12]||(n[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[z,o(a).payment_type]]),i(S,{message:o(a).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[i(P,{for:"payment_category",value:"Payment Category"}),$(e("select",{id:"currency","onUpdate:modelValue":n[2]||(n[2]=p=>o(a).payment_category=p),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[n[13]||(n[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(m(!0),v(k,null,T(c.value,(p,w)=>(m(),v("option",{key:w,value:w,class:"capitalize"},_(p),9,Ze))),128))],512),[[z,o(a).payment_category]]),i(S,{message:o(a).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[i(P,{for:"currency",value:"Currency"}),$(e("select",{id:"currency","onUpdate:modelValue":n[3]||(n[3]=p=>o(a).currency=p),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[n[14]||(n[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(m(!0),v(k,null,T(h.value,(p,w)=>(m(),v("option",{key:w,value:w},_(p),9,Ke))),128))],512),[[z,o(a).currency]]),i(S,{message:o(a).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[i(P,{for:"amount",value:"Amount (incl. GST if any)"}),i(N,{id:"amount",modelValue:o(a).amount,"onUpdate:modelValue":n[4]||(n[4]=p=>o(a).amount=p),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:"",onKeyup:J},null,8,["modelValue"]),i(S,{message:o(a).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",et,[i(P,{value:"GST"}),e("div",tt,[e("div",at,[e("label",lt,[$(e("input",{type:"radio","onUpdate:modelValue":n[5]||(n[5]=p=>o(a).gst=p),value:"1",class:"form-radio",onChange:G},null,544),[[Q,o(a).gst]]),n[15]||(n[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",st,[$(e("input",{type:"radio","onUpdate:modelValue":n[6]||(n[6]=p=>o(a).gst=p),value:"0",class:"form-radio",onChange:G},null,544),[[Q,o(a).gst]]),n[16]||(n[16]=e("span",{class:"ml-2"},"No",-1))])]),x.value?(m(),v("div",rt,[i(N,{id:"gst_value",modelValue:o(a).gst_value,"onUpdate:modelValue":n[7]||(n[7]=p=>o(a).gst_value=p),type:"number",step:"0.01",placeholder:"Enter GST amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])):V("",!0)]),i(S,{message:o(a).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",nt,[i(P,{for:"purpose",value:"Purpose of Payment"}),$(e("textarea",{id:"purpose","onUpdate:modelValue":n[8]||(n[8]=p=>o(a).purpose=p),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[be,o(a).purpose]]),i(S,{message:o(a).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[i(P,{for:"receipt_date",value:"Date of Receipt / Invoice"}),i(N,{id:"receipt_date",modelValue:o(a).receipt_date,"onUpdate:modelValue":n[9]||(n[9]=p=>o(a).receipt_date=p),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(S,{message:o(a).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",ot,[i(P,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:n[10]||(n[10]=p=>o(a).receipt=p.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer"},null,32),i(S,{message:o(a).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),u.value?V("",!0):(m(),v("div",it,[e("button",{type:"button",onClick:D,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),i(Z,{type:"submit",class:F(["ms-3",{"opacity-25":o(a).processing}]),disabled:o(a).processing},{default:A(()=>n[17]||(n[17]=[M(" Submit Payment ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},ct={class:"flex"},dt={key:0,class:"flex justify-center items-center"},ut={class:"flex-1"},mt={class:"grid lg:grid-cols-8 grid-cols-2 gap-x-4 gap-y-4 relative isolate"},pt={class:"col"},vt={class:""},ft={class:"col"},yt={class:""},gt={class:"col"},_t={class:"capitalize"},bt={class:"col"},ht={class:"whitespace-nowrap overflow-hidden text-ellipsis"},xt={class:"col"},Ct={class:"relative group"},wt={class:"truncate cursor-pointer"},St={class:"absolute invisible group-hover:visible left-0 -top-2 transform -translate-y-full w-max max-w-xs px-4 py-3 bg-gray-900/95 backdrop-blur-sm text-white text-sm font-medium rounded-lg shadow-xl transform-gpu scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-200 ease-out before:content-[''] before:absolute before:left-4 before:top-full before:border-8 before:border-x-transparent before:border-b-transparent before:border-t-gray-900/95 z-[9999]"},Pt={class:"break-words"},Ot={class:"col"},$t={class:"truncate"},At={class:"col"},kt={class:"col"},jt={class:""},Tt={class:"flex justify-center items-center space-x-4"},Vt=["disabled"],Ft={class:"cursor-pointer hover:text-violet-600 transition-all"},ce={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1},isSelected:{type:Boolean,required:!1,default:!1}},emits:["update-selected-list"],setup(t,{emit:s}){const l=s,r=t,u=f=>{l("update-selected-list",{isSelected:f,id:r.data.id})},x=xe(()=>r.data.status_id>=2),C=()=>{U.fire({title:"Are you sure?",text:"Are you sure you want to delete this Payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((f,c)=>{h()})})},h=async()=>{var f,c;try{const b=await axios.post(route("claims.delete",r.data.id));l("createComplete",!0),U.fire({title:"Success!",text:"The Payment has been successfully deleted.",icon:"success",confirmButtonText:"OK"})}catch(b){console.log(b),U.fire({title:"Error!",text:((c=(f=b.response)==null?void 0:f.data)==null?void 0:c.error)||"An unexpected error occurred while deleteing the payment.",icon:"error",confirmButtonText:"OK"})}};return g(!1),(f,c)=>{var b,y;return m(),v("div",{class:F(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-visible bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":t.isSelected}])},[e("div",ct,[t.showGroupActions&&!o(se)().value?(m(),v("div",dt,[i(Te,{onUpdateSelected:u,isSelected:t.isSelected,class:"block mr-5"},null,8,["isSelected"])])):V("",!0),e("div",ut,[e("div",mt,[e("div",pt,[c[0]||(c[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",vt,_(t.data.id),1)]),e("div",ft,[c[1]||(c[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Receiver",-1)),e("div",yt,_((b=t.data.payment_receiver)==null?void 0:b.name),1)]),e("div",gt,[c[2]||(c[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",_t,_(t.data.payment_category_name),1)]),e("div",bt,[c[3]||(c[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",ht,_(t.data.currency)+" "+_(o(ne)(t.data.amount)),1)]),e("div",xt,[c[4]||(c[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Purpose",-1)),e("div",Ct,[e("div",wt,_(t.data.purpose),1),e("div",St,[e("div",Pt,_(t.data.purpose),1)])])]),e("div",Ot,[c[5]||(c[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",$t,_((y=t.data.created_user)==null?void 0:y.name),1)]),e("div",At,[c[6]||(c[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),i(je,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:t.data.status,name:t.data.status_name},null,8,["status","name"])]),e("div",kt,[c[7]||(c[7]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",jt,_(o(Ae)(t.data.created_at)),1)])])]),e("div",Tt,[o(Se)().value?(m(),j(o(E),{key:0,onClick:C,class:F(["mb-3 mr-2",{invisible:x.value}]),disabled:x.value},null,8,["class","disabled"])):V("",!0),e("div",{class:F({invisible:x.value}),disabled:x.value},[i(ie,{claimData:t.data},null,8,["claimData"])],10,Vt),e("button",Ft,[i(o(Ce),{href:f.route("claim.details",t.data.id)},{default:A(()=>[i(Ge,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},Ut={key:0,class:"bg-white p-5 rounded-xl"},Mt={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-6"},Bt={class:"mb-2"},Dt={class:"flex justify-between"},It={class:"font-bold"},le={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(t,{emit:s}){const l=s,r=g([]),u=({isSelected:C,id:h})=>{r.value=C?[...new Set([...r.value,h])]:r.value.filter(f=>f!==h)},x=C=>{l("createComplete",!0)};return(C,h)=>(m(),v("div",null,[i(oe,{apiUrl:C.route("claims.list"),createCompleteSignal:t.createCompleteSignal,sortAndFilters:t.sortAndFilters,allowSorting:!0},{"list-view":A(({data:f,apiResponse:c,fullApiResponse:b})=>[Object.keys(b.total_sum_by_country).length?(m(),v("div",Ut,[h[1]||(h[1]=e("h2",{class:"mb-4"},"Total Amount",-1)),e("div",Mt,[(m(!0),v(k,null,T(b.total_sum_by_country,(y,a)=>(m(),v("div",{key:a,class:"bg-gray-100 p-6 rounded-xl shadow-md transition-all duration-500 border"},[e("p",Bt,_(y.country_name)+" ("+_(a)+")",1),e("div",Dt,[h[0]||(h[0]=e("span",null,"Amount:",-1)),e("span",null,[e("span",It,_(y.currency)+" "+_(o(ne)(y.amount)),1)])])]))),128))])])):V("",!0),(m(!0),v(k,null,T(f,y=>(m(),j(ce,{createComplete:t.createCompleteSignal,onCreateComplete:x,onUpdateSelectedList:u,key:y.id,data:y},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])]))}},zt={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},emits:["pendingClaimsCount"],setup(t,{emit:s}){const l=s,r=g([]),u=g(1),x=c=>{l("pendingClaimsCount",c)},C=c=>{r.value=c},h=({isSelected:c,id:b})=>{c?r.value=[...new Set([...r.value,b])]:r.value=r.value.filter(O=>O!==b);const y=[...r.value].sort(),a=[...allIds.value].sort();selectAll.value=JSON.stringify(y)===JSON.stringify(a)},f=c=>{l("createComplete",!0)};return(c,b)=>(m(),v("div",null,[(m(),j(oe,{apiUrl:c.route("claims.listPendingApproval"),createCompleteSignal:t.createCompleteSignal,key:u.value,allowSorting:!0,sortAndFilters:t.sortAndFilters,allowSelectAll:!0,selectedIds:r.value,"onUpdate:wholeSelectedIds":C},{"list-view":A(({data:y,apiResponse:a})=>[M(_(x(a.total))+" ",1),(m(!0),v(k,null,T(y,O=>(m(),j(ce,{createComplete:t.createCompleteSignal,onCreateComplete:f,onUpdateSelectedList:h,key:O.id,showGroupActions:!0,data:O,isSelected:r.value.includes(O.id)},null,8,["createComplete","data","isSelected"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters","selectedIds"]))]))}},Nt={class:"flex justify-between content-center"},Et={class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},Lt={key:0},Rt={class:"inline-flex max-w-full"},qt=["onClick"],Ht={class:"flex"},Gt={class:"flex justify-center items-center"},Jt={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},Yt={class:"w-full bg-black-50 p-1 rounded-xl"},Wt={key:1},Qt={__name:"Claim",setup(t){const s=g(2),l=g(0),r=g("allClaims"),u=g([{name:"allClaims",label:"All Payments",icon:q},{name:"pendingApproval",label:"Pending Approval",icon:R}]),x=c=>r.value===c?"active bg-violet-400 text-white font-bold":"hover:bg-gray-200 text-black bg-white",C=()=>{s.value=Math.floor(Math.random()*100)+1},h=c=>{l.value=c},f=g([{display_name:"Payment ID",field_name:"id",field_type:"string"},{field_name:"payment_type",field_type:"select",options:{reimbursement:"Reimbursement",external_payment:"External Payment"}},{display_name:"Payment Category",field_name:"payment_category_id",field_type:"select",api:route("paymentCategory.listChoice")},{display_name:"Payment Receiver",field_name:"payment_receiver_id",field_type:"select",api:route("paymentReceiver.listIdToName")},{display_name:"Currency",field_name:"currency_id",field_type:"select",api:route("currency.listShortCode")},{display_name:"Created Date",field_name:"created_at",field_type:"date_range"},{field_name:"status",field_type:"select",api:route("approvalStatus.list")}]);return(c,b)=>(m(),v(k,null,[i(o(we),{title:"Payments"}),i(Pe,null,{header:A(()=>[e("div",Nt,[i($e,{breadcrumbs:[{title:"Payments"}]}),i(ie,{onCreateComplete:C})])]),default:A(()=>[e("div",Et,[o(Oe)().value||o(se)().value?(m(),v("div",Lt,[e("div",Rt,[(m(!0),v(k,null,T(u.value,y=>(m(),v("span",{key:y.name,class:F([["tab-btn p-2 px-5 text-md flex justify-center items-center",x(y.name)],"flex-1 pt-5 pb-5 border border-violet-500 flex flex-col sm:min-w-60"]),onClick:a=>r.value=y.name},[e("div",Ht,[M(_(y.label)+" ",1),e("div",Gt,[y.name=="pendingApproval"&&l.value!=0&&l.value!=null?(m(),v("span",Jt,_(o(ke)(l.value)),1)):V("",!0)])])],10,qt))),128))]),e("div",Yt,[$(e("div",null,[i(zt,{createCompleteSignal:s.value,onPendingClaimsCount:h,onCreateComplete:C,sortAndFilters:f.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[X,r.value==="pendingApproval"]]),$(e("div",null,[i(le,{createCompleteSignal:s.value,onCreateComplete:C,sortAndFilters:f.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[X,r.value==="allClaims"]])])])):(m(),v("div",Wt,[i(le,{createCompleteSignal:s.value,sortAndFilters:f.value,onCreateComplete:C},null,8,["createCompleteSignal","sortAndFilters"])]))])]),_:1})],64))}},ua=re(Qt,[["__scopeId","data-v-4cb4bc8e"]]);export{ua as default};

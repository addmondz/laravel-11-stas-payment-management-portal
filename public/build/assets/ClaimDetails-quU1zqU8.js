import{a as n,o as r,g as u,b as e,k as b,m as K,u as l,w as h,F as $,q as P,d as Y,c as y,h as c,t as p,p as W,e as B}from"./app-BZURtGtk.js";import{_ as J,g as Q,i as X}from"./AuthenticatedLayout-C4tcOVEz.js";import{d as Z,L as ee,f as te,b as S,a as D,N as se,S as g,e as oe}from"./sweetalert2.esm.all-CEmmlpDT.js";import{_ as re}from"./StatusLabel-C3F4DEkI.js";import{I as L,_ as ae}from"./BreadcrumbComponent-BDODGK2w.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as N}from"./PrimaryButton-CTBKfpZs.js";import"./ApplicationLogo-M_mRncSF.js";var le={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function z(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},m=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),m.forEach(function(f){ne(a,f,s[f])})}return a}function ne(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}var A=function(o,s){var m=z({},o,s.attrs);return n(L,z({},m,{icon:le}),null)};A.displayName="CloseOutlined";A.inheritAttrs=!1;var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function I(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},m=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),m.forEach(function(f){ce(a,f,s[f])})}return a}function ce(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}var x=function(o,s){var m=I({},o,s.attrs);return n(L,I({},m,{icon:ie}),null)};x.displayName="InfoCircleOutlined";x.inheritAttrs=!1;const ue={},de={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function pe(a,o){return r(),u("svg",de,o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))}const C=M(ue,[["render",pe]]),me={},fe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function ve(a,o){return r(),u("svg",fe,o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)]))}const k=M(me,[["render",ve]]),xe={class:"flex justify-between content-center"},ye={key:0},_e={key:1},be={key:0,class:"py-12 m-5 mt-0 pt-5"},ge={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 mb-5"},we={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},he={class:"flex justify-between content-center w-full"},Ce={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},ke={class:"mb-4"},je={class:"flex justify-between"},Oe={class:"text-base"},Pe={class:"mb-4"},Ae={class:"flex justify-between"},Te={class:"text-base"},$e={class:"mb-4"},Be={class:"flex justify-between"},Se={class:"text-base"},De={class:"mb-4"},Ne={class:"flex justify-between"},ze={class:"text-base capitalize"},Ie={class:"mb-4"},Le={class:"flex justify-between"},Me={class:"text-base"},He={class:"mb-4"},Ee={class:"flex justify-between"},Re={class:"text-base"},Ve={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},qe={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Fe={class:"flex justify-between content-center w-full"},Ue={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Ge={class:"mb-4"},Ke={class:"flex justify-between"},Ye={class:"text-base"},We={class:"mb-4"},Je={class:"flex justify-between"},Qe={class:"text-base"},Xe={class:"mb-4"},Ze={class:"flex justify-between"},et={class:"text-base"},tt={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},st={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},ot={class:"flex justify-between content-center w-full"},rt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},at={class:"mb-4"},lt={class:"flex justify-between"},nt={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},it={class:"bg-white p-4 pt-2 rounded-lg max-w-lg"},ct={class:"flex flex-col"},ut={class:"text-right"},dt=["src"],pt={class:"mb-4"},mt={class:"flex justify-between"},ft={class:"text-base"},vt={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},xt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},yt={class:"flex justify-between content-center w-full"},_t={key:0,class:"p-6 border-gray-300 mb-4 w-full"},bt={class:"relative list-none"},gt=["value"],wt={class:"flex justify-between flex-col sm:flex-row"},ht={class:"font-bold"},Ct={class:"text-gray-500"},kt={key:0,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},jt={key:1,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Ot={key:1},zt={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(a){const o=b(!0),s=b([]),m=b(null),f=b(null),w=a,H=route("claims.fetchData",w.id);b("0"),b({});const E=[{title:"Claims",link:route("dashbaord")},{title:"#"+Z(w.id)}],d=b({details:!0,amount:!0,receipt:!0,approvalHistory:!0}),_=i=>{d.value[i]=!d.value[i]},R=()=>{g.fire({title:"Are you sure?",text:"Are you sure you want to approve this Claim?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((i,t)=>{V()})})},V=async()=>{try{const i=await P.post(route("claims.approveClaim",w.id));j(),g.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(i){g.fire({title:"Error!",text:i.response?i.response.data.error||"There was an error while approving the claim. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},q=()=>{g.fire({title:"Are you sure?",text:"Are you sure you want to approve this Claim?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((i,t)=>{F()})})},F=async()=>{try{const i=await P.post(route("claims.paymentCompleted",w.id));j(),g.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(i){g.fire({title:"Error!",text:i.response?i.response.data.error||"There was an error while approving the claim. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},j=async()=>{try{const{data:i}=await P.get(H);s.value=i.data,f.value=i}catch(i){m.value=i}finally{o.value=!1}};K(()=>{j()});const O=b(!1),U=()=>{O.value=!0},G=()=>{O.value=!1};return(i,t)=>(r(),u($,null,[n(l(Y),{title:"Claim Details"}),n(J,null,{header:h(()=>[e("div",xe,[n(ae,{breadcrumbs:E}),f.value?(r(),y(re,{key:0,class:"text-sm inline-block",status:s.value.status},null,8,["status"])):c("",!0)])]),default:h(()=>{var T;return[o.value?(r(),u("div",ye,[n(ee,{class:"mt-32"})])):(r(),u("div",_e,[f.value?(r(),u("div",be,[e("div",ge,[e("div",we,[e("div",he,[t[8]||(t[8]=e("h2",null,"Details",-1)),d.value.details?(r(),y(C,{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=v=>_("details"))})):c("",!0),d.value.details?c("",!0):(r(),y(k,{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=v=>_("details"))}))])]),d.value.details?(r(),u("div",Ce,[e("div",ke,[e("div",je,[t[9]||(t[9]=e("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Oe,p(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),e("div",Pe,[e("div",Ae,[t[10]||(t[10]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Te,p(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),e("div",$e,[e("div",Be,[t[11]||(t[11]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Se,p(l(te)(s.value.payment_type)??"-"),1)]),e("div",De,[e("div",Ne,[t[12]||(t[12]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),n(l(x),{class:"text-gray-400"})]),e("p",ze,p(((T=s.value.payment_category)==null?void 0:T.name)||"-"),1)]),e("div",Ie,[e("div",Le,[t[13]||(t[13]=e("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Me,p(s.value.purpose??"-"),1)]),e("div",He,[e("div",Ee,[t[14]||(t[14]=e("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Re,p(l(S)(s.value.created_at)??"-"),1)])])):c("",!0)]),e("div",Ve,[e("div",qe,[e("div",Fe,[t[15]||(t[15]=e("h2",null,"Amount",-1)),d.value.amount?(r(),y(C,{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=v=>_("amount"))})):c("",!0),d.value.amount?c("",!0):(r(),y(k,{key:1,class:"cursor-pointer",onClick:t[3]||(t[3]=v=>_("amount"))}))])]),d.value.amount?(r(),u("div",Ue,[e("div",Ge,[e("div",Ke,[t[16]||(t[16]=e("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Ye,p(s.value.currency_object.short_code)+" "+p(l(D)(s.value.amount)),1)]),e("div",We,[e("div",Je,[t[17]||(t[17]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Percent",-1)),n(l(x),{class:"text-gray-400"})]),e("p",Qe,p(Number(s.value.gst_amount)===0?"-":s.value.gst_percent+" %"),1)]),e("div",Xe,[e("div",Ze,[t[18]||(t[18]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),n(l(x),{class:"text-gray-400"})]),e("p",et,p(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+l(D)(s.value.gst_amount)),1)])])):c("",!0)]),e("div",tt,[e("div",st,[e("div",ot,[t[19]||(t[19]=e("h2",null,"Receipt",-1)),d.value.receipt?(r(),y(C,{key:0,class:"cursor-pointer",onClick:t[4]||(t[4]=v=>_("receipt"))})):c("",!0),d.value.receipt?c("",!0):(r(),y(k,{key:1,class:"cursor-pointer",onClick:t[5]||(t[5]=v=>_("receipt"))}))])]),d.value.receipt?(r(),u("div",rt,[e("div",at,[e("div",lt,[t[20]||(t[20]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),n(l(x),{class:"text-gray-400"})]),e("div",null,[e("div",{class:"text-base cursor-pointer inline text-violet-700 font-bold",onClick:U},"Open "),O.value?(r(),u("div",nt,[e("div",it,[e("div",ct,[e("div",ut,[n(l(A),{class:"pb-2",onClick:G})]),e("img",{src:`/public/${s.value.receipt_file}`,alt:"Receipt Image",class:"max-w-full max-h-screen"},null,8,dt)])])])):c("",!0)])]),e("div",pt,[e("div",mt,[t[21]||(t[21]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),n(l(x),{class:"text-gray-400"})]),e("p",ft,p(l(S)(s.value.receipt_date)??"-"),1)])])):c("",!0)]),e("div",vt,[e("div",xt,[e("div",yt,[t[22]||(t[22]=e("h2",null,"Approval History",-1)),d.value.approvalHistory?(r(),y(C,{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=v=>_("approvalHistory"))})):c("",!0),d.value.approvalHistory?c("",!0):(r(),y(k,{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=v=>_("approvalHistory"))}))])]),d.value.approvalHistory?(r(),u("div",_t,[e("ul",bt,[t[24]||(t[24]=e("div",{class:"absolute top-3 left-[21px] w-[2px] bg-gray-300 h-full z-1"},null,-1)),(r(!0),u($,null,W(s.value.status_log,v=>(r(),u("li",{class:"relative pl-10 mb-4",key:v.id,value:v},[t[23]||(t[23]=e("div",{class:"absolute left-[12px] top-1 w-5 h-5 rounded-full",style:{"background-color":"#d4d9df"}},[e("div",{class:"absolute left-[4px] top-1 w-3 h-3 rounded-full",style:{"background-color":"#7367F0"}})],-1)),e("div",wt,[e("p",ht,p(v.status),1),e("p",Ct,p(l(oe)(v.created_at)),1)]),e("p",null,p(v.name),1)],8,gt))),128))])])):c("",!0)]),s.value.status_id<2&&l(Q)().value==s.value.next_approval_level?(r(),u("div",kt,[n(N,{onClick:R},{default:h(()=>t[25]||(t[25]=[B("Approve Claim")])),_:1})])):c("",!0),s.value.status_id==2&&l(X)().value?(r(),u("div",jt,[n(N,{onClick:q},{default:h(()=>t[26]||(t[26]=[B("Mark as Payment Completed")])),_:1})])):c("",!0)])):(r(),u("div",Ot,[n(se)]))]))]}),_:1})],64))}};export{zt as default};

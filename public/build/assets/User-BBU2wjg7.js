import{k as c,C as Y,D as G,l as z,o as u,g as m,a as t,w as V,e as E,t as v,b as e,f as H,u as a,h as S,j as R,q as L,F as j,p as K,m as J,n as q,x as Q,d as W,c as X}from"./app-1Z8-0ieN.js";import{_ as Z}from"./AuthenticatedLayout-CTxPhiEH.js";import{S as F,b as ee,L as se,N as M}from"./sweetalert2.esm.all-DGRDATcK.js";import{_ as $,a as U,b as C}from"./TextInput-B3mTvAA3.js";import{_ as te}from"./Modal-Bh0bWHcc.js";import{P as O}from"./PrimaryButton-DMla4g2d.js";import{_ as T}from"./FilterDropdown-DWbJ_T-u.js";import{_ as ae}from"./BreadcrumbComponent-C7VOl9IQ.js";import"./ApplicationLogo-M_mRncSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"space-y-6"},le={class:"text-lg font-medium text-gray-900"},re={class:"grid grid-cols-1 gap-4 mt-4"},ie={key:0,class:"text-gray-500 font-bold"},ne={key:0,class:"text-gray-500 font-bold"},de={class:"col-span-2"},ce={class:"flex items-center space-x-4 mt-1"},ue={class:"inline-flex items-center"},me={class:"inline-flex items-center"},ve=["value"],pe={class:"text-right mt-6"},I={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(p,{emit:y}){const r=p,f=c(!1),D=y,n=c([]),w=c(null),s=Y({name:"",email:"",password:"",password_confirmation:"",isAdmin:"0",approvalRole:""});G(()=>r.userData,o=>{o?(s.name=o.name,s.email=o.email,s.isAdmin=o.role==="admin"?"1":"0",s.approvalRole=o.approval_role_id):s.reset()},{immediate:!0});const x=()=>{f.value=!1},k=()=>{f.value=!f.value},d=()=>s.password!==s.password_confirmation?(s.errors.password_confirmation="Passwords do not match",!1):(s.errors.password_confirmation="",!0),h=async()=>{if(!d()){F.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const o=new FormData;for(const[N,P]of Object.entries(s.data()))o.append(N,P);const l=r.userData?route("user.update",r.userData.id):route("user.create"),b=await axios["post"](l,o);F.fire({title:"Success!",text:r.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),x(),s.reset(),D("createComplete",!0)}catch(o){console.log(o),o.response&&o.response.data.errors?s.errors=o.response.data.errors:F.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},A=async()=>{try{const{data:o}=await axios.get(route("approvalRoles.list"));n.value=o}catch(o){w.value=o}};return z(()=>{A()}),(o,l)=>(u(),m("section",oe,[t(O,{onClick:k},{default:V(()=>[E(v(r.userData?"Edit":"Create User"),1)]),_:1}),t(te,{show:f.value,onClose:k},{default:V(()=>[e("form",{onSubmit:H(h,["prevent"]),class:"p-6 space-y-4"},[e("h2",le,v(r.userData?"Edit User":"Create a New User"),1),e("div",re,[e("div",null,[t($,{for:"name",value:"Name"}),t(U,{id:"name",modelValue:a(s).name,"onUpdate:modelValue":l[0]||(l[0]=i=>a(s).name=i),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(C,{message:a(s).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[t($,{for:"email",value:"Email"}),t(U,{id:"email",type:"email",modelValue:a(s).email,"onUpdate:modelValue":l[1]||(l[1]=i=>a(s).email=i),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(C,{message:a(s).errors.email,class:"mt-2"},null,8,["message"])]),e("div",null,[t($,{for:"password",value:"Password"}),t(U,{id:"password",type:"password",modelValue:a(s).password,"onUpdate:modelValue":l[2]||(l[2]=i=>a(s).password=i),placeholder:"Password",class:"mt-1 block w-full",required:!r.userData||a(s).password_confirmation!==""},null,8,["modelValue","required"]),t(C,{message:a(s).errors.password,class:"mt-2"},null,8,["message"]),r.userData?(u(),m("small",ie,"Please leave empty if you are not chaing the password")):S("",!0)]),e("div",null,[t($,{for:"password_confirmation",value:"Confirm Password"}),t(U,{id:"password_confirmation",type:"password",modelValue:a(s).password_confirmation,"onUpdate:modelValue":l[3]||(l[3]=i=>a(s).password_confirmation=i),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!r.userData||a(s).password!==""},null,8,["modelValue","required"]),t(C,{message:a(s).errors.password_confirmation},null,8,["message"]),r.userData?(u(),m("small",ne,"Please leave empty if you are not chaing the password")):S("",!0)]),e("div",null,[e("div",de,[t($,{value:"Is Admin"}),e("div",ce,[e("label",ue,[R(e("input",{type:"radio","onUpdate:modelValue":l[4]||(l[4]=i=>a(s).isAdmin=i),value:"1",class:"form-radio"},null,512),[[L,a(s).isAdmin]]),l[7]||(l[7]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",me,[R(e("input",{type:"radio","onUpdate:modelValue":l[5]||(l[5]=i=>a(s).isAdmin=i),value:"0",class:"form-radio"},null,512),[[L,a(s).isAdmin]]),l[8]||(l[8]=e("span",{class:"ml-2"},"No",-1))])]),t(C,{message:a(s).errors.isAdmin,class:"mt-2"},null,8,["message"])])])]),e("div",null,[t($,{for:"payment_category",value:"Approval Role"}),R(e("select",{id:"currency","onUpdate:modelValue":l[6]||(l[6]=i=>a(s).approvalRole=i),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[l[9]||(l[9]=e("option",{value:""},"None",-1)),(u(!0),m(j,null,K(n.value,(i,b)=>(u(),m("option",{key:b,value:b,class:"capitalize"},v(i),9,ve))),128))],512),[[J,a(s).approvalRole]]),t(C,{message:a(s).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",pe,[e("button",{type:"button",onClick:k,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),t(O,{type:"submit",class:q(["ms-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:V(()=>[E(v(r.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}},_e={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},fe={class:"flex"},ge={class:"flex-1"},xe={class:"grid lg:grid-cols-6 grid-cols-2 gap-x-4 gap-y-4"},ye={class:"col"},we={class:"row"},he={class:"col"},be={class:""},$e={class:"col"},Ce={class:"row"},ke={class:"col"},Ve={class:""},De={class:"col"},Pe={class:"row"},Ue={class:"col"},Ae={class:""},Ne={class:"col"},Re={class:"row"},Fe={class:"col"},Se={class:"capitalize"},je={class:"col"},qe={class:"row"},Be={class:"col"},Ee={class:""},Le={class:"col"},Me={class:"row"},Oe={class:"col"},Te={class:""},ze={class:"flex justify-center items-center"},Ke={class:"cursor-pointer hover:text-violet-600 transition-all"},Ie={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(p,{emit:y}){const r=y,f=()=>{r("createComplete",!0)};return(D,n)=>(u(),m("div",_e,[e("div",fe,[e("div",ge,[e("div",xe,[e("div",ye,[n[0]||(n[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"ID")])],-1)),e("div",we,[e("div",he,[e("div",be,v(p.data.id),1)])])]),e("div",$e,[n[1]||(n[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),e("div",Ce,[e("div",ke,[e("div",Ve,v(p.data.email),1)])])]),e("div",De,[n[2]||(n[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),e("div",Pe,[e("div",Ue,[e("div",Ae,v(p.data.name),1)])])]),e("div",Ne,[n[3]||(n[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),e("div",Re,[e("div",Fe,[e("div",Se,v(p.data.role),1)])])]),e("div",je,[n[4]||(n[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),e("div",qe,[e("div",Be,[e("div",Ee,v(p.data.privilege_name??"-"),1)])])]),e("div",Le,[n[5]||(n[5]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",Me,[e("div",Oe,[e("div",Te,v(a(ee)(p.data.created_at)),1)])])])])]),e("div",ze,[e("button",Ke,[t(I,{userData:p.data,onCreateComplete:f},null,8,["userData"])])])])]))}},Ye={class:"flex justify-between content-center"},Ge={key:0},He={key:1},Je={key:0,class:"py-12"},Qe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0"},We={class:"grid md:grid-cols-4 gap-4 mb-5 hidden"},Xe={class:"grid md:grid-cols gap-4 mb-5"},Ze={key:0},es={class:"flex justify-between w-full"},ss={class:"flex justify-end flex-1"},ts=["disabled"],as=["disabled"],os={key:1},_s={__name:"User",setup(p){const y=c(!0),r=c([]),f=c([]),D=c([]),n=c(null),w=c(null),s=c(null),x=c(null),k=c(9),d=c(1),h=c(0),A=route("users.list"),o=async(B=1)=>{try{const g=new URLSearchParams({limit:k.value,page:B,brand:w.value??"",category:s.value??""}).toString(),{data:_}=await Q.get(`${A}?${g}`);r.value=_.data.data,x.value=_.data,h.value=_.data.last_page}catch(g){n.value=g}finally{y.value=!1}};z(()=>{o(d.value)});const l=()=>{d.value>=h.value||(d.value+=1,o(d.value))},i=()=>{d.value<=1||(d.value-=1,o(d.value))},b=()=>{d.value=1,o(d.value)},N=()=>{w.value=null,s.value=null,b()},P=()=>{o(d.value)};return(B,g)=>(u(),m(j,null,[t(a(W),{title:"Users"}),t(Z,null,{header:V(()=>[e("div",Ye,[t(ae,{breadcrumbs:[{title:"Users"}]}),t(I,{onCreateComplete:P})])]),default:V(()=>[y.value?(u(),m("div",Ge,[t(se,{class:"mt-32"})])):(u(),m("div",He,[x.value?(u(),m("div",Je,[e("div",Qe,[e("div",We,[t(T,{class:"w-full mr-5",label:"a brand",modelValue:w.value,"onUpdate:modelValue":g[0]||(g[0]=_=>w.value=_),options:D.value},null,8,["modelValue","options"]),t(T,{class:"w-full mr-5",label:"a category",modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=_=>s.value=_),options:f.value},null,8,["modelValue","options"]),e("button",{class:"bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",onClick:N},"Reset Filters"),e("button",{class:"bg-violet-500 hover:bg-violet-700 text-white py-2 px-4 rounded ml-2",onClick:b},"Search")]),e("div",Xe,[(u(!0),m(j,null,K(r.value,_=>(u(),X(Ie,{onCreateComplete:P,key:_.id,data:_},null,8,["data"]))),128))]),r.value.length===0||r.value==[]?(u(),m("div",Ze,[t(M)])):S("",!0),e("div",es,[e("div",null,[e("p",null,"Showing "+v(x.value.from??0)+" to "+v(x.value.to??0)+" of "+v(x.value.total)+" entries ",1)]),e("div",ss,[e("button",{class:q(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==1}]]),onClick:i,disabled:d.value==1},"Previous Page",10,ts),e("button",{class:q(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==h.value}]]),disabled:d.value==h.value,onClick:l},"Next Page",10,as)])])])])):(u(),m("div",os,[t(M)]))]))]),_:1})],64))}};export{_s as default};

import{a as m,l as c,D as A,p as G,o as s,g as o,w as U,e as M,b as r,F as V,m as O,j as B,t as w,q as j,c as E,A as q,h as F,y as J,u as Q,r as W,n as T}from"./app-CQ2egenK.js";import{L as H,N as R}from"./sweetalert2.esm.all-i480kb9D.js";import{_ as X}from"./Modal-Hi63WmeZ.js";import{P as z}from"./PrimaryButton-Nv72QtsW.js";import{_ as D}from"./InputError-BckMRsOp.js";import{_ as I,a as L}from"./TextInput-oPge-Faa.js";import{I as Y}from"./BreadcrumbComponent-B3cyuvn7.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function K(n){for(var u=1;u<arguments.length;u++){var d=arguments[u]!=null?Object(arguments[u]):{},v=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(d).filter(function(t){return Object.getOwnPropertyDescriptor(d,t).enumerable}))),v.forEach(function(t){ee(n,t,d[t])})}return n}function ee(n,u,d){return u in n?Object.defineProperty(n,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[u]=d,n}var N=function(u,d){var v=K({},u,d.attrs);return m(Y,K({},v,{icon:Z}),null)};N.displayName="SearchOutlined";N.inheritAttrs=!1;const te={class:"p-6"},ae={key:0},le={key:1},se={class:"grid grid-cols-1 gap-4 mt-4"},oe=["onUpdate:modelValue","id"],re={value:"",disabled:"",selected:""},ne=["value"],de={key:0},ie={class:"flex"},ue=["value"],ce=["disabled"],me={class:"mt-6 flex justify-between"},ve={key:0,class:"text-right"},pe={__name:"SortAndFilterComponent",props:{sortAndFilters:{type:Array,default:()=>[]},allowSorting:{type:Boolean,default:!0},filters:{type:Object,default:()=>({})}},setup(n,{emit:u}){const d=c(!1),v=c(!1),t=c({}),k=c(null),y=u,b=n;A(()=>b.filters,a=>{t.value={...a}},{immediate:!0}),A(()=>t.value,a=>{a&&!a.sort_by&&(t.value.sort_by=""),a&&!a.sort_order&&(t.value.sort_order="")},{immediate:!0}),A(()=>t.value.sort_by,a=>{a!=""&&t.value.sort_order==""&&(t.value.sort_order="asc"),a==""&&t.value.sort_order!=""&&(t.value.sort_order="")},{immediate:!0});const i=()=>{y("filtersUpdated",t.value)},h=async a=>{try{const{data:l}=await axios.get(a);return l}catch(l){k.value=l}},$=()=>{d.value=!0},p=()=>{d.value=!1},x=()=>{i(),p()},P=()=>{t.value={},i(),p()},_=a=>a.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),S=c({});return G(async()=>{t.value={...b.filters};for(const a of b.sortAndFilters)if(t.value[a.field_name]=t.value[a.field_name]||"",S.value[a.field_name]="",a.field_type==="select"&&a.api){const l=await h(a.api);a.options=l}}),(a,l)=>(s(),o("section",null,[m(z,{onClick:$},{default:U(()=>l[2]||(l[2]=[M("Sort And Filters")])),_:1}),m(X,{show:d.value,onClose:p},{default:U(()=>[r("div",te,[v.value?(s(),o("div",ae,[m(H,{class:"mt-32 mb-32"})])):(s(),o("div",le,[l[5]||(l[5]=r("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),r("div",se,[(s(!0),o(V,null,O(n.sortAndFilters,(e,g)=>(s(),o("div",{key:g},[m(I,{for:e.field_name,value:e.display_name??_(e.field_name)},null,8,["for","value"]),e.field_type==="select"?B((s(),o("select",{key:0,"onUpdate:modelValue":f=>t.value[e.field_name]=f,id:e.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[r("option",re,"Select "+w(e.display_name??_(e.field_name)),1),(s(!0),o(V,null,O(e.options,(f,C)=>(s(),o("option",{key:C,value:C},w(_(f)),9,ne))),128))],8,oe)),[[j,t.value[e.field_name]]]):e.field_type==="number"?(s(),E(L,{key:1,modelValue:t.value[e.field_name],"onUpdate:modelValue":f=>t.value[e.field_name]=f,id:e.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:q(x,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(s(),E(L,{key:2,modelValue:t.value[e.field_name],"onUpdate:modelValue":f=>t.value[e.field_name]=f,id:e.field_name,type:"text",placeholder:"Search "+(e.display_name??_(e.field_name)),class:"mt-1 block w-full",required:"",onKeydown:q(x,["enter"])},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])),m(D,{message:S.value[e.field_name],class:"mt-2"},null,8,["message"])]))),128)),b.allowSorting?(s(),o("div",de,[m(I,{for:"sort_by",value:"Sort By"}),r("div",ie,[B(r("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>t.value.sort_by=e),id:"sort_by",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[l[3]||(l[3]=r("option",{value:"",selected:""},"-",-1)),(s(!0),o(V,null,O(n.sortAndFilters,(e,g)=>(s(),o("option",{key:g,value:e.field_name},w(e.display_name??_(e.field_name)),9,ue))),128))],512),[[j,t.value.sort_by]]),B(r("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>t.value.sort_order=e),id:"sort_order",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!t.value.sort_by,required:""},l[4]||(l[4]=[r("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),r("option",{value:"asc"},"Ascending",-1),r("option",{value:"desc"},"Descending",-1)]),8,ce),[[j,t.value.sort_order]])]),m(D,{message:S.value.sort_by,class:"mt-2"},null,8,["message"])])):F("",!0)])])),r("div",me,[r("button",{type:"button",onClick:P,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-black rounded-md font-semibold text-xs uppercase tracking-widest"}," Reset Filters "),v.value?F("",!0):(s(),o("div",ve,[r("button",{type:"button",onClick:p,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),m(z,{onClick:x,class:"ms-3"},{default:U(()=>l[6]||(l[6]=[M(" Apply Filters ")])),_:1})]))])])]),_:1},8,["show"])]))}},fe={key:0},ye={key:1},_e={key:0},ge={key:0,class:"flex flex-wrap justify-between items-center mt-6 mb-6 space-y-4 md:space-y-0"},be={key:0,class:"w-full md:w-auto"},he={key:1,class:"w-full md:w-auto block"},we={key:2,class:"flex justify-end w-full md:w-auto"},ke={key:0,class:"block mt-12"},xe={class:"grid md:grid-cols gap-4 mb-5"},Se={key:2},Ce={class:"flex justify-between w-full pt-6"},Fe={class:"flex justify-end flex-1"},$e=["disabled"],Ae=["disabled"],Ve={key:1},Ne={__name:"ListComponent",props:{apiUrl:{type:String,required:!0},createCompleteSignal:{type:Number,default:!1},hasPaddingTop:{type:Boolean,default:!0},hasSearchBox:{type:Boolean,default:!1},sortAndFilters:{type:Array,required:!1},allowSorting:{type:Boolean,default:!0}},setup(n){const u=c(!0),d=c([]),v=c([]),t=c(null);c(null),c(null);const k=c(""),y=c(null),b=c(9),i=c(1),h=c(0),$=n;A(()=>$.createCompleteSignal,a=>{a&&p(i.value)});const p=async(a=1)=>{u.value=!0;try{const l=new URLSearchParams({limit:b.value,page:a});let e=v.value;e.search_value=k.value,Object.entries(e).forEach(([f,C])=>{C&&l.append(f,C)});const{data:g}=await J.get(`${$.apiUrl}?${l.toString()}`);d.value=g.data.data,y.value=g.data,h.value=g.data.last_page}catch(l){t.value=l}finally{u.value=!1}};G(()=>{p(i.value)});const x=()=>{i.value>=h.value||(i.value+=1,p(i.value))},P=()=>{i.value<=1||(i.value-=1,p(i.value))},_=()=>{i.value=1,p(i.value)},S=a=>{v.value=a,p()};return(a,l)=>(s(),o("div",null,[u.value?(s(),o("div",fe,[m(H,{class:"mt-20 mb-20"})])):(s(),o("div",ye,[y.value?(s(),o("div",_e,[n.sortAndFilters||n.hasSearchBox?(s(),o("div",ge,[n.sortAndFilters?(s(),o("div",be,[m(pe,{sortAndFilters:n.sortAndFilters,onFiltersUpdated:S,allowSorting:n.allowSorting,filters:v.value},null,8,["sortAndFilters","allowSorting","filters"])])):(s(),o("div",he)),n.hasSearchBox?(s(),o("div",we,[m(L,{id:"searchText",type:"text",modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),placeholder:"Search",class:"border rounded-l-lg bg-gray-50",onKeydown:q(_,["enter"])},null,8,["modelValue"]),r("button",{class:"bg-gray-50 hover:bg-gray-200 text-gray py-2 px-4 rounded-r-lg",onClick:_},[m(Q(N))])])):F("",!0)])):(s(),o(V,{key:1},[n.hasPaddingTop?(s(),o("div",ke)):F("",!0)],64)),r("div",xe,[W(a.$slots,"list-view",{data:d.value,apiResponse:y.value})]),d.value.length===0||d.value==[]?(s(),o("div",Se,[m(R)])):F("",!0),r("div",Ce,[r("div",null,[r("p",null,"Showing "+w(y.value.from??0)+" to "+w(y.value.to??0)+" of "+w(y.value.total)+" entries",1)]),r("div",Fe,[r("button",{class:T(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":i.value==1}]]),onClick:P,disabled:i.value==1},"Previous Page",10,$e),r("button",{class:T(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":i.value==h.value}]]),disabled:i.value==h.value,onClick:x},"Next Page",10,Ae)])])])):(s(),o("div",Ve,[m(R)]))]))]))}};export{Ne as _};

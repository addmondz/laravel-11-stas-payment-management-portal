import{L as A,S as b,b as F}from"./sweetalert2.esm.all-vFncgdV7.js";import{l as g,C as M,D as O,p as L,o as u,g as m,a as t,w as C,e as k,t as n,b as e,f as T,u as o,h as D,j as U,q as $,F as z,m as K,n as G}from"./app-aM69IDsn.js";import{_ as v}from"./InputError-BPMAAmSR.js";import{_ as f,a as w}from"./TextInput-BS9jK6QB.js";import{_ as H}from"./Modal-C6fo55aG.js";import{P}from"./PrimaryButton-GD9_oimd.js";const I={class:"space-y-6"},J={key:0},Q={class:"text-lg font-medium text-gray-900"},W={class:"grid grid-cols-1 gap-4 mt-4"},X={key:0,class:"text-gray-500 font-bold"},Y={key:0,class:"text-gray-500 font-bold"},Z=["value"],ee={class:"text-right mt-6"},se={key:1},oe={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(c,{emit:x}){const i=c,p=g(!1),V=x,d=g([]),R=g(null),_=g(!1),s=M({name:"",email:"",password:"",password_confirmation:"",role:"",approvalRole:""});O(()=>i.userData,l=>{l?(s.name=l.name,s.email=l.email,s.role=l.role,s.approvalRole=l.approval_role_id):s.reset()},{immediate:!0});const q=()=>{p.value=!1},y=()=>{p.value=!p.value},N=()=>s.password!==s.password_confirmation?(s.errors.password_confirmation="Passwords do not match",!1):(s.errors.password_confirmation="",!0),E=async()=>{if(_.value=!0,!N()){_.value=!1,b.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const l=new FormData;for(const[S,j]of Object.entries(s.data()))l.append(S,j);const a=i.userData?route("user.update",i.userData.id):route("user.create"),h=await axios["post"](a,l);b.fire({title:"Success!",text:i.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),q(),s.reset(),V("createComplete",!0)}catch(l){l.response&&l.response.data.errors?s.errors=l.response.data.errors:b.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}finally{_.value=!1}},B=async()=>{try{const{data:l}=await axios.get(route("approvalRoles.list"));d.value=l}catch(l){R.value=l}};return L(()=>{B()}),(l,a)=>(u(),m("section",I,[t(P,{onClick:y},{default:C(()=>[k(n(i.userData?"Edit":"Create"),1)]),_:1}),t(H,{show:p.value,onClose:y},{default:C(()=>[e("form",{onSubmit:T(E,["prevent"]),class:"p-6 space-y-4"},[_.value?(u(),m("div",se,[t(A,{class:"mt-32 mb-32"})])):(u(),m("div",J,[e("h2",Q,n(i.userData?"Edit User":"Create a New User"),1),e("div",W,[e("div",null,[t(f,{for:"name",value:"Name"}),t(w,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":a[0]||(a[0]=r=>o(s).name=r),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(v,{message:o(s).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[t(f,{for:"email",value:"Email"}),t(w,{id:"email",type:"email",modelValue:o(s).email,"onUpdate:modelValue":a[1]||(a[1]=r=>o(s).email=r),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(v,{message:o(s).errors.email,class:"mt-2"},null,8,["message"])]),e("div",null,[t(f,{for:"password",value:"Password"}),t(w,{id:"password",type:"password",modelValue:o(s).password,"onUpdate:modelValue":a[2]||(a[2]=r=>o(s).password=r),placeholder:"Password",class:"mt-1 block w-full",required:!i.userData||o(s).password_confirmation!==""},null,8,["modelValue","required"]),t(v,{message:o(s).errors.password,class:"mt-2"},null,8,["message"]),i.userData?(u(),m("small",X,"Please leave empty if you are not chaing the password")):D("",!0)]),e("div",null,[t(f,{for:"password_confirmation",value:"Confirm Password"}),t(w,{id:"password_confirmation",type:"password",modelValue:o(s).password_confirmation,"onUpdate:modelValue":a[3]||(a[3]=r=>o(s).password_confirmation=r),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!i.userData||o(s).password!==""},null,8,["modelValue","required"]),t(v,{message:o(s).errors.password_confirmation},null,8,["message"]),i.userData?(u(),m("small",Y,"Please leave empty if you are not chaing the password")):D("",!0)]),e("div",null,[t(f,{for:"role",value:"User Role"}),U(e("select",{id:"role","onUpdate:modelValue":a[4]||(a[4]=r=>o(s).role=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},a[6]||(a[6]=[e("option",{value:"",disabled:"",selected:""},"Please select User Role",-1),e("option",{value:"user"},"User",-1),e("option",{value:"finance"},"Finance",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[$,o(s).role]]),t(v,{message:o(s).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[t(f,{for:"payment_category",value:"Approval Role"}),U(e("select",{id:"currency","onUpdate:modelValue":a[5]||(a[5]=r=>o(s).approvalRole=r),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[a[7]||(a[7]=e("option",{value:""},"None",-1)),(u(!0),m(z,null,K(d.value,(r,h)=>(u(),m("option",{key:h,value:h,class:"capitalize"},n(r),9,Z))),128))],512),[[$,o(s).approvalRole]]),t(v,{message:o(s).errors.payment_category,class:"mt-2"},null,8,["message"])])]),e("div",ee,[e("button",{type:"button",onClick:y,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),t(P,{type:"submit",class:G(["ms-3",{"opacity-25":o(s).processing}]),disabled:o(s).processing},{default:C(()=>[k(n(i.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}},te={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ae={class:"flex"},le={class:"flex-1"},re={class:"grid lg:grid-cols-5 grid-cols-2 gap-x-4 gap-y-4"},ie={class:"col"},de={class:"row"},ne={class:"col"},ce={class:"text-[14px]"},ue={class:"col"},me={class:"row"},pe={class:"col"},ve={class:"text-[14px] truncate"},fe={class:"col"},_e={class:"row"},ge={class:"col"},we={class:"text-[14px] capitalize"},xe={class:"col"},ye={class:"row"},he={class:"col"},be={class:"text-[14px]"},Ce={class:"col"},Ve={class:"row"},ke={class:"col"},De={class:"text-[14px]"},Ue={class:"flex justify-center items-center"},$e={class:"cursor-pointer hover:text-violet-600 transition-all"},Se={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(c,{emit:x}){const i=x,p=()=>{i("createComplete",!0)};return(V,d)=>(u(),m("div",te,[e("div",ae,[e("div",le,[e("div",re,[e("div",ie,[d[0]||(d[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),e("div",de,[e("div",ne,[e("div",ce,n(c.data.email),1)])])]),e("div",ue,[d[1]||(d[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),e("div",me,[e("div",pe,[e("div",ve,n(c.data.name),1)])])]),e("div",fe,[d[2]||(d[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),e("div",_e,[e("div",ge,[e("div",we,n(c.data.role),1)])])]),e("div",xe,[d[3]||(d[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),e("div",ye,[e("div",he,[e("div",be,n(c.data.privilege_name??"-"),1)])])]),e("div",Ce,[d[4]||(d[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",Ve,[e("div",ke,[e("div",De,n(o(F)(c.data.created_at)),1)])])])])]),e("div",Ue,[e("button",$e,[t(oe,{userData:c.data,onCreateComplete:p},null,8,["userData"])])])])]))}};export{oe as _,Se as a};

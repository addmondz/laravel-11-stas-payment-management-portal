import{a as s,k as _,C as M,s as j,o as c,g as f,c as V,u as r,w as v,e as P,t as w,b as a,f as B,j as I,x as L,h as T,n as U}from"./app-BqkFhKPu.js";import{_ as y}from"./InputError-DlBW7G1f.js";import{_ as b,a as C}from"./TextInput-Bkg65zy3.js";import{M as q}from"./Modal-DQkKpkI3.js";import{P as k}from"./PrimaryButton-BvUwiS45.js";import{L as z}from"./NotFound-C3Don0V4.js";import{S as O}from"./helpers-BHtfX1ZS.js";import{I as F}from"./BreadcrumbComponent-DboqqL2m.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function x(i){for(var l=1;l<arguments.length;l++){var e=arguments[l]!=null?Object(arguments[l]):{},u=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(e).filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable}))),u.forEach(function(d){R(i,d,e[d])})}return i}function R(i,l,e){return l in i?Object.defineProperty(i,l,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[l]=e,i}var h=function(l,e){var u=x({},l,e.attrs);return s(F,x({},u,{icon:$}),null)};h.displayName="EditOutlined";h.inheritAttrs=!1;const A={key:0},G={key:1},H={class:"text-lg font-medium"},J={class:"grid grid-cols-1 gap-4 mt-4"},Q=["required"],W={key:0,class:"text-indigo-500 font-bold"},X={class:"text-right mt-6"},se={__name:"PaymentVoucherForm",props:{claimId:{type:String,required:!0},data:{type:Object,default:null},isListComponent:{type:Boolean,default:!1}},setup(i,{emit:l}){const e=i,u=l,d=_(!1),g=_(!1),p=()=>g.value=!g.value,t=M({paymentVoucherNumber:"",paymentDate:"",receipt:null,payment_mode:""});j(()=>e.data,m=>{m?(t.paymentVoucherNumber=m.payment_voucher_number,t.paymentDate=m.payment_date,t.receipt=m.payment_voucher_receipt_file,t.payment_mode=m.payment_mode):t.reset()},{immediate:!0});const N=async()=>{var m,o;d.value=!0;try{const n=new FormData;Object.entries(t.data()).forEach(([S,D])=>n.append(S,D));const E=e.data==null?route("claims.paymentCompleted",e.claimId):route("claims.paymentCompletedUpdate",e.claimId);await axios.post(E,n),O.fire("Success!","Payment details updated successfully","success"),p(),t.reset(),u("createComplete",!0)}catch(n){O.fire("Error!",(o=(m=n.response)==null?void 0:m.data)!=null&&o.errors?"Please check the form.":"An unexpected error occurred.","error")}finally{d.value=!1}};return(m,o)=>(c(),f("section",null,[e.data!=null&&e.isListComponent?(c(),V(r(h),{key:0,class:"mb-2 mr-2",onClick:p})):(c(),V(k,{key:1,class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:p},{default:v(()=>[P(w(e.data?"Edit Payment Voucher":"Payment Completed"),1)]),_:1})),s(q,{show:g.value,onClose:p},{default:v(()=>[a("form",{onSubmit:B(N,["prevent"]),class:"p-6 space-y-4"},[d.value?(c(),f("div",A,[s(z,{class:"mt-32 mb-32"})])):(c(),f("div",G,[a("h2",H,w(e.data?"Edit":"")+" Payment Voucher Details",1),a("div",J,[a("div",null,[s(b,{for:"paymentVoucherNumber",value:"Payment Voucher Number"}),s(C,{id:"paymentVoucherNumber",modelValue:r(t).paymentVoucherNumber,"onUpdate:modelValue":o[0]||(o[0]=n=>r(t).paymentVoucherNumber=n),class:"mt-1 block w-full",required:"",placeholder:"Enter Voucher Number"},null,8,["modelValue"]),s(y,{message:r(t).errors.paymentVoucherNumber,class:"mt-2"},null,8,["message"])]),a("div",null,[s(b,{for:"paymentDate",value:"Payment Date"}),s(C,{id:"paymentDate",type:"date",modelValue:r(t).paymentDate,"onUpdate:modelValue":o[1]||(o[1]=n=>r(t).paymentDate=n),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(y,{message:r(t).errors.paymentDate,class:"mt-2"},null,8,["message"])]),a("div",null,[s(b,{for:"payment_mode",value:"Payment Mode"}),I(a("select",{id:"payment_mode","onUpdate:modelValue":o[2]||(o[2]=n=>r(t).payment_mode=n),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},o[4]||(o[4]=[a("option",{value:"",disabled:"",selected:""},"Please select Payment Mode",-1),a("option",{value:"PayNow"},"PayNow",-1),a("option",{value:"GIRO"},"GIRO",-1),a("option",{value:"IBFT"},"IBFT",-1),a("option",{value:"TT"},"TT",-1)]),512),[[L,r(t).payment_mode]]),s(y,{message:r(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),a("div",null,[s(b,{for:"receipt",value:"Upload Receipt"}),a("input",{id:"receipt",type:"file",onChange:o[3]||(o[3]=n=>r(t).receipt=n.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:e.data==null},null,40,Q),s(y,{message:r(t).errors.receipt,class:"mt-2"},null,8,["message"]),e.data!=null?(c(),f("small",W," Please leave this field empty if you do not want to update the file. ")):T("",!0)])]),a("div",X,[a("button",{type:"button",onClick:p,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),s(k,{type:"submit",class:U(["ms-3",{"opacity-25":r(t).processing}]),disabled:r(t).processing},{default:v(()=>o[5]||(o[5]=[P(" Submit ")])),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}};export{h as E,se as _};

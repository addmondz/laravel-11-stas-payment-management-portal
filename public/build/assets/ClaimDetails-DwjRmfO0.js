import{a as n,o as r,g as p,b as t,k as b,l as E,u as l,w as C,F as P,x as S,d as F,c as x,h as u,t as d,p as q,e as G}from"./app-D17gf7Xf.js";import{_ as U}from"./AuthenticatedLayout-CDKja__0.js";import{c as W,L as J,b as A,a as D,N as Q,S as j,h as X}from"./sweetalert2.esm.all-DVnf6i9J.js";import{_ as Z}from"./StatusLabel-D5UksrWl.js";import{I as N,_ as K}from"./BreadcrumbComponent-m5PLBaYM.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as tt}from"./PrimaryButton-BBHxQPUc.js";import"./ApplicationLogo-M_mRncSF.js";var et={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function B(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},m=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),m.forEach(function(f){st(a,f,s[f])})}return a}function st(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}var O=function(o,s){var m=B({},o,s.attrs);return n(N,B({},m,{icon:et}),null)};O.displayName="CloseOutlined";O.inheritAttrs=!1;var ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function T(a){for(var o=1;o<arguments.length;o++){var s=arguments[o]!=null?Object(arguments[o]):{},m=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(m=m.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),m.forEach(function(f){rt(a,f,s[f])})}return a}function rt(a,o,s){return o in a?Object.defineProperty(a,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[o]=s,a}var _=function(o,s){var m=T({},o,s.attrs);return n(N,T({},m,{icon:ot}),null)};_.displayName="InfoCircleOutlined";_.inheritAttrs=!1;const at={},nt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function lt(a,o){return r(),p("svg",nt,o[0]||(o[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))}const g=M(at,[["render",lt]]),it={},ct={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function ut(a,o){return r(),p("svg",ct,o[0]||(o[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)]))}const h=M(it,[["render",ut]]),dt={class:"flex justify-between content-center"},pt={key:0},mt={key:1},ft={key:0,class:"py-12 m-5 mt-0 pt-5"},vt={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 mb-5"},_t={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},xt={class:"flex justify-between content-center w-full"},yt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},bt={class:"mb-4"},gt={class:"flex justify-between"},ht={class:"text-base"},wt={class:"mb-4"},kt={class:"flex justify-between"},Ct={class:"text-base"},jt={class:"mb-4"},Ot={class:"flex justify-between"},$t={class:"text-base"},Pt={class:"mb-4"},St={class:"flex justify-between"},At={class:"text-base"},Dt={class:"mb-4"},Bt={class:"flex justify-between"},Tt={class:"text-base"},Nt={class:"mb-4"},Mt={class:"flex justify-between"},zt={class:"text-base"},It={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Lt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Ht={class:"flex justify-between content-center w-full"},Yt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Rt={class:"mb-4"},Vt={class:"flex justify-between"},Et={class:"text-base"},Ft={class:"mb-4"},qt={class:"flex justify-between"},Gt={class:"text-base"},Ut={class:"mb-4"},Wt={class:"flex justify-between"},Jt={class:"text-base"},Qt={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Xt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Zt={class:"flex justify-between content-center w-full"},Kt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},te={class:"mb-4"},ee={class:"flex justify-between"},se={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},oe={class:"bg-white p-4 pt-2 rounded-lg max-w-lg"},re={class:"flex flex-col"},ae={class:"text-right"},ne=["src"],le={class:"mb-4"},ie={class:"flex justify-between"},ce={class:"text-base"},ue={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},de={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},pe={class:"flex justify-between content-center w-full"},me={key:0,class:"p-6 border-gray-300 mb-4 w-full"},fe=["value"],ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},_e={key:1},je={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(a){const o=b(!0),s=b([]),m=b(null),f=b(null),w=a,z=route("claims.fetchData",w.id);b("0"),b({});const I=[{title:"Claims",link:route("claims")},{title:"#"+W(w.id)}],c=b({details:!0,amount:!0,receipt:!0,approvalHistory:!0}),y=i=>{c.value[i]=!c.value[i]},L=()=>{j.fire({title:"Are you sure?",text:"Are you sure you want to approve this Claim?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((i,e)=>{H()})})},H=async()=>{try{const i=await S.post(route("claims.approveClaim",w.id));console.log(i.data.response),$(),j.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(i){j.fire({title:"Error!",text:i.response?i.response.data.error||"There was an error while approving the claim. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},$=async()=>{try{const{data:i}=await S.get(z);s.value=i.data,f.value=i}catch(i){m.value=i}finally{o.value=!1}};E(()=>{$()});const k=b(!1),Y=()=>{k.value=!0},R=()=>{k.value=!1},V=i=>X(i).format("DD-MM-YYYY hh:mm:ss A");return(i,e)=>(r(),p(P,null,[n(l(F),{title:"Claim Details"}),n(U,null,{header:C(()=>[t("div",dt,[n(K,{breadcrumbs:I}),f.value?(r(),x(Z,{key:0,class:"text-sm inline-block",status:s.value.status},null,8,["status"])):u("",!0)])]),default:C(()=>[o.value?(r(),p("div",pt,[n(J,{class:"mt-32"})])):(r(),p("div",mt,[f.value?(r(),p("div",ft,[t("div",vt,[t("div",_t,[t("div",xt,[e[8]||(e[8]=t("h2",null,"Details",-1)),c.value.details?(r(),x(g,{key:0,class:"cursor-pointer",onClick:e[0]||(e[0]=v=>y("details"))})):u("",!0),c.value.details?u("",!0):(r(),x(h,{key:1,class:"cursor-pointer",onClick:e[1]||(e[1]=v=>y("details"))}))])]),c.value.details?(r(),p("div",yt,[t("div",bt,[t("div",gt,[e[9]||(e[9]=t("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),n(l(_),{class:"text-gray-400"})]),t("p",ht,d(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),t("div",wt,[t("div",kt,[e[10]||(e[10]=t("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),n(l(_),{class:"text-gray-400"})]),t("p",Ct,d(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),t("div",jt,[t("div",Ot,[e[11]||(e[11]=t("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),n(l(_),{class:"text-gray-400"})]),t("p",$t,d(s.value.payment_type??"-"),1)]),t("div",Pt,[t("div",St,[e[12]||(e[12]=t("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),n(l(_),{class:"text-gray-400"})]),t("p",At,d(s.value.payment_category??"-"),1)]),t("div",Dt,[t("div",Bt,[e[13]||(e[13]=t("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),n(l(_),{class:"text-gray-400"})]),t("p",Tt,d(s.value.purpose??"-"),1)]),t("div",Nt,[t("div",Mt,[e[14]||(e[14]=t("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),n(l(_),{class:"text-gray-400"})]),t("p",zt,d(l(A)(s.value.created_at)??"-"),1)])])):u("",!0)]),t("div",It,[t("div",Lt,[t("div",Ht,[e[15]||(e[15]=t("h2",null,"Amount",-1)),c.value.amount?(r(),x(g,{key:0,class:"cursor-pointer",onClick:e[2]||(e[2]=v=>y("amount"))})):u("",!0),c.value.amount?u("",!0):(r(),x(h,{key:1,class:"cursor-pointer",onClick:e[3]||(e[3]=v=>y("amount"))}))])]),c.value.amount?(r(),p("div",Yt,[t("div",Rt,[t("div",Vt,[e[16]||(e[16]=t("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),n(l(_),{class:"text-gray-400"})]),t("p",Et,d(s.value.currency_object.short_code)+" "+d(l(D)(s.value.amount)),1)]),t("div",Ft,[t("div",qt,[e[17]||(e[17]=t("p",{class:"mb-1 text-sm text-gray-500"},"With GST",-1)),n(l(_),{class:"text-gray-400"})]),t("p",Gt,d(Number(s.value.gst_amount)===0?"No":"Yes"),1)]),t("div",Ut,[t("div",Wt,[e[18]||(e[18]=t("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),n(l(_),{class:"text-gray-400"})]),t("p",Jt,d(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+l(D)(s.value.gst_amount)),1)])])):u("",!0)]),t("div",Qt,[t("div",Xt,[t("div",Zt,[e[19]||(e[19]=t("h2",null,"Receipt",-1)),c.value.receipt?(r(),x(g,{key:0,class:"cursor-pointer",onClick:e[4]||(e[4]=v=>y("receipt"))})):u("",!0),c.value.receipt?u("",!0):(r(),x(h,{key:1,class:"cursor-pointer",onClick:e[5]||(e[5]=v=>y("receipt"))}))])]),c.value.receipt?(r(),p("div",Kt,[t("div",te,[t("div",ee,[e[20]||(e[20]=t("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),n(l(_),{class:"text-gray-400"})]),t("div",null,[t("div",{class:"text-base cursor-pointer inline text-violet-700 font-bold",onClick:Y},"Open "),k.value?(r(),p("div",se,[t("div",oe,[t("div",re,[t("div",ae,[n(l(O),{class:"pb-2",onClick:R})]),t("img",{src:`/public/${s.value.receipt_file}`,alt:"Receipt Image",class:"max-w-full max-h-screen"},null,8,ne)])])])):u("",!0)])]),t("div",le,[t("div",ie,[e[21]||(e[21]=t("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),n(l(_),{class:"text-gray-400"})]),t("p",ce,d(l(A)(s.value.receipt_date)??"-"),1)])])):u("",!0)]),t("div",ue,[t("div",de,[t("div",pe,[e[22]||(e[22]=t("h2",null,"Approval History",-1)),c.value.approvalHistory?(r(),x(g,{key:0,class:"cursor-pointer",onClick:e[6]||(e[6]=v=>y("approvalHistory"))})):u("",!0),c.value.approvalHistory?u("",!0):(r(),x(h,{key:1,class:"cursor-pointer",onClick:e[7]||(e[7]=v=>y("approvalHistory"))}))])]),c.value.approvalHistory?(r(),p("div",me,[(r(!0),p(P,null,q(s.value.status_log,v=>(r(),p("p",{key:v.id,value:v},d(V(v.created_at))+" - "+d(v.name)+" - "+d(v.status),9,fe))),128))])):u("",!0)]),t("div",ve,[n(tt,{onClick:L},{default:C(()=>e[23]||(e[23]=[G("Approve Claim")])),_:1})])])):(r(),p("div",_e,[n(Q)]))]))]),_:1})],64))}};export{je as default};

import{a as u,o as s,g as a,j as O,p as re,u as J,n as Q,k as v,s as K,m as ie,w as q,e as z,b as o,h as C,c as F,F as U,l as B,t as x,x as j,B as L,i as pe,r as fe,q as le}from"./app-DXWRZbTu.js";import{L as W,N as se}from"./NotFound-Bo211h0C.js";import{M as ye}from"./Modal-GjDE-CDu.js";import{P as D}from"./PrimaryButton-C1vt5dv4.js";import{_ as E}from"./InputError-1v-n5xrC.js";import{_ as R,a as T}from"./TextInput-CECpCSa5.js";import{_ as ae}from"./DateRangeComponent-BJHBgZdI.js";import{I as ue}from"./BreadcrumbComponent-CmG1oAuH.js";import{i as ge}from"./AuthenticatedLayout-hEbHbn_O.js";import{S as Y}from"./helpers-CrVvo6q3.js";import{_ as be}from"./PaymentVoucherForm-Btv3Bhu5.js";var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function oe(l){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?Object(arguments[r]):{},c=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(d).filter(function(t){return Object.getOwnPropertyDescriptor(d,t).enumerable}))),c.forEach(function(t){_e(l,t,d[t])})}return l}function _e(l,r,d){return r in l?Object.defineProperty(l,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[r]=d,l}var X=function(r,d){var c=oe({},r,d.attrs);return u(ue,oe({},c,{icon:he}),null)};X.displayName="CheckOutlined";X.inheritAttrs=!1;var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function ne(l){for(var r=1;r<arguments.length;r++){var d=arguments[r]!=null?Object(arguments[r]):{},c=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(c=c.concat(Object.getOwnPropertySymbols(d).filter(function(t){return Object.getOwnPropertyDescriptor(d,t).enumerable}))),c.forEach(function(t){ke(l,t,d[t])})}return l}function ke(l,r,d){return r in l?Object.defineProperty(l,r,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[r]=d,l}var Z=function(r,d){var c=ne({},r,d.attrs);return u(ue,ne({},c,{icon:we}),null)};Z.displayName="SearchOutlined";Z.inheritAttrs=!1;const xe={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(l,{emit:r}){const d=l,c=r,t=()=>{c("update-selected",!d.isSelected)};return(N,P)=>(s(),a("div",{class:Q(["square-btn border-4 flex justify-center items-center",{"selected bg-violet-400 border-violet-400":l.isSelected,"border-gray-400":!l.isSelected}]),onClick:t},[O(u(J(X),{class:"font-extrabold text-white"},null,512),[[re,l.isSelected]])],2))}},Se={key:0},Fe={class:"p-6"},Ce={key:0},Oe={key:1},Ae={class:"grid grid-cols-1 gap-4 mt-4"},Ve=["onUpdate:modelValue","id"],$e={value:"",disabled:"",selected:""},Ue=["value"],Pe={key:0},Be={class:"flex"},je=["value"],Ie=["disabled"],qe={class:"mt-6 flex justify-between"},Le={key:0,class:"text-right"},Te=["show"],Ne={class:"border border-gray-300 rounded-2xl p-6 bg-white mt-5",style:{"margin-bottom":"-30px"}},Me={key:0},Ee={key:1},Re={class:"grid grid-cols-1 gap-8 mt-4 sm:grid-cols-2 lg:grid-cols-3"},Ke=["onUpdate:modelValue","id"],ze={value:"",disabled:"",selected:""},De=["value"],Ge={key:0,class:"col-span-full space-y-2"},He={class:"grid grid-cols-1 gap-8 mt-4 sm:grid-cols-2 lg:grid-cols-3"},Ye=["value"],Je=["disabled"],Qe={class:"mt-6 flex justify-between"},We={key:0,class:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3"},de={__name:"SortAndFilterComponent",props:{sortAndFilters:{type:Array,default:()=>[]},allowSorting:{type:Boolean,default:!0},showFiltersOutside:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})}},setup(l,{emit:r}){const d=v(!1),c=v(!1),t=v({}),N=v(null),P=r,b=l;K(()=>b.filters,i=>{t.value={...i}},{immediate:!0}),K(()=>t.value,i=>{i&&!i.sort_by&&(t.value.sort_by=""),i&&!i.sort_order&&(t.value.sort_order="")},{immediate:!0}),K(()=>t.value.sort_by,i=>{i!=""&&t.value.sort_order==""&&(t.value.sort_order="asc"),i==""&&t.value.sort_order!=""&&(t.value.sort_order="")},{immediate:!0});const I=()=>{P("filtersUpdated",t.value)},G=async i=>{try{const{data:n}=await axios.get(i);return n}catch(n){N.value=n}},f=()=>{d.value=!0},S=()=>{d.value=!1},h=()=>{I(),S()},A=()=>{t.value={},I(),S()},p=i=>i.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()),_=v({});return ie(async()=>{t.value={...b.filters};for(const i of b.sortAndFilters)if(t.value[i.field_name]=t.value[i.field_name]||"",_.value[i.field_name]="",i.field_type==="select"&&i.api){const n=await G(i.api);i.options=n}}),(i,n)=>(s(),a("section",null,[l.showFiltersOutside?C("",!0):(s(),a("div",Se,[u(D,{class:"mr-2",onClick:f},{default:q(()=>n[4]||(n[4]=[z("Sort And Filters")])),_:1}),o("button",{type:"button",onClick:A,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-gray-300 rounded-md font-semibold text-xs uppercase tracking-widest mr-2"}," Reset Filters ")])),l.showFiltersOutside?(s(),a("div",{key:2,show:d.value,onClose:S},[o("div",Ne,[c.value?(s(),a("div",Me,[u(W,{class:"mt-32 mb-32"})])):(s(),a("div",Ee,[n[11]||(n[11]=o("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),o("div",Re,[(s(!0),a(U,null,B(l.sortAndFilters,(e,k)=>(s(),a("div",{key:k,class:"space-y-2"},[u(R,{for:e.field_name,value:e.display_name??p(e.field_name)},null,8,["for","value"]),e.field_type==="select"?O((s(),a("select",{key:0,"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[o("option",ze,"Select "+x(e.display_name??p(e.field_name)),1),(s(!0),a(U,null,B(e.options,(m,V)=>(s(),a("option",{key:V,value:V},x(p(m)),9,De))),128))],8,Ke)),[[j,t.value[e.field_name]]]):e.field_type==="date_range"?(s(),F(ae,{key:1,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,label:e.display_name??"",showLabel:!1},null,8,["modelValue","onUpdate:modelValue","label"])):e.field_type==="number"?(s(),F(T,{key:2,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:L(h,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(s(),F(T,{key:3,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,type:"text",placeholder:"Search "+(e.display_name??p(e.field_name)),class:"mt-1 block w-full",required:"",onKeydown:L(h,["enter"])},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])),u(E,{message:_.value[e.field_name],class:"mt-2"},null,8,["message"])]))),128)),b.allowSorting?(s(),a("div",Ge,[u(R,{for:"sort_by",value:"Sort By"}),o("div",He,[O(o("select",{"onUpdate:modelValue":n[2]||(n[2]=e=>t.value.sort_by=e),id:"sort_by",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[n[9]||(n[9]=o("option",{value:"",selected:""},"-",-1)),(s(!0),a(U,null,B(l.sortAndFilters,(e,k)=>(s(),a("option",{key:k,value:e.field_name},x(e.display_name??p(e.field_name)),9,Ye))),128))],512),[[j,t.value.sort_by]]),O(o("select",{"onUpdate:modelValue":n[3]||(n[3]=e=>t.value.sort_order=e),id:"sort_order",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!t.value.sort_by,required:""},n[10]||(n[10]=[o("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),o("option",{value:"asc"},"Ascending",-1),o("option",{value:"desc"},"Descending",-1)]),8,Je),[[j,t.value.sort_order]])]),u(E,{message:_.value.sort_by,class:"mt-2"},null,8,["message"])])):C("",!0)])])),o("div",Qe,[c.value?C("",!0):(s(),a("div",We,[u(D,{onClick:h,class:"ms-3",style:{"margin-left":"0"}},{default:q(()=>n[12]||(n[12]=[z(" Apply Filters ")])),_:1}),o("button",{type:"button",onClick:A,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-black rounded-md font-semibold text-xs uppercase tracking-widest"}," Reset Filters ")]))])])],40,Te)):(s(),F(ye,{key:1,show:d.value,onClose:S},{default:q(()=>[o("div",Fe,[c.value?(s(),a("div",Ce,[u(W,{class:"mt-32 mb-32"})])):(s(),a("div",Oe,[n[7]||(n[7]=o("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),o("div",Ae,[(s(!0),a(U,null,B(l.sortAndFilters,(e,k)=>(s(),a("div",{key:k},[u(R,{for:e.field_name,value:e.display_name??p(e.field_name)},null,8,["for","value"]),e.field_type==="select"?O((s(),a("select",{key:0,"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[o("option",$e,"Select "+x(e.display_name??p(e.field_name)),1),(s(!0),a(U,null,B(e.options,(m,V)=>(s(),a("option",{key:V,value:V},x(p(m)),9,Ue))),128))],8,Ve)),[[j,t.value[e.field_name]]]):e.field_type==="date_range"?(s(),F(ae,{key:1,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,label:e.display_name??"",showLabel:!1},null,8,["modelValue","onUpdate:modelValue","label"])):e.field_type==="number"?(s(),F(T,{key:2,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:L(h,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(s(),F(T,{key:3,modelValue:t.value[e.field_name],"onUpdate:modelValue":m=>t.value[e.field_name]=m,id:e.field_name,type:"text",placeholder:"Search "+(e.display_name??p(e.field_name)),class:"mt-1 block w-full",required:"",onKeydown:L(h,["enter"])},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])),u(E,{message:_.value[e.field_name],class:"mt-2"},null,8,["message"])]))),128)),b.allowSorting?(s(),a("div",Pe,[u(R,{for:"sort_by",value:"Sort By"}),o("div",Be,[O(o("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>t.value.sort_by=e),id:"sort_by",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[n[5]||(n[5]=o("option",{value:"",selected:""},"-",-1)),(s(!0),a(U,null,B(l.sortAndFilters,(e,k)=>(s(),a("option",{key:k,value:e.field_name},x(e.display_name??p(e.field_name)),9,je))),128))],512),[[j,t.value.sort_by]]),O(o("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>t.value.sort_order=e),id:"sort_order",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!t.value.sort_by,required:""},n[6]||(n[6]=[o("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),o("option",{value:"asc"},"Ascending",-1),o("option",{value:"desc"},"Descending",-1)]),8,Ie),[[j,t.value.sort_order]])]),u(E,{message:_.value.sort_by,class:"mt-2"},null,8,["message"])])):C("",!0)])])),o("div",qe,[o("button",{type:"button",onClick:A,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-black rounded-md font-semibold text-xs uppercase tracking-widest"}," Reset Filters "),c.value?C("",!0):(s(),a("div",Le,[o("button",{type:"button",onClick:S,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),u(D,{onClick:h,class:"ms-3"},{default:q(()=>n[8]||(n[8]=[z(" Apply Filters ")])),_:1})]))])])]),_:1},8,["show"]))]))}},Xe={key:0},Ze={key:1},et={key:0},tt={key:0,class:"w-full md:w-auto"},lt={key:1,class:"w-full md:w-auto block"},st={key:2,class:"flex flex-wrap justify-between items-center mt-6 mb-6 space-y-4 md:space-y-0"},at={key:0,class:"w-full md:w-auto"},ot={key:1,class:"w-full md:w-auto block"},nt={key:2,class:"flex justify-end w-full md:w-auto"},dt={key:0,class:"block mt-12"},rt={key:4},it={class:"flex items-center w-full order-last lg:order-none max-lg:mx-auto p-5 pt-0 rounded-xl overflow-hidden transition-all duration-500"},ut={class:"grid md:grid-cols gap-4 mb-5"},ct={key:5},mt={class:"flex justify-between w-full pt-6 flex-col sm:flex-row"},vt={class:"mb-4 sm:mb-0"},pt={class:"text-center"},ft={class:"flex justify-end flex-1"},yt=["disabled"],gt=["disabled"],bt={key:1},$t={__name:"ListComponent",props:{apiUrl:{type:String,required:!0},createCompleteSignal:{type:Number,default:!1},hasPaddingTop:{type:Boolean,default:!0},hasSearchBox:{type:Boolean,default:!1},sortAndFilters:{type:Array,default:()=>null},allowSorting:{type:Boolean,default:!0},allowSelectAll:{type:Boolean,default:!1},showFiltersOutside:{type:Boolean,default:!1},selectedIds:{type:Array,default:()=>[]}},emits:["update:wholeSelectedIds"],setup(l,{emit:r}){const d=v(!0),c=v([]),t=v([]),N=v(null),P=v(""),b=v(null),I=v(null),G=v(9),f=v(1),S=v(0),h=v(!1),A=v([]),p=l;K(()=>p.createCompleteSignal,y=>{y&&_(f.value)});const _=async(y=1)=>{var g;d.value=!0;try{const w=new URLSearchParams({limit:G.value,page:y});let ee=t.value;ee.search_value=P.value,Object.entries(ee).forEach(([H,te])=>{te&&w.append(H,te)});const{data:$}=await le.get(`${p.apiUrl}?${w.toString()}`);c.value=((g=$==null?void 0:$.data)==null?void 0:g.data)||[],b.value=$.data,I.value=$,S.value=$.data.last_page,A.value=$.data.data.map(H=>H.id)}catch(w){N.value=w}finally{d.value=!1}},i=pe(()=>p.selectedIds.toString());ie(()=>{_(f.value)});const n=()=>{f.value>=S.value||(f.value+=1,_(f.value))},e=()=>{f.value<=1||(f.value-=1,_(f.value))},k=y=>{t.value=y,_()},m=r,V=y=>{h.value=!h.value;let g=h.value?[...new Set([...p.selectedIds,...A.value])]:[];m("update:wholeSelectedIds",g)},M=()=>{f.value=1,_(f.value),m("update:wholeSelectedIds",[]),h.value=!1};function ce(){M()}const me=()=>{Y.fire({title:"Are you sure?",text:"Are you sure you want to approve these Payments?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((y,g)=>{ve()})})},ve=async()=>{var y,g;try{const w=await le.post(route("claims.groupApprove",p.selectedIds.toString()));M(),Y.fire({title:"Success!",text:"The Payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(w){console.log(w),Y.fire({title:"Error!",text:((g=(y=w.response)==null?void 0:y.data)==null?void 0:g.error)||"An unexpected error occurred while approving the claim.",icon:"error",confirmButtonText:"OK"})}};return(y,g)=>(s(),a("div",null,[d.value?(s(),a("div",Xe,[u(W,{class:"mt-20 mb-20"})])):(s(),a("div",Ze,[b.value?(s(),a("div",et,[l.sortAndFilters&&l.showFiltersOutside?(s(),a("div",tt,[u(de,{sortAndFilters:l.sortAndFilters,onFiltersUpdated:k,allowSorting:l.allowSorting,filters:t.value,showFiltersOutside:l.showFiltersOutside},null,8,["sortAndFilters","allowSorting","filters","showFiltersOutside"])])):(s(),a("div",lt)),l.sortAndFilters||l.hasSearchBox?(s(),a("div",st,[l.sortAndFilters&&!l.showFiltersOutside?(s(),a("div",at,[u(de,{sortAndFilters:l.sortAndFilters,onFiltersUpdated:k,allowSorting:l.allowSorting,filters:t.value,showFiltersOutside:l.showFiltersOutside},null,8,["sortAndFilters","allowSorting","filters","showFiltersOutside"])])):(s(),a("div",ot)),l.hasSearchBox?(s(),a("div",nt,[u(T,{id:"searchText",type:"text",modelValue:P.value,"onUpdate:modelValue":g[0]||(g[0]=w=>P.value=w),placeholder:"Search",class:"border rounded-l-lg bg-gray-50",onKeydown:L(M,["enter"])},null,8,["modelValue"]),o("button",{class:"bg-gray-50 hover:bg-gray-200 text-gray py-2 px-4 rounded-r-lg",onClick:M},[u(J(Z))])])):C("",!0)])):(s(),a(U,{key:3},[l.hasPaddingTop?(s(),a("div",dt)):C("",!0)],64)),l.allowSelectAll?(s(),a("div",rt,[o("div",it,[O(u(xe,{onClick:g[1]||(g[1]=w=>V(y.data)),isSelected:h.value,class:"block mr-5"},null,8,["isSelected"]),[[re,A.value.length]]),J(ge)().value?(s(),F(be,{key:0,claimId:i.value,onCreateComplete:ce,class:Q(["rounded-md",{invisible:!l.selectedIds.length}])},null,8,["claimId","class"])):(s(),F(D,{key:1,class:Q(["select-none bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",{invisible:!l.selectedIds.length}]),onClick:me},{default:q(()=>[z(" Approve "+x(l.selectedIds.length)+" Payment(s) ",1)]),_:1},8,["class"]))])])):C("",!0),o("div",ut,[fe(y.$slots,"list-view",{data:c.value,apiResponse:b.value,fullApiResponse:I.value})]),c.value.length===0?(s(),a("div",ct,[u(se)])):C("",!0),o("div",mt,[o("div",vt,[o("p",pt,"Showing "+x(b.value.from??0)+" to "+x(b.value.to??0)+" of "+x(b.value.total)+" entries",1)]),o("div",ft,[o("button",{class:"bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",onClick:e,disabled:f.value===1},"Previous Page",8,yt),o("button",{class:"bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",disabled:f.value===S.value,onClick:n},"Next Page",8,gt)])])])):(s(),a("div",bt,[u(se)]))]))]))}};export{$t as _,xe as a};

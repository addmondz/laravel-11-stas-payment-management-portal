import{a as s,k as _,C as M,s as j,o as c,g as f,c as V,u as o,w as v,e as P,t as w,b as r,f as B,h as I,j as L,x as T,n as U}from"./app-Bq7Wg0nI.js";import{_ as y}from"./InputError-CV6oh69h.js";import{_ as b,a as C}from"./TextInput-D504svKF.js";import{M as q}from"./Modal-pLEzXfcN.js";import{P as k}from"./PrimaryButton-C0yGrSjv.js";import{L as z}from"./NotFound-CTnch1Pi.js";import{S as O}from"./helpers-7IJGRKhZ.js";import{I as F}from"./BreadcrumbComponent-CdAaxYtL.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function N(m){for(var l=1;l<arguments.length;l++){var t=arguments[l]!=null?Object(arguments[l]):{},d=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),d.forEach(function(u){R(m,u,t[u])})}return m}function R(m,l,t){return l in m?Object.defineProperty(m,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):m[l]=t,m}var h=function(l,t){var d=N({},l,t.attrs);return s(F,N({},d,{icon:$}),null)};h.displayName="EditOutlined";h.inheritAttrs=!1;const A={key:0},G={key:1},H={class:"text-lg font-medium"},J={class:"grid grid-cols-1 gap-4 mt-4"},Q={key:0},W={class:"text-right mt-6"},oe={__name:"PaymentVoucherForm",props:{claimId:{type:String,required:!0},data:{type:Object,default:null},isListComponent:{type:Boolean,default:!1}},setup(m,{emit:l}){const t=m,d=l,u=_(!1),g=_(!1),p=()=>g.value=!g.value,e=M({paymentVoucherNumber:"",paymentDate:"",receipt:null,payment_mode:""});j(()=>t.data,i=>{i?(e.paymentVoucherNumber=i.payment_voucher_number,e.paymentDate=i.payment_date,e.receipt=i.payment_voucher_receipt_file,e.payment_mode=i.payment_mode):e.reset()},{immediate:!0});const x=async()=>{var i,a;u.value=!0;try{const n=new FormData;Object.entries(e.data()).forEach(([S,D])=>n.append(S,D));const E=t.data==null?route("claims.paymentCompleted",t.claimId):route("claims.paymentCompletedUpdate",t.claimId);await axios.post(E,n),O.fire("Success!","Payment details updated successfully","success"),p(),e.reset(),d("createComplete",!0)}catch(n){O.fire("Error!",(a=(i=n.response)==null?void 0:i.data)!=null&&a.errors?"Please check the form.":"An unexpected error occurred.","error")}finally{u.value=!1}};return(i,a)=>(c(),f("section",null,[t.data!=null&&t.isListComponent?(c(),V(o(h),{key:0,class:"mb-4 mr-2",onClick:p})):(c(),V(k,{key:1,class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:p},{default:v(()=>[P(w(t.data?"Edit Payment Voucher":"Payment Completed"),1)]),_:1})),s(q,{show:g.value,onClose:p},{default:v(()=>[r("form",{onSubmit:B(x,["prevent"]),class:"p-6 space-y-4"},[u.value?(c(),f("div",A,[s(z,{class:"mt-32 mb-32"})])):(c(),f("div",G,[r("h2",H,w(t.data?"Edit":"")+" Payment Voucher Details",1),r("div",J,[r("div",null,[s(b,{for:"paymentVoucherNumber",value:"Payment Voucher Number"}),s(C,{id:"paymentVoucherNumber",modelValue:o(e).paymentVoucherNumber,"onUpdate:modelValue":a[0]||(a[0]=n=>o(e).paymentVoucherNumber=n),class:"mt-1 block w-full",required:"",placeholder:"Enter Voucher Number"},null,8,["modelValue"]),s(y,{message:o(e).errors.paymentVoucherNumber,class:"mt-2"},null,8,["message"])]),r("div",null,[s(b,{for:"paymentDate",value:"Payment Date"}),s(C,{id:"paymentDate",type:"date",modelValue:o(e).paymentDate,"onUpdate:modelValue":a[1]||(a[1]=n=>o(e).paymentDate=n),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(y,{message:o(e).errors.paymentDate,class:"mt-2"},null,8,["message"])]),t.data==null?(c(),f("div",Q,[s(b,{for:"receipt",value:"Upload Receipt"}),r("input",{id:"receipt",type:"file",onChange:a[2]||(a[2]=n=>o(e).receipt=n.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),s(y,{message:o(e).errors.receipt,class:"mt-2"},null,8,["message"])])):I("",!0),r("div",null,[s(b,{for:"payment_mode",value:"Payment Mode"}),L(r("select",{id:"payment_mode","onUpdate:modelValue":a[3]||(a[3]=n=>o(e).payment_mode=n),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},a[4]||(a[4]=[r("option",{value:"",disabled:"",selected:""},"Please select Payment Mode",-1),r("option",{value:"PayNow"},"PayNow",-1),r("option",{value:"GIRO"},"GIRO",-1),r("option",{value:"IBFT"},"IBFT",-1),r("option",{value:"TT"},"TT",-1)]),512),[[T,o(e).payment_mode]]),s(y,{message:o(e).errors.payment_type,class:"mt-2"},null,8,["message"])])]),r("div",W,[r("button",{type:"button",onClick:p,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),s(k,{type:"submit",class:U(["ms-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:v(()=>a[5]||(a[5]=[P(" Submit ")])),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}};export{h as E,oe as _};

import{a as c,o as a,g as o,j as B,z as le,u as R,n as ae,k as m,l as U,m as se,b as i,w as j,e as z,F as I,q as N,t as S,p as T,c as M,B as D,h as P,A as Q,r as ie}from"./app-A0C175HP.js";import{L as oe,N as W}from"./NotFound-DEMZmjYG.js";import{M as ue}from"./Modal-DhIGwpkC.js";import{P as K}from"./PrimaryButton-yMXZhnA5.js";import{_ as X}from"./InputError-BojD3VlQ.js";import{_ as Z,a as G}from"./TextInput-CBysiCEX.js";import{_ as ce}from"./DateRangeComponent-ECC4qWrI.js";import{I as re}from"./BreadcrumbComponent-DjwF1dgz.js";import{i as me}from"./AuthenticatedLayout-3vP79k14.js";import{S as E}from"./helpers-CrnjLOwt.js";var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function ee(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?Object(arguments[r]):{},u=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),u.forEach(function(e){pe(t,e,s[e])})}return t}function pe(t,r,s){return r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}var H=function(r,s){var u=ee({},r,s.attrs);return c(re,ee({},u,{icon:ve}),null)};H.displayName="CheckOutlined";H.inheritAttrs=!1;var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function te(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?Object(arguments[r]):{},u=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),u.forEach(function(e){ye(t,e,s[e])})}return t}function ye(t,r,s){return r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}var Y=function(r,s){var u=te({},r,s.attrs);return c(re,te({},u,{icon:fe}),null)};Y.displayName="SearchOutlined";Y.inheritAttrs=!1;const ge={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(t,{emit:r}){const s=t,u=r,e=()=>{u("update-selected",!s.isSelected)};return(V,k)=>(a(),o("div",{class:ae(["square-btn border-4 flex justify-center items-center",{"selected bg-violet-400 border-violet-400":t.isSelected,"border-gray-400":!t.isSelected}]),onClick:e},[B(c(R(H),{class:"font-extrabold text-white"},null,512),[[le,t.isSelected]])],2))}},be={class:"p-6"},he={key:0},_e={key:1},we={class:"grid grid-cols-1 gap-4 mt-4"},xe=["onUpdate:modelValue","id"],Se={value:"",disabled:"",selected:""},ke=["value"],Ce={key:0},Ae={class:"flex"},Oe=["value"],Pe=["disabled"],$e={class:"mt-6 flex justify-between"},Fe={key:0,class:"text-right"},Be={__name:"SortAndFilterComponent",props:{sortAndFilters:{type:Array,default:()=>[]},allowSorting:{type:Boolean,default:!0},filters:{type:Object,default:()=>({})}},setup(t,{emit:r}){const s=m(!1),u=m(!1),e=m({}),V=m(null),k=r,y=t;U(()=>y.filters,n=>{e.value={...n}},{immediate:!0}),U(()=>e.value,n=>{n&&!n.sort_by&&(e.value.sort_by=""),n&&!n.sort_order&&(e.value.sort_order="")},{immediate:!0}),U(()=>e.value.sort_by,n=>{n!=""&&e.value.sort_order==""&&(e.value.sort_order="asc"),n==""&&e.value.sort_order!=""&&(e.value.sort_order="")},{immediate:!0});const $=()=>{k("filtersUpdated",e.value)},q=async n=>{try{const{data:d}=await axios.get(n);return d}catch(d){V.value=d}},p=()=>{s.value=!0},x=()=>{s.value=!1},_=()=>{$(),x()},C=()=>{e.value={},$(),x()},b=n=>n.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()),h=m({});return se(async()=>{e.value={...y.filters};for(const n of y.sortAndFilters)if(e.value[n.field_name]=e.value[n.field_name]||"",h.value[n.field_name]="",n.field_type==="select"&&n.api){const d=await q(n.api);n.options=d}}),(n,d)=>(a(),o("section",null,[i("div",null,[c(K,{class:"mr-2",onClick:p},{default:j(()=>d[2]||(d[2]=[z("Sort And Filters")])),_:1}),i("button",{type:"button",onClick:C,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-gray-300 rounded-md font-semibold text-xs uppercase tracking-widest mr-2"}," Reset Filters ")]),c(ue,{show:s.value,onClose:x},{default:j(()=>[i("div",be,[u.value?(a(),o("div",he,[c(oe,{class:"mt-32 mb-32"})])):(a(),o("div",_e,[d[5]||(d[5]=i("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),i("div",we,[(a(!0),o(I,null,N(t.sortAndFilters,(l,A)=>(a(),o("div",{key:A},[c(Z,{for:l.field_name,value:l.display_name??b(l.field_name)},null,8,["for","value"]),l.field_type==="select"?B((a(),o("select",{key:0,"onUpdate:modelValue":g=>e.value[l.field_name]=g,id:l.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[i("option",Se,"Select "+S(l.display_name??b(l.field_name)),1),(a(!0),o(I,null,N(l.options,(g,O)=>(a(),o("option",{key:O,value:O},S(b(g)),9,ke))),128))],8,xe)),[[T,e.value[l.field_name]]]):l.field_type==="date_range"?(a(),M(ce,{key:1,modelValue:e.value[l.field_name],"onUpdate:modelValue":g=>e.value[l.field_name]=g,label:l.display_name??"",showLabel:!1},null,8,["modelValue","onUpdate:modelValue","label"])):l.field_type==="number"?(a(),M(G,{key:2,modelValue:e.value[l.field_name],"onUpdate:modelValue":g=>e.value[l.field_name]=g,id:l.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:D(_,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(a(),M(G,{key:3,modelValue:e.value[l.field_name],"onUpdate:modelValue":g=>e.value[l.field_name]=g,id:l.field_name,type:"text",placeholder:"Search "+(l.display_name??b(l.field_name)),class:"mt-1 block w-full",required:"",onKeydown:D(_,["enter"])},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])),c(X,{message:h.value[l.field_name],class:"mt-2"},null,8,["message"])]))),128)),y.allowSorting?(a(),o("div",Ce,[c(Z,{for:"sort_by",value:"Sort By"}),i("div",Ae,[B(i("select",{"onUpdate:modelValue":d[0]||(d[0]=l=>e.value.sort_by=l),id:"sort_by",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[d[3]||(d[3]=i("option",{value:"",selected:""},"-",-1)),(a(!0),o(I,null,N(t.sortAndFilters,(l,A)=>(a(),o("option",{key:A,value:l.field_name},S(l.display_name??b(l.field_name)),9,Oe))),128))],512),[[T,e.value.sort_by]]),B(i("select",{"onUpdate:modelValue":d[1]||(d[1]=l=>e.value.sort_order=l),id:"sort_order",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!e.value.sort_by,required:""},d[4]||(d[4]=[i("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),i("option",{value:"asc"},"Ascending",-1),i("option",{value:"desc"},"Descending",-1)]),8,Pe),[[T,e.value.sort_order]])]),c(X,{message:h.value.sort_by,class:"mt-2"},null,8,["message"])])):P("",!0)])])),i("div",$e,[i("button",{type:"button",onClick:C,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-black rounded-md font-semibold text-xs uppercase tracking-widest"}," Reset Filters "),u.value?P("",!0):(a(),o("div",Fe,[i("button",{type:"button",onClick:x,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),c(K,{onClick:_,class:"ms-3"},{default:j(()=>d[6]||(d[6]=[z(" Apply Filters ")])),_:1})]))])])]),_:1},8,["show"])]))}},Ve={key:0},Ue={key:1},je={key:0},Ie={key:0,class:"flex flex-wrap justify-between items-center mt-6 mb-6 space-y-4 md:space-y-0"},qe={key:0,class:"w-full md:w-auto"},Le={key:1,class:"w-full md:w-auto block"},Ne={key:2,class:"flex justify-end w-full md:w-auto"},Te={key:0,class:"block mt-12"},Me={key:2},Ee={key:0,class:"flex items-center w-full order-last lg:order-none max-lg:mx-auto p-5 pt-0 rounded-xl overflow-hidden transition-all duration-500"},Re={key:1,class:"mb-3"},ze={class:"grid md:grid-cols gap-4 mb-5"},De={key:3},Ke={class:"flex justify-between w-full pt-6 flex-col sm:flex-row"},Ge={class:"mb-4 sm:mb-0"},He={class:"text-center"},Ye={class:"flex justify-end flex-1"},Je=["disabled"],Qe=["disabled"],We={key:1},dt={__name:"ListComponent",props:{apiUrl:{type:String,required:!0},createCompleteSignal:{type:Number,default:!1},hasPaddingTop:{type:Boolean,default:!0},hasSearchBox:{type:Boolean,default:!1},sortAndFilters:{type:Array,default:()=>null},allowSorting:{type:Boolean,default:!0},allowSelectAll:{type:Boolean,default:!1},selectedIds:{type:Array,default:()=>[]}},emits:["update:wholeSelectedIds"],setup(t,{emit:r}){const s=m(!0),u=m([]),e=m([]),V=m(null),k=m(""),y=m(null),$=m(null),q=m(9),p=m(1),x=m(0),_=m(!1),C=m([]),b=t;U(()=>b.createCompleteSignal,f=>{f&&h(p.value)});const h=async(f=1)=>{s.value=!0;try{const v=new URLSearchParams({limit:q.value,page:f});let w=e.value;w.search_value=k.value,Object.entries(w).forEach(([L,J])=>{J&&v.append(L,J)});const{data:F}=await Q.get(`${b.apiUrl}?${v.toString()}`);u.value=F.data.data,y.value=F.data,$.value=F,x.value=F.data.last_page,C.value=F.data.data.map(L=>L.id)}catch(v){V.value=v}finally{s.value=!1}};se(()=>{h(p.value)});const n=()=>{p.value>=x.value||(p.value+=1,h(p.value))},d=()=>{p.value<=1||(p.value-=1,h(p.value))},l=f=>{e.value=f,h()},A=r,g=f=>{_.value=!_.value;let v=_.value?[...new Set([...b.selectedIds,...C.value])]:[];A("update:wholeSelectedIds",v)},O=()=>{p.value=1,h(p.value),A("update:wholeSelectedIds",[]),_.value=!1},ne=()=>{E.fire({title:"Are you sure?",text:"Are you sure you want to approve these Payments?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((f,v)=>{de()})})},de=async()=>{var f,v;try{const w=await Q.post(route("claims.groupApprove",b.selectedIds.toString()));O(),E.fire({title:"Success!",text:"The Payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(w){console.log(w),E.fire({title:"Error!",text:((v=(f=w.response)==null?void 0:f.data)==null?void 0:v.error)||"An unexpected error occurred while approving the claim.",icon:"error",confirmButtonText:"OK"})}};return(f,v)=>(a(),o("div",null,[s.value?(a(),o("div",Ve,[c(oe,{class:"mt-20 mb-20"})])):(a(),o("div",Ue,[y.value?(a(),o("div",je,[t.sortAndFilters||t.hasSearchBox?(a(),o("div",Ie,[t.sortAndFilters?(a(),o("div",qe,[c(Be,{sortAndFilters:t.sortAndFilters,onFiltersUpdated:l,allowSorting:t.allowSorting,filters:e.value},null,8,["sortAndFilters","allowSorting","filters"])])):(a(),o("div",Le)),t.hasSearchBox?(a(),o("div",Ne,[c(G,{id:"searchText",type:"text",modelValue:k.value,"onUpdate:modelValue":v[0]||(v[0]=w=>k.value=w),placeholder:"Search",class:"border rounded-l-lg bg-gray-50",onKeydown:D(O,["enter"])},null,8,["modelValue"]),i("button",{class:"bg-gray-50 hover:bg-gray-200 text-gray py-2 px-4 rounded-r-lg",onClick:O},[c(R(Y))])])):P("",!0)])):(a(),o(I,{key:1},[t.hasPaddingTop?(a(),o("div",Te)):P("",!0)],64)),t.allowSelectAll?(a(),o("div",Me,[R(me)().value?(a(),o("div",Re)):(a(),o("div",Ee,[B(c(ge,{onClick:v[1]||(v[1]=w=>g(f.data)),isSelected:_.value,class:"block mr-5"},null,8,["isSelected"]),[[le,C.value.length]]),c(K,{class:ae(["select-none bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",{invisible:!t.selectedIds.length}]),onClick:ne},{default:j(()=>[z(" Approve "+S(t.selectedIds.length)+" Payment(s) ",1)]),_:1},8,["class"])]))])):P("",!0),i("div",ze,[ie(f.$slots,"list-view",{data:u.value,apiResponse:y.value,fullApiResponse:$.value})]),u.value.length===0?(a(),o("div",De,[c(W)])):P("",!0),i("div",Ke,[i("div",Ge,[i("p",He,"Showing "+S(y.value.from??0)+" to "+S(y.value.to??0)+" of "+S(y.value.total)+" entries",1)]),i("div",Ye,[i("button",{class:"bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",onClick:d,disabled:p.value===1},"Previous Page",8,Je),i("button",{class:"bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",disabled:p.value===x.value,onClick:n},"Next Page",8,Qe)])])])):(a(),o("div",We,[c(W)]))]))]))}};export{ge as _,dt as a};

import{a as r,k as w,m as ne,i as ie,g as v,u as a,w as g,F as L,q as A,o,d as ce,b as e,c as m,h as n,e as D,n as M,t as i,l as ue,P as de}from"./app-CsWJjr4_.js";import{_ as me,g as q,i as U,c as pe}from"./AuthenticatedLayout-9Pj8z_f_.js";import{L as ve,N as ye}from"./NotFound-DaIdFIro.js";import{a as xe,D as fe,_ as _e}from"./CreateClaimForm-BNoaUhuK.js";import{I as be,_ as ge}from"./BreadcrumbComponent-Tu_v_Nuw.js";import{b as Y,c as he,d as O,f as G,S as _,h as we,e as ke}from"./helpers-E-J9ZLnY.js";import{A as C,a as P,_ as W}from"./DocumentViewer-NNcZefU_.js";import{P as T}from"./PrimaryButton-4rXrH2D1.js";import{_ as J}from"./PaymentVoucherForm-CxLR-5r2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-UG9jKnx9.js";import"./TextInput-Cdff3afO.js";import"./Modal-4otxoINH.js";import"./CustomSelectComponent-3WgGT1R8.js";var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function Q(x){for(var p=1;p<arguments.length;p++){var s=arguments[p]!=null?Object(arguments[p]):{},h=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),h.forEach(function(f){Pe(x,f,s[f])})}return x}function Pe(x,p,s){return p in x?Object.defineProperty(x,p,{value:s,enumerable:!0,configurable:!0,writable:!0}):x[p]=s,x}var u=function(p,s){var h=Q({},p,s.attrs);return r(be,Q({},h,{icon:Ce}),null)};u.displayName="InfoCircleOutlined";u.inheritAttrs=!1;const je={class:"flex flex-wrap justify-between items-center gap-y-4 sm:flex-nowrap"},De={class:"flex"},Te={class:"flex items-center justify-center"},Be={key:0},Ae={key:1},Oe={key:0,class:"max-w-8xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},$e={class:"mb-5 flex items-center"},Ve={class:"flex items-center mt-3"},Se=["disabled"],Ne={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ee={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Ie={class:"flex justify-between content-center w-full"},Re={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},He={class:"mb-4"},ze={class:"flex justify-between"},Fe={class:"text-base"},Ke={class:"mb-4"},Le={class:"flex justify-between"},Me={class:"text-base"},qe={class:"mb-4"},Ue={class:"flex justify-between"},Ye={class:"text-base"},Ge={class:"mb-4"},We={class:"flex justify-between"},Je={class:"text-base capitalize"},Qe={class:"mb-4"},Xe={class:"flex justify-between"},Ze={class:"text-base"},et={class:"mb-4"},tt={class:"flex justify-between"},st={class:"text-base"},ot={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},at={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},rt={class:"flex justify-between content-center w-full"},lt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},nt={class:"mb-4"},it={class:"flex justify-between"},ct={class:"text-base"},ut={class:"mb-4"},dt={class:"flex justify-between"},mt={class:"text-base"},pt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},vt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},yt={class:"flex justify-between content-center w-full"},xt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},ft={class:"mb-4"},_t={class:"flex justify-between"},bt={class:"text-base"},gt={class:"mb-4"},ht={class:"flex justify-between"},wt={class:"text-base"},kt={class:"mb-4"},Ct={class:"flex justify-between"},Pt={class:"text-base"},jt={class:"mb-4"},Dt={class:"flex justify-between"},Tt={class:"text-base"},Bt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},At={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Ot={class:"flex justify-between content-center w-full"},$t={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Vt={class:"mb-4"},St={class:"flex justify-between"},Nt={class:"mb-4"},Et={class:"flex justify-between"},It={class:"text-base"},Rt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ht={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},zt={class:"flex justify-between content-center w-full"},Ft={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Kt={class:"mb-4"},Lt={class:"flex justify-between"},Mt={class:"text-base"},qt={class:"mb-4"},Ut={class:"flex justify-between"},Yt={class:"text-base"},Gt={class:"mb-4"},Wt={class:"flex justify-between"},Jt={key:1},Qt={class:"mb-4"},Xt={class:"flex justify-between"},Zt={class:"text-base"},es={class:"text-right flex flex-auto col-span-2 justify-end items-center"},ts={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},ss={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},os={class:"flex justify-between content-center w-full"},as={key:0,class:"p-6 border-gray-300 mb-4 w-full"},rs={class:"relative list-none"},ls=["value"],ns={class:"flex justify-between flex-col sm:flex-row"},is={class:"font-bold"},cs={class:"text-gray-500"},us={key:0,class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},ds={key:1},ms={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},ps={class:"flex justify-center"},Ts={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(x){const p=w(!0),s=w([]),h=w(null),f=w(null),k=x,X=route("claims.fetchData",k.id);w("0"),w({});const Z=[{title:"Payments",link:route("dashboard")},{title:"#"+Y(k.id)}],c=w({details:!0,amount:!0,receipt:!0,approvalHistory:!0,paymentVoucher:!0,bankDetails:!0}),y=l=>{c.value[l]=!c.value[l]},$=()=>{_.fire({title:"Are you sure?",text:"Are you sure you want to approve this Payment?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((l,t)=>{ee()})})},ee=async()=>{try{const l=await A.post(route("claims.approveClaim",k.id));j(),_.fire({title:"Success!",text:"The payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(l){_.fire({title:"Error!",text:l.response?l.response.data.error||"There was an error while approving the payment. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},j=async()=>{try{const{data:l}=await A.get(X);s.value=l.data,f.value=l}catch(l){h.value=l,f.value=null}finally{p.value=!1}};ne(()=>{j()});const V=()=>{j()},te=l=>{let t={reportName:"Claim Export",reportType:"claimExport",claim_id:s.value.id,for_pdf:!1};return l&&(t.for_pdf=!0),t},se=async l=>{p.value=!0;try{const t=te(l==="export"),b={test:route("reports.generateReportPreview","claimExport"),export:route("reports.exportPDF",t.reportType)};await we(l,t,b,"payment_report_"+Y(s.value.id))}catch(t){console.error("Error generating report:",t)}finally{p.value=!1}},oe=async()=>{try{const l=await A.post(route("claims.deletePaymentVoucherDetails",k.id),{_method:"DELETE"});j(),_.fire({title:"Success!",text:"The payment voucher has been deleted.",icon:"success",confirmButtonText:"OK"})}catch(l){_.fire({title:"Error!",text:l.response?l.response.data.error||"There was an error while deleting the payment voucher. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},ae=()=>{_.fire({title:"Are you sure?",text:"Are you sure you want to delete the Payment Voucher?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((l,t)=>{oe()})})},re=()=>{_.fire({title:"Are you sure?",text:"Are you sure you want to delete this Payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((l,t)=>{le()})})},B=ie(()=>j.status_id>=2),le=async()=>{var l,t;try{const b=await A.post(route("claims.delete",s.value.id));_.fire({title:"Success!",text:"The Payment has been successfully deleted.",icon:"success",confirmButtonText:"OK"}),f.value=null}catch(b){console.log(b),_.fire({title:"Error!",text:((t=(l=b.response)==null?void 0:l.data)==null?void 0:t.error)||"An unexpected error occurred while deleteing the payment.",icon:"error",confirmButtonText:"OK"})}};return(l,t)=>(o(),v(L,null,[r(a(ce),{title:"Payment Details"}),r(me,null,{header:g(()=>[e("div",je,[e("div",De,[r(ge,{breadcrumbs:Z})]),e("div",Te,[f.value?(o(),m(xe,{key:0,class:"text-sm inline-block",status:s.value.status,name:s.value.status_name},null,8,["status","name"])):n("",!0),s.value.status_id<2&&a(q)().value==s.value.next_approval_level?(o(),m(T,{key:1,class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:$},{default:g(()=>t[14]||(t[14]=[D("Approve Payment")])),_:1})):n("",!0),s.value.status_id==2&&a(U)().value?(o(),m(J,{key:2,claimId:k.id,onCreateComplete:V,class:"rounded-md"},null,8,["claimId"])):n("",!0)])])]),default:g(()=>{var b,S,N,E,I,R,H,z,F,K;return[p.value?(o(),v("div",Be,[r(ve,{class:"mt-32"})])):(o(),v("div",Ae,[f.value?(o(),v("div",Oe,[e("div",$e,[n("",!0),r(T,{class:"mr-5",onClick:t[1]||(t[1]=d=>se("export"))},{default:g(()=>t[16]||(t[16]=[D(" Export PDF ")])),_:1}),e("div",Ve,[a(pe)().value?(o(),m(a(fe),{key:0,onClick:re,class:M(["mb-3 mr-5 hover:text-red-500",{invisible:B.value}]),disabled:B.value},null,8,["class","disabled"])):n("",!0),e("div",{class:M({invisible:B.value}),disabled:B.value},[r(_e,{claimData:s.value},null,8,["claimData"])],10,Se)])]),e("div",Ne,[e("div",Ee,[e("div",Ie,[t[17]||(t[17]=e("h2",null,"Details",-1)),c.value.details?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=d=>y("details"))})):n("",!0),c.value.details?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[3]||(t[3]=d=>y("details"))}))])]),c.value.details?(o(),v("div",Re,[e("div",He,[e("div",ze,[t[18]||(t[18]=e("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Fe,i(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),e("div",Ke,[e("div",Le,[t[19]||(t[19]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Me,i(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),e("div",qe,[e("div",Ue,[t[20]||(t[20]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Ye,i(a(he)(s.value.payment_type)??"-"),1)]),e("div",Ge,[e("div",We,[t[21]||(t[21]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Je,i(((b=s.value.payment_category)==null?void 0:b.name)||"-"),1)]),e("div",Qe,[e("div",Xe,[t[22]||(t[22]=e("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Ze,i(s.value.purpose??"-"),1)]),e("div",et,[e("div",tt,[t[23]||(t[23]=e("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),r(a(u),{class:"text-gray-400"})]),e("p",st,i(a(O)(s.value.created_at)??"-"),1)])])):n("",!0)]),e("div",ot,[e("div",at,[e("div",rt,[t[24]||(t[24]=e("h2",null,"Amount",-1)),c.value.amount?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[4]||(t[4]=d=>y("amount"))})):n("",!0),c.value.amount?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[5]||(t[5]=d=>y("amount"))}))])]),c.value.amount?(o(),v("div",lt,[e("div",nt,[e("div",it,[t[25]||(t[25]=e("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),r(a(u),{class:"text-gray-400"})]),e("p",ct,i(s.value.currency_object.short_code)+" "+i(a(G)(s.value.amount)),1)]),e("div",ut,[e("div",dt,[t[26]||(t[26]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),r(a(u),{class:"text-gray-400"})]),e("p",mt,i(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+a(G)(s.value.gst_amount)),1)])])):n("",!0)]),e("div",pt,[e("div",vt,[e("div",yt,[t[27]||(t[27]=e("h2",null,"Bank Details",-1)),c.value.bankDetails?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=d=>y("bankDetails"))})):n("",!0),c.value.bankDetails?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=d=>y("bankDetails"))}))])]),c.value.bankDetails?(o(),v("div",xt,[e("div",ft,[e("div",_t,[t[28]||(t[28]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Name",-1)),r(a(u),{class:"text-gray-400"})]),e("p",bt,i(((S=s.value.payment_to_user)==null?void 0:S.bank_name)||"-"),1)]),e("div",gt,[e("div",ht,[t[29]||(t[29]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Number",-1)),r(a(u),{class:"text-gray-400"})]),e("p",wt,i(((N=s.value.payment_to_user)==null?void 0:N.bank_account_no)||"-"),1)]),e("div",kt,[e("div",Ct,[t[30]||(t[30]=e("p",{class:"mb-1 text-sm text-gray-500"},"Swift Code",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Pt,i(((E=s.value.payment_to_user)==null?void 0:E.swift_code)||"-"),1)]),e("div",jt,[e("div",Dt,[t[31]||(t[31]=e("p",{class:"mb-1 text-sm text-gray-500"},"Country",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Tt,i(((H=(R=(I=s.value.payment_to_user)==null?void 0:I.currency)==null?void 0:R.country)==null?void 0:H.name)||"-")+" ("+i(((K=(F=(z=s.value.payment_to_user)==null?void 0:z.currency)==null?void 0:F.country)==null?void 0:K.short_code)||"-")+")",1)])])):n("",!0)]),e("div",Bt,[e("div",At,[e("div",Ot,[t[32]||(t[32]=e("h2",null,"Receipt",-1)),c.value.receipt?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[8]||(t[8]=d=>y("receipt"))})):n("",!0),c.value.receipt?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[9]||(t[9]=d=>y("receipt"))}))])]),c.value.receipt?(o(),v("div",$t,[e("div",Vt,[e("div",St,[t[33]||(t[33]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),r(a(u),{class:"text-gray-400"})]),e("div",null,[r(W,{src:`/${s.value.receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])])]),e("div",Nt,[e("div",Et,[t[34]||(t[34]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),r(a(u),{class:"text-gray-400"})]),e("p",It,i(a(O)(s.value.receipt_date)??"-"),1)])])):n("",!0)]),e("div",Rt,[e("div",Ht,[e("div",zt,[t[35]||(t[35]=e("h2",null,"Payment Voucher",-1)),c.value.paymentVoucher?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[10]||(t[10]=d=>y("paymentVoucher"))})):n("",!0),c.value.paymentVoucher?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[11]||(t[11]=d=>y("paymentVoucher"))}))])]),c.value.paymentVoucher?(o(),v("div",Ft,[e("div",Kt,[e("div",Lt,[t[36]||(t[36]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Voucher Number",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Mt,i(s.value.payment_voucher_number??"-"),1)]),e("div",qt,[e("div",Ut,[t[37]||(t[37]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Date",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Yt,i(s.value.payment_date?a(O)(s.value.payment_date):"-"),1)]),e("div",Gt,[e("div",Wt,[t[38]||(t[38]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),r(a(u),{class:"text-gray-400"})]),e("div",null,[s.value.payment_voucher_receipt_file?(o(),m(W,{key:0,src:`/${s.value.payment_voucher_receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])):(o(),v("span",Jt,"-"))])]),e("div",Qt,[e("div",Xt,[t[39]||(t[39]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Mode",-1)),r(a(u),{class:"text-gray-400"})]),e("p",Zt,i(s.value.payment_mode??"-"),1)]),e("div",es,[s.value.status_id==3?(o(),m(T,{key:0,class:"bg-red-400 hover:bg-red-700 active:bg-red-700 focus:bg-red-700 font-bold mr-4",onClick:ae},{default:g(()=>t[40]||(t[40]=[D("Delete Payment Voucher")])),_:1})):n("",!0),s.value.status_id>=2&&a(U)().value?(o(),m(J,{key:1,claimId:k.id,data:s.value.payment_data,onCreateComplete:V},null,8,["claimId","data"])):n("",!0)])])):n("",!0)]),e("div",ts,[e("div",ss,[e("div",os,[t[41]||(t[41]=e("h2",null,"Approval History",-1)),c.value.approvalHistory?(o(),m(C,{key:0,class:"cursor-pointer",onClick:t[12]||(t[12]=d=>y("approvalHistory"))})):n("",!0),c.value.approvalHistory?n("",!0):(o(),m(P,{key:1,class:"cursor-pointer",onClick:t[13]||(t[13]=d=>y("approvalHistory"))}))])]),c.value.approvalHistory?(o(),v("div",as,[e("ul",rs,[t[43]||(t[43]=e("div",{class:"absolute top-3 left-[21px] w-[2px] bg-gray-300 h-full z-1"},null,-1)),(o(!0),v(L,null,ue(s.value.status_log,d=>(o(),v("li",{class:"relative pl-10 mb-4",key:d.id,value:d},[t[42]||(t[42]=e("div",{class:"absolute left-[12px] top-1 w-5 h-5 rounded-full",style:{"background-color":"#d4d9df"}},[e("div",{class:"absolute left-[4px] top-1 w-3 h-3 rounded-full",style:{"background-color":"#7367F0"}})],-1)),e("div",ns,[e("p",is,i(d.status),1),e("p",cs,i(a(ke)(d.created_at)),1)]),e("p",null,i(d.name),1)],8,ls))),128))])])):n("",!0)]),s.value.status_id<2&&a(q)().value==s.value.next_approval_level?(o(),v("div",us,[r(T,{class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:$},{default:g(()=>t[44]||(t[44]=[D("Approve Payment")])),_:1})])):n("",!0)])):(o(),v("div",ds,[e("div",ms,[r(ye),e("div",ps,[r(a(de),{href:l.route("dashboard")},{default:g(()=>[r(T,{class:"p-4"},{default:g(()=>t[45]||(t[45]=[D("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]))]}),_:1})],64))}};export{Ts as default};

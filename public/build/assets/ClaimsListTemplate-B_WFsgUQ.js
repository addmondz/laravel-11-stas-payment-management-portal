import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as r,o as p,g as y,b as e,k as v,C as le,s as L,m as re,c as E,w as S,e as R,u as l,f as ne,t as g,j as P,x as D,F,l as H,y as K,h as T,z as ie,n as $,A as ce,i as de,P as ue}from"./app-CXi3Zfm1.js";import{S as k,f as me,d as pe}from"./helpers-DxK95BIM.js";import{_ as fe}from"./StatusLabel-o0FQgvN5.js";import{a as ve}from"./ListComponent-BdkWXYJ-.js";import{_ as h}from"./InputError-B221jrhv.js";import{_ as w,a as A}from"./TextInput-MqtCTg0_.js";import{M as ye}from"./Modal-DXARglCz.js";import{P as Y}from"./PrimaryButton-DYgda-CD.js";import{L as ge}from"./NotFound-DPpPzCS7.js";import{C as be}from"./CustomSelectComponent-CxSqi-qH.js";import{I as W}from"./BreadcrumbComponent-Nz3KDZYl.js";import{c as xe}from"./AuthenticatedLayout-BhyBav7L.js";var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function J(a){for(var c=1;c<arguments.length;c++){var n=arguments[c]!=null?Object(arguments[c]):{},u=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(n).filter(function(m){return Object.getOwnPropertyDescriptor(n,m).enumerable}))),u.forEach(function(m){he(a,m,n[m])})}return a}function he(a,c,n){return c in a?Object.defineProperty(a,c,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[c]=n,a}var M=function(c,n){var u=J({},c,n.attrs);return r(W,J({},u,{icon:_e}),null)};M.displayName="DeleteOutlined";M.inheritAttrs=!1;var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function Q(a){for(var c=1;c<arguments.length;c++){var n=arguments[c]!=null?Object(arguments[c]):{},u=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(n).filter(function(m){return Object.getOwnPropertyDescriptor(n,m).enumerable}))),u.forEach(function(m){Ce(a,m,n[m])})}return a}function Ce(a,c,n){return c in a?Object.defineProperty(a,c,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[c]=n,a}var U=function(c,n){var u=Q({},c,n.attrs);return r(W,Q({},u,{icon:we}),null)};U.displayName="EditOutlined";U.inheritAttrs=!1;const Pe={},ke={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function Oe(a,c){return p(),y("svg",ke,c[0]||(c[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const Se=oe(Pe,[["render",Oe]]),$e={class:"space-y-6"},Te={key:0},Ve={key:1},je={class:"text-lg font-medium text-gray-900"},Be={class:"grid grid-cols-1 gap-4 mt-4"},De=["value"],Ae=["value"],Ee={class:"col-span-2"},Me={class:"flex items-center space-x-4 mt-1"},Ue={class:"flex space-x-4"},ze={class:"inline-flex items-center"},Ne={class:"inline-flex items-center"},qe={key:0},Ge={class:"col-span-2"},Ie={class:"col-span-2"},Le={key:2,class:"text-right mt-6"},Re={__name:"CreateClaimForm",props:{claimData:{type:Object,default:null}},setup(a,{emit:c}){const n=a,u=v(!1),m=v(!1),_=v(!1),V=c,O=v([]),f=v([]),d=v([]),b=v(""),C=v(null),t=le({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",gst_value:"",purpose:"",receipt_date:"",receipt:null}),z=v(0),X=v(),N=v(),q=()=>{t.gst==1?(G(),_.value=!0):_.value=!1},Z=async(o=1)=>{try{const{data:s}=await axios.get(route("variables.fetchesGst"));z.value=s}catch(s){C.value=s}},G=()=>{t.gst_value=(t.amount*z.value/100).toFixed(2)},I=()=>{u.value=!0},j=()=>{u.value=!1},ee=async()=>{m.value=!0;try{const o=new FormData;t.receipt!=null&&o.append("receipt",t.receipt);for(const[x,B]of Object.entries(t.data()))x!="receipt"&&o.append(x,B);const s=n.claimData?route("claims.update",n.claimData.id):route("claims.store"),i=await axios.post(s,o,{headers:{"Content-Type":"multipart/form-data"}});k.fire({title:"Success!",text:i.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"},willClose:()=>{location.reload()}}),j(),t.reset(),V("createComplete",!0),m.value=!1}catch(o){o.response&&o.response.data.errors?t.errors=o.response.data.errors:k.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),m.value=!1}},te=async()=>{try{const{data:o}=await axios.get(route("currency.listShortCode"));O.value=o}catch(o){C.value=o}},se=async()=>{try{const{data:o}=await axios.get(route("paymentCategory.listChoice"));d.value=o}catch(o){C.value=o}},ae=async()=>{try{const{data:o}=await axios.get(route("paymentReceiver.listNameAndId"));f.value=o;for(let s=0;s<f.value.length;s++)if(f.value[s].id==t.payment_to){N.value=f.value[s].name;break}}catch(o){C.value=o}};return L(()=>b.value,(o,s)=>{if(t&&"payment_to"in t){t.payment_to=o.toString();const i=f.value.find(B=>B.id===parseInt(o)),x=i?i.currency_id:null;t.currency=x}},{immediate:!0}),L(()=>n.claimData,o=>{o?(ce(()=>{t.payment_to=o.payment_receiver_id}),t.payment_type=o.payment_type,t.payment_category=o.payment_category_id,t.currency=o.currency_id,t.amount=o.amount,t.gst=o.gst_amount!=0?"1":"0",t.gst_value=o.gst_amount,t.purpose=o.purpose,t.receipt_date=o.receipt_date,o.gst_amount!=0&&(_.value=!0)):t.reset()},{immediate:!0}),re(()=>{Z(),te(),se(),ae()}),(o,s)=>(p(),y("section",$e,[n.claimData==null?(p(),E(Y,{key:0,onClick:I},{default:S(()=>s[11]||(s[11]=[R("Create Payment")])),_:1})):(p(),E(l(U),{key:1,class:"mb-4 mr-2",onClick:I})),r(ye,{show:u.value,onClose:j},{default:S(()=>[e("form",{onSubmit:ne(ee,["prevent"]),class:"p-5"},[m.value?(p(),y("div",Te,[r(ge,{class:"mt-32 mb-32"})])):(p(),y("div",Ve,[e("h2",je,g(n.claimData!=null?"Edit Payment":"Create New Payment"),1),e("div",Be,[e("div",null,[r(w,{for:"payment_to",value:"Payment To"}),r(be,{choices:f.value,modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=i=>b.value=i),isEdit:n.claimData!=null,label:n.claimData!=null?N.value:"Payment To",choicesIsObject:!0,ref_key:"customSelect",ref:X},null,8,["choices","modelValue","isEdit","label"]),r(h,{message:l(t).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[r(w,{for:"payment_type",value:"Payment Type"}),P(e("select",{id:"payment_type","onUpdate:modelValue":s[1]||(s[1]=i=>l(t).payment_type=i),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},s[12]||(s[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[D,l(t).payment_type]]),r(h,{message:l(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[r(w,{for:"payment_category",value:"Payment Category"}),P(e("select",{id:"currency","onUpdate:modelValue":s[2]||(s[2]=i=>l(t).payment_category=i),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[s[13]||(s[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(p(!0),y(F,null,H(d.value,(i,x)=>(p(),y("option",{key:x,value:x,class:"capitalize"},g(i),9,De))),128))],512),[[D,l(t).payment_category]]),r(h,{message:l(t).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[r(w,{for:"currency",value:"Currency"}),P(e("select",{id:"currency","onUpdate:modelValue":s[3]||(s[3]=i=>l(t).currency=i),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[s[14]||(s[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(p(!0),y(F,null,H(O.value,(i,x)=>(p(),y("option",{key:x,value:x},g(i),9,Ae))),128))],512),[[D,l(t).currency]]),r(h,{message:l(t).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[r(w,{for:"amount",value:"Amount (incl. GST if any)"}),r(A,{id:"amount",modelValue:l(t).amount,"onUpdate:modelValue":s[4]||(s[4]=i=>l(t).amount=i),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:"",onKeyup:G},null,8,["modelValue"]),r(h,{message:l(t).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",Ee,[r(w,{value:"GST"}),e("div",Me,[e("div",Ue,[e("label",ze,[P(e("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=i=>l(t).gst=i),value:"1",class:"form-radio",onChange:q},null,544),[[K,l(t).gst]]),s[15]||(s[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",Ne,[P(e("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=i=>l(t).gst=i),value:"0",class:"form-radio",onChange:q},null,544),[[K,l(t).gst]]),s[16]||(s[16]=e("span",{class:"ml-2"},"No",-1))])]),_.value?(p(),y("div",qe,[r(A,{id:"gst_value",modelValue:l(t).gst_value,"onUpdate:modelValue":s[7]||(s[7]=i=>l(t).gst_value=i),type:"number",step:"0.01",placeholder:"Enter GST amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])):T("",!0)]),r(h,{message:l(t).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",Ge,[r(w,{for:"purpose",value:"Purpose of Payment"}),P(e("textarea",{id:"purpose","onUpdate:modelValue":s[8]||(s[8]=i=>l(t).purpose=i),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[ie,l(t).purpose]]),r(h,{message:l(t).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[r(w,{for:"receipt_date",value:"Date of Receipt / Invoice"}),r(A,{id:"receipt_date",modelValue:l(t).receipt_date,"onUpdate:modelValue":s[9]||(s[9]=i=>l(t).receipt_date=i),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(h,{message:l(t).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",Ie,[r(w,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:s[10]||(s[10]=i=>l(t).receipt=i.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer"},null,32),r(h,{message:l(t).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),m.value?T("",!0):(p(),y("div",Le,[e("button",{type:"button",onClick:j,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),r(Y,{type:"submit",class:$(["ms-3",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:S(()=>s[17]||(s[17]=[R(" Submit Payment ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},Fe={class:"flex"},He={key:0,class:"flex justify-center items-center"},Ke={class:"flex-1"},Ye={class:"grid lg:grid-cols-8 grid-cols-2 gap-x-4 gap-y-4 relative isolate"},Je={class:"col"},Qe={class:""},We={class:"col"},Xe={class:""},Ze={class:"col"},et={class:"capitalize"},tt={class:"col"},st={class:"whitespace-nowrap overflow-hidden text-ellipsis"},at={class:"col"},ot={class:"relative group"},lt={class:"truncate cursor-pointer"},rt={class:"absolute invisible group-hover:visible left-0 -top-2 transform -translate-y-full w-max max-w-xs px-4 py-3 bg-gray-900/95 backdrop-blur-sm text-white text-sm font-medium rounded-lg shadow-xl transform-gpu scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-200 ease-out before:content-[''] before:absolute before:left-4 before:top-full before:border-8 before:border-x-transparent before:border-b-transparent before:border-t-gray-900/95 z-[9999]"},nt={class:"break-words"},it={class:"col"},ct={class:"truncate"},dt={class:"col"},ut={class:"col"},mt={class:""},pt={class:"flex justify-center items-center space-x-4"},ft=["disabled"],vt={class:"cursor-pointer hover:text-violet-600 transition-all"},Tt={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1},isSelected:{type:Boolean,required:!1,default:!1}},emits:["update-selected-list"],setup(a,{emit:c}){const n=c,u=a,m=f=>{n("update-selected-list",{isSelected:f,id:u.data.id})},_=de(()=>u.data.status_id>=2),V=()=>{k.fire({title:"Are you sure?",text:"Are you sure you want to delete this Payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((f,d)=>{O()})})},O=async()=>{var f,d;try{const b=await axios.post(route("claims.delete",u.data.id));n("createComplete",!0),k.fire({title:"Success!",text:"The Payment has been successfully deleted.",icon:"success",confirmButtonText:"OK"})}catch(b){console.log(b),k.fire({title:"Error!",text:((d=(f=b.response)==null?void 0:f.data)==null?void 0:d.error)||"An unexpected error occurred while deleteing the payment.",icon:"error",confirmButtonText:"OK"})}};return v(!1),(f,d)=>{var b,C;return p(),y("div",{class:$(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-visible bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":a.isSelected}])},[e("div",Fe,[a.showGroupActions?(p(),y("div",He,[r(ve,{onUpdateSelected:m,isSelected:a.isSelected,class:"block mr-5"},null,8,["isSelected"])])):T("",!0),e("div",Ke,[e("div",Ye,[e("div",Je,[d[0]||(d[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",Qe,g(a.data.id),1)]),e("div",We,[d[1]||(d[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment To",-1)),e("div",Xe,g((b=a.data.payment_receiver)==null?void 0:b.name),1)]),e("div",Ze,[d[2]||(d[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",et,g(a.data.payment_category_name),1)]),e("div",tt,[d[3]||(d[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",st,g(a.data.currency)+" "+g(l(me)(a.data.amount)),1)]),e("div",at,[d[4]||(d[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Purpose",-1)),e("div",ot,[e("div",lt,g(a.data.purpose),1),e("div",rt,[e("div",nt,g(a.data.purpose),1)])])]),e("div",it,[d[5]||(d[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",ct,g((C=a.data.created_user)==null?void 0:C.name),1)]),e("div",dt,[d[6]||(d[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),r(fe,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:a.data.status,name:a.data.status_name},null,8,["status","name"])]),e("div",ut,[d[7]||(d[7]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",mt,g(l(pe)(a.data.created_at)),1)])])]),e("div",pt,[l(xe)().value?(p(),E(l(M),{key:0,onClick:V,class:$(["mb-3 mr-2",{invisible:_.value}]),disabled:_.value},null,8,["class","disabled"])):T("",!0),e("div",{class:$({invisible:_.value}),disabled:_.value},[r(Re,{claimData:a.data},null,8,["claimData"])],10,ft),e("button",vt,[r(l(ue),{href:f.route("claim.details",a.data.id)},{default:S(()=>[r(Se,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}};export{Tt as _,Re as a};

import{_ as z,a as B,i as O}from"./AuthenticatedLayout-VYnieIgV.js";import{k as d,m as C,E as G,o as p,g as f,a as n,w as g,e as M,b as e,j as H,p as q,F as J,s as R,c as N,u as b,G as K,d as Q,P as W}from"./app-3VYeepW6.js";import{L as D,N as X}from"./NotFound-BT3T9vdQ.js";import{_ as Y}from"./BreadcrumbComponent-CoVl7lU8.js";import{P as U}from"./PrimaryButton-BxbnStsG.js";import{$ as w}from"./jquery-CB2gVgc8.js";import{_ as S}from"./DateRangeComponent-CXUZj8p_.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as j,h as F}from"./helpers-BAt8d_3z.js";import{_ as $}from"./TextInput-CWO73tas.js";import{C as k}from"./CustomSelectComponent-BrJdyDbe.js";const ee={class:"absolute z-10 mt-2 bg-white rounded-md shadow-lg",style:{"min-width":"120px"}},te={class:"py-1"},ae={__name:"ExportButtons",emits:["action"],setup(P,{emit:a}){const r=d(!1),s=d(null),u=m=>{s.value&&!s.value.contains(m.target)&&(r.value=!1)},c=m=>{r.value=!1,y("action",m)},y=a;return C(()=>{document.addEventListener("click",u)}),G(()=>{document.removeEventListener("click",u)}),(m,o)=>(p(),f(J,null,[n(U,{class:"mr-5",onClick:o[0]||(o[0]=v=>m.$emit("action","test"))},{default:g(()=>o[4]||(o[4]=[M(" Preview ")])),_:1}),e("div",{class:"relative inline-block",ref_key:"dropdownRef",ref:s},[n(U,{class:"inline-flex items-center bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:o[1]||(o[1]=v=>r.value=!r.value)},{default:g(()=>o[5]||(o[5]=[M(" Export "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),_:1}),H(e("div",ee,[e("div",te,[e("button",{class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:o[2]||(o[2]=v=>c("export"))}," PDF "),e("button",{class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:o[3]||(o[3]=v=>c("exportExcel"))}," Excel ")])],512),[[q,r.value]])],512)],64))}},L=Z(ae,[["__scopeId","data-v-588c867d"]]),se={key:0},le={class:"flex mb-5"},oe={__name:"SummaryReportComponent",setup(P){const a=d(["",""]),r=d(""),s=d(!1),u=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?r.value="Please select a date range.":r.value=""};R(a,()=>{u()});const c=()=>({reportName:"Summary Report Preview",reportType:"summaryReport",startDate:a.value[0],endDate:a.value[1]}),y=async m=>{if(u(),r.value)return;s.value=!0;const o=c();if(m=="exportExcel"){const v=a.value[0],_=a.value[1],x=route("reports.newSummaryReport",{dateFrom:v,dateTo:_});await j(x,o)}else{const v={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(o)))}`,test:route("reports.generateReportPreview","summaryReport"),export:route("reports.exportPDF",o.reportType)};await F(m,o,v,"summary_report")}s.value=!1};return(m,o)=>(p(),f("div",null,[o[1]||(o[1]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Summary Report")],-1)),s.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",se,[e("div",le,[n(S,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=v=>a.value=v),label:"Date",additionalErrorMessage:r.value},null,8,["modelValue","additionalErrorMessage"])]),n(L,{onAction:y})]))]))}},re={key:0},ne={class:"flex mb-5"},ie={class:"mb-5"},ce={class:"mb-5"},de={__name:"TransactionsReportComponent",setup(P){const a=d(["",""]),r=d([]),s=d([]),u=d(""),c=d(!1),y=d(""),m=d([]),o=d([]),v=d([]),_=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?u.value="Please select a date range.":u.value=""};R(a,()=>{_()});const x=()=>({reportName:"Transactions Report Preview",reportType:"transactionReport",startDate:a.value[0],endDate:a.value[1],payment_to:s.value.join(","),claim_ids_filters:r.value.join(",")}),V=async i=>{if(_(),u.value)return;c.value=!0;const t=x();if(i=="exportExcel"){const l=a.value[0],E=a.value[1],I=route("reports.transactionsReport",{dateFrom:l,dateTo:E});await j(I,t)}else{const l={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(t)))}`,test:route("reports.generateReportPreview",t.reportType),export:route("reports.exportPDF",t.reportType)};await F(i,t,l,"transactions_report")}c.value=!1},A=async()=>{c.value=!0;try{const{data:i}=await axios.get(route("paymentReceiver.listNameAndId"));m.value=i}catch(i){y.value=i}finally{c.value=!1}},T=async()=>{c.value=!0;let i=route("claims.listIds");const t=s.value=="All"?"":s.value;if(t!==""){const l=new URLSearchParams({payment_to:t});i+=`?${l.toString()}`}try{const{data:l}=await axios.get(i);o.value=l,h()}catch(l){y.value=l}finally{c.value=!1}},h=async()=>{c.value=!0;const t=(s.value.length===0?["All"]:s.value).flatMap(l=>o.value[l]||[]);v.value=t,c.value=!1,r.value=[]};return R(s,(i,t)=>{h()},{deep:!0}),C(()=>{A(),T()}),(i,t)=>(p(),f("div",null,[t[3]||(t[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),c.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",re,[e("div",ne,[n(S,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),label:"Date",additionalErrorMessage:u.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",ie,[n($,{for:"payment_to",value:"Payment To"}),n(k,{choices:m.value,modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value=l),label:"Payment To",choicesIsObject:!0,allowAllChoice:!0,allowMultiChoice:!0},null,8,["choices","modelValue"])]),e("div",ce,[n($,{for:"claim_ids_filters",value:"Payment IDs"}),n(k,{choices:v.value,allowMultiChoice:!0,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),label:"Payment IDs",allowAllChoice:!0},null,8,["choices","modelValue"])]),n(L,{onAction:V})]))]))}},ue={key:0},me={class:"flex mb-5"},ve={class:"mb-5"},pe={class:"mb-5"},fe={__name:"PaymentDetailReportComponent",setup(P){const a=d(["",""]),r=d([]),s=d([]),u=d(""),c=d(!1),y=d(""),m=d([]),o=d([]),v=d([]),_=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?u.value="Please select a date range.":u.value=""};R(a,()=>{_()});const x=()=>({reportName:"Payment Detail Report",reportType:"paymentDetailReport",startDate:a.value[0],endDate:a.value[1],payment_to:s.value.join(","),claim_ids_filters:r.value.join(",")}),V=async i=>{if(_(),u.value)return;c.value=!0;const t=x();if(i=="exportExcel"){const l=a.value[0],E=a.value[1],I=route("reports.paymentDetailReport",{dateFrom:l,dateTo:E});await j(I,t)}else{const l={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(t)))}`,test:route("reports.generateReportPreview",t.reportType),export:route("reports.exportPDF",t.reportType)};await F(i,t,l,"payment_detail")}c.value=!1},A=async()=>{c.value=!0;try{const{data:i}=await axios.get(route("paymentReceiver.listNameAndId"));m.value=i}catch(i){y.value=i}finally{c.value=!1}},T=async()=>{c.value=!0;let i=route("claims.listIds");const t=s.value=="All"?"":s.value;if(t!==""){const l=new URLSearchParams({payment_to:t});i+=`?${l.toString()}`}try{const{data:l}=await axios.get(i);o.value=l,h()}catch(l){y.value=l}finally{c.value=!1}},h=async()=>{c.value=!0;const t=(s.value.length===0?["All"]:s.value).flatMap(l=>o.value[l]||[]);v.value=t,c.value=!1};return R(s,(i,t)=>{h(),r.value=[]},{deep:!0}),C(()=>{A(),T()}),(i,t)=>(p(),f("div",null,[t[3]||(t[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),c.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",ue,[e("div",me,[n(S,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),label:"Date",additionalErrorMessage:u.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",ve,[n($,{for:"payment_to",value:"Payment To"}),n(k,{choices:m.value,modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value=l),label:"Payment To",choicesIsObject:!0,allowAllChoice:!0},null,8,["choices","modelValue"])]),e("div",pe,[n($,{for:"claim_ids_filters",value:"Payment ID"}),n(k,{choices:v.value,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),label:"Payment ID",allowAllChoice:!0},null,8,["choices","modelValue"])]),n(L,{onAction:V})]))]))}},ye={class:"flex justify-between content-center"},_e={key:0},be={key:0},ge={key:1},xe={class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},he={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},we={class:"w-full md:w-3/4 bg-white"},Re={class:"space-y-4"},Pe={class:"tab-display","tab-name":"summaryReport"},$e={class:"flex items-center"},ke={class:"flex-1 p-4"},Ce={class:"space-y-4"},De={class:"tab-display","tab-name":"transactionsReport"},Ve={class:"flex items-center"},Ae={class:"flex-1 p-4"},Te={class:"space-y-4"},Ee={class:"tab-display","tab-name":"paymentDetailReport"},Ie={class:"flex items-center"},Me={class:"flex-1 p-4"},Ue={key:1},Ne={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Se={class:"flex justify-center"},Qe={__name:"Reports",setup(P){const a=d(!1);return C(()=>{const r=w(".tab-btn"),s=w(".tab-display"),u="active bg-violet-500 text-white";s.hide(),r.first().addClass(u),s.first().show(),w("body").on("click",".tab-btn",function(){s.hide(),r.removeClass(u),w(this).addClass(u),s.filter(`[tab-name="${w(this).attr("tab-name")}"]`).show()})}),(r,s)=>(p(),f(J,null,[n(b(Q),{title:"Reports"}),n(z,null,K({default:g(()=>[b(B)().value||b(O)().value?(p(),f("div",_e,[a.value?(p(),f("div",be,[n(D,{class:"mt-32"})])):(p(),f("div",ge,[e("div",xe,[e("div",he,[s[0]||(s[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",we,[e("div",Re,[e("div",Pe,[e("div",$e,[e("div",ke,[n(oe)])])])]),e("div",Ce,[e("div",De,[e("div",Ve,[e("div",Ae,[n(de)])])])]),e("div",Te,[e("div",Ee,[e("div",Ie,[e("div",Me,[n(fe)])])])])])])])]))])):(p(),f("div",Ue,[e("div",Ne,[n(X),e("div",Se,[n(b(W),{href:r.route("dashboard")},{default:g(()=>[n(U,{class:"p-4"},{default:g(()=>s[1]||(s[1]=[M("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[b(B)().value||b(O)().value?{name:"header",fn:g(()=>[e("div",ye,[n(Y,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{Qe as default};

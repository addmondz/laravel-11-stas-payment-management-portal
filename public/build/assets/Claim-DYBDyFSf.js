import{o as i,g as c,b as e,k as d,i as Z,t as g,u as l,a,w as T,P as ee,l as H,m as M,F as U,p as L,c as J,h as R,n as A,q as Q,C as te,e as z,f as se,j as V,s as D,x as E,y as ae,d as le,z as I}from"./app-SEWvw0Uz.js";import{_ as oe,g as ne}from"./AuthenticatedLayout-VSX5YaBO.js";import{_ as re}from"./BreadcrumbComponent-D09pV7z3.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as ie,a as O,b as de,L as B,N,S as G}from"./sweetalert2.esm.all-CKHE_-mc.js";import{_ as ce}from"./StatusLabel-44j9v1Hb.js";import{_ as ue}from"./FilterDropdown-Hz6LimGW.js";import{a as F,_ as P,b as S}from"./TextInput-h7bnaiwj.js";import{_ as me}from"./Modal-VsCZarg6.js";import{P as K}from"./PrimaryButton-hO6usjpA.js";import"./ApplicationLogo-M_mRncSF.js";const ve={},pe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function ge(m,p){return i(),c("svg",pe,p[0]||(p[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const _e=W(ve,[["render",ge]]),ye={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},fe={class:"flex"},xe={class:"flex-1"},he={class:"grid lg:grid-cols-8 grid-cols-2 gap-x-4 gap-y-4"},be={class:"col"},we={class:"row"},Ce={class:"col"},$e={class:""},ke={class:"col"},Pe={class:"row"},Se={class:"col"},Ve={class:""},Te={class:"col"},Ue={class:"row"},Ae={class:"col"},je={class:"capitalize"},qe={class:"col"},Le={class:"row"},Ne={class:"col"},De={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Fe={class:"col"},Me={class:"row"},Re={class:"col"},Be={class:"whitespace-nowrap overflow-hidden text-ellipsis"},ze={class:"col"},Ee={class:"row"},Ie={class:"col"},Oe={class:""},Ge={class:"col"},Ke={class:"row"},Ye={class:"col"},He={class:"col"},Je={class:"row"},Qe={class:"col"},We={class:""},Xe={class:"flex justify-center items-center"},Ze={class:"cursor-pointer hover:text-violet-600 transition-all"},X={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0}},setup(m){const p=m;return d(!1),Z(()=>p.order.items.reduce((u,n)=>u+n.quantity,0)),(u,n)=>(i(),c("div",ye,[e("div",fe,[e("div",xe,[e("div",he,[e("div",be,[n[0]||(n[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"ID")])],-1)),e("div",we,[e("div",Ce,[e("div",$e,g(m.data.id),1)])])]),e("div",ke,[n[1]||(n[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type")])],-1)),e("div",Pe,[e("div",Se,[e("div",Ve,g(l(ie)(m.data.payment_type)),1)])])]),e("div",Te,[n[2]||(n[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category")])],-1)),e("div",Ue,[e("div",Ae,[e("div",je,g(m.data.payment_category_name),1)])])]),e("div",qe,[n[3]||(n[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount")])],-1)),e("div",Le,[e("div",Ne,[e("div",De,g(m.data.currency)+" "+g(l(O)(m.data.amount)),1)])])]),e("div",Fe,[n[4]||(n[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Tax Amount")])],-1)),e("div",Me,[e("div",Re,[e("div",Be,g(m.data.gst_amount==0?"-":m.data.currency+" "+l(O)(m.data.gst_amount)),1)])])]),e("div",ze,[n[5]||(n[5]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Purpose")])],-1)),e("div",Ee,[e("div",Ie,[e("div",Oe,g(m.data.purpose),1)])])]),e("div",Ge,[n[6]||(n[6]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Status")])],-1)),e("div",Ke,[e("div",Ye,[a(ce,{class:"text-[11px] inline-block w-[135px] rounded-xl",status:m.data.status},null,8,["status"])])])]),e("div",He,[n[7]||(n[7]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",Je,[e("div",Qe,[e("div",We,g(l(de)(m.data.created_at)),1)])])])])]),e("div",Xe,[e("button",Ze,[a(l(ee),{href:u.route("claim.details",m.data.id)},{default:T(()=>[a(_e,{class:"text-violet-700"})]),_:1},8,["href"])])])])]))}},et={key:0},tt={key:1},st={key:0},at={class:"grid md:grid-cols-4 gap-4 mb-5"},lt={class:"grid md:grid-cols gap-4 mb-5"},ot={key:0},nt={class:"flex justify-between w-full"},rt={class:"flex justify-end flex-1"},it=["disabled"],dt=["disabled"],ct={key:1},Y={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(m){const p=d(!0),u=d([]),n=d(null),w=d(null),$=d(null),h=d(""),_=d(null),t=d(9),r=d(1),f=d(0),j=route("claims.list"),q=m;H(()=>q.createCompleteSignal,b=>{b&&x(r.value)});const x=async(b=1)=>{try{const k=new URLSearchParams({limit:t.value,page:b,searchValue:h.value??"",paymentType:w.value??"",category:$.value??""}).toString(),{data:C}=await Q.get(`${j}?${k}`);u.value=C.data.data,_.value=C.data,f.value=C.data.last_page}catch(k){n.value=k}finally{p.value=!1}};M(()=>{x(r.value)});const v=()=>{r.value>=f.value||(r.value+=1,x(r.value))},s=()=>{r.value<=1||(r.value-=1,x(r.value))},o=()=>{r.value=1,x(r.value)},y=()=>{w.value=null,$.value=null,o()};return(b,k)=>p.value?(i(),c("div",et,[a(B,{class:"mt-32"})])):(i(),c("div",tt,[_.value?(i(),c("div",st,[e("div",at,[a(ue,{class:"w-full mr-5",label:"a Payment Type",modelValue:w.value,"onUpdate:modelValue":k[0]||(k[0]=C=>w.value=C),options:["reimbursement","external_payment"]},null,8,["modelValue"]),a(F,{id:"search",modelValue:h.value,"onUpdate:modelValue":k[1]||(k[1]=C=>h.value=C),placeholder:"Search",class:"text-center"},null,8,["modelValue"]),e("button",{class:"bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",onClick:y},"Reset Filters"),e("button",{class:"bg-violet-500 hover:bg-violet-700 text-white py-2 px-4 rounded ml-2",onClick:o},"Search")]),e("div",lt,[(i(!0),c(U,null,L(u.value,C=>(i(),J(X,{key:C.id,data:C},null,8,["data"]))),128))]),u.value.length===0||u.value==[]?(i(),c("div",ot,[a(N)])):R("",!0),e("div",nt,[e("div",null,[e("p",null,"Showing "+g(_.value.from??0)+" to "+g(_.value.to??0)+" of "+g(_.value.total),1)]),e("div",rt,[e("button",{class:A(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":r.value==1}]]),onClick:s,disabled:r.value==1},"Previous Page",10,it),e("button",{class:A(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":r.value==f.value}]]),disabled:r.value==f.value,onClick:v},"Next Page",10,dt)])])])):(i(),c("div",ct,[a(N)]))]))}},ut={key:0},mt={key:1},vt={key:0},pt={class:"grid md:grid-cols gap-4 mb-5"},gt={key:0},_t={class:"flex justify-between w-full"},yt={class:"flex justify-end flex-1"},ft=["disabled"],xt=["disabled"],ht={key:1},bt={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(m){const p=d(!0),u=d([]),n=d(null),w=d(null),$=d(null),h=d(""),_=d(null),t=d(9),r=d(1),f=d(0),j=route("claims.listPendingApproval"),q=m;H(()=>q.createCompleteSignal,o=>{o&&x(r.value)});const x=async(o=1)=>{try{const y=new URLSearchParams({limit:t.value,page:o,searchValue:h.value??"",paymentType:w.value??"",category:$.value??""}).toString(),{data:b}=await Q.get(`${j}?${y}`);u.value=b.data.data,_.value=b.data,f.value=b.data.last_page}catch(y){n.value=y}finally{p.value=!1}};M(()=>{x(r.value)});const v=()=>{r.value>=f.value||(r.value+=1,x(r.value))},s=()=>{r.value<=1||(r.value-=1,x(r.value))};return(o,y)=>(i(),c("div",null,[p.value?(i(),c("div",ut,[a(B,{class:"mt-32"})])):(i(),c("div",mt,[_.value?(i(),c("div",vt,[e("div",pt,[(i(!0),c(U,null,L(u.value,b=>(i(),J(X,{key:b.id,data:b},null,8,["data"]))),128))]),!u.value||u.value.length===0?(i(),c("div",gt,[a(N)])):R("",!0),e("div",_t,[e("div",null,[e("p",null,"Showing "+g(_.value.from??0)+" to "+g(_.value.to??0)+" of "+g(_.value.total)+" entries ",1)]),e("div",yt,[e("button",{class:A(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":r.value==1}]]),onClick:s,disabled:r.value==1},"Previous Page",10,ft),e("button",{class:A(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":r.value==f.value}]]),disabled:r.value==f.value,onClick:v},"Next Page",10,xt)])])])):(i(),c("div",ht,[a(N)]))]))]))}},wt={class:"space-y-6"},Ct={key:0},$t={key:1},kt={class:"grid grid-cols-1 gap-4 mt-4"},Pt=["value"],St=["value"],Vt={class:"col-span-2"},Tt={class:"flex items-center space-x-4 mt-1"},Ut={class:"inline-flex items-center"},At={class:"inline-flex items-center"},jt={class:"col-span-2"},qt={class:"col-span-2"},Lt={key:2,class:"text-right mt-6"},Nt={__name:"CreateClaimForm",setup(m,{emit:p}){const u=d(!1),n=d(!1),w=p,$=d([]),h=d([]),_=d(null),t=te({payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),r=()=>{u.value=!0},f=()=>{u.value=!1},j=async()=>{n.value=!0;try{const v=new FormData;v.append("receipt",t.receipt);for(const[o,y]of Object.entries(t.data()))v.append(o,y);const s=await axios.post(route("claims.store"),v,{headers:{"Content-Type":"multipart/form-data"}});G.fire({title:"Success!",text:s.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),f(),t.reset(),w("createComplete",!0),n.value=!1}catch(v){v.response&&v.response.data.errors?t.errors=v.response.data.errors:G.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),n.value=!1}},q=async()=>{try{const{data:v}=await axios.get(route("currency.listShortCode"));$.value=v}catch(v){_.value=v}},x=async()=>{try{const{data:v}=await axios.get(route("paymentCategory.listChoice"));h.value=v}catch(v){_.value=v}};return M(()=>{q(),x()}),(v,s)=>(i(),c("section",wt,[a(K,{onClick:r},{default:T(()=>s[9]||(s[9]=[z("Create Claim")])),_:1}),a(me,{show:u.value,onClose:f},{default:T(()=>[e("form",{onSubmit:se(j,["prevent"]),class:"p-6"},[n.value?(i(),c("div",Ct,[a(B,{class:"mt-32 mb-32"})])):(i(),c("div",$t,[s[15]||(s[15]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Claim",-1)),e("div",kt,[e("div",null,[a(P,{for:"payment_type",value:"Payment Type"}),V(e("select",{id:"payment_type","onUpdate:modelValue":s[0]||(s[0]=o=>l(t).payment_type=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},s[10]||(s[10]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[D,l(t).payment_type]]),a(S,{message:l(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[a(P,{for:"payment_category",value:"Payment Category"}),V(e("select",{id:"currency","onUpdate:modelValue":s[1]||(s[1]=o=>l(t).payment_category=o),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[s[11]||(s[11]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(i(!0),c(U,null,L(h.value,(o,y)=>(i(),c("option",{key:y,value:y,class:"capitalize"},g(o),9,Pt))),128))],512),[[D,l(t).payment_category]]),a(S,{message:l(t).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[a(P,{for:"currency",value:"Currency"}),V(e("select",{id:"currency","onUpdate:modelValue":s[2]||(s[2]=o=>l(t).currency=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[s[12]||(s[12]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(i(!0),c(U,null,L($.value,(o,y)=>(i(),c("option",{key:y,value:y},g(o),9,St))),128))],512),[[D,l(t).currency]]),a(S,{message:l(t).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[a(P,{for:"amount",value:"Amount (incl. GST if any)"}),a(F,{id:"amount",modelValue:l(t).amount,"onUpdate:modelValue":s[3]||(s[3]=o=>l(t).amount=o),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(S,{message:l(t).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",Vt,[a(P,{value:"GST"}),e("div",Tt,[e("label",Ut,[V(e("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=o=>l(t).gst=o),value:"1",class:"form-radio"},null,512),[[E,l(t).gst]]),s[13]||(s[13]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",At,[V(e("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>l(t).gst=o),value:"0",class:"form-radio"},null,512),[[E,l(t).gst]]),s[14]||(s[14]=e("span",{class:"ml-2"},"No",-1))])]),a(S,{message:l(t).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",jt,[a(P,{for:"purpose",value:"Purpose of Payment"}),V(e("textarea",{id:"purpose","onUpdate:modelValue":s[6]||(s[6]=o=>l(t).purpose=o),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[ae,l(t).purpose]]),a(S,{message:l(t).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[a(P,{for:"receipt_date",value:"Date of Receipt / Invoice"}),a(F,{id:"receipt_date",modelValue:l(t).receipt_date,"onUpdate:modelValue":s[7]||(s[7]=o=>l(t).receipt_date=o),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(S,{message:l(t).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",qt,[a(P,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:s[8]||(s[8]=o=>l(t).receipt=o.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),a(S,{message:l(t).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),n.value?R("",!0):(i(),c("div",Lt,[e("button",{type:"button",onClick:f,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),a(K,{type:"submit",class:A(["ms-3",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:T(()=>s[16]||(s[16]=[z(" Submit Claim ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},Dt={class:"flex justify-between content-center"},Ft={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3"},Mt={key:0},Rt={class:"flex mb-10"},Bt=["onClick"],zt={class:"w-full"},Et={key:1},It={__name:"Claim",setup(m){const p=d(2),u=d("pendingApproval"),n=d([{name:"pendingApproval",label:"Pending Approval"},{name:"allClaims",label:"All Claims"}]),w=h=>u.value===h?"active bg-violet-500 text-white font-bold":"hover:bg-gray-200",$=()=>{p.value=Math.floor(Math.random()*100)+132};return(h,_)=>(i(),c(U,null,[a(l(le),{title:"Claims"}),a(oe,null,{header:T(()=>[e("div",Dt,[a(re,{breadcrumbs:[{title:"Claims"}]}),a(Nt,{onCreateComplete:$})])]),default:T(()=>[e("div",Ft,[l(ne)().value?(i(),c("div",Mt,[e("div",Rt,[(i(!0),c(U,null,L(n.value,t=>(i(),c("span",{key:t.name,class:A(["tab-btn p-2 px-5 text-md text-black border-4 border-white",w(t.name)]),onClick:r=>u.value=t.name},g(t.label),11,Bt))),128))]),e("div",zt,[V(e("div",null,[a(bt,{createCompleteSignal:p.value},null,8,["createCompleteSignal"])],512),[[I,u.value==="pendingApproval"]]),V(e("div",null,[a(Y,{createCompleteSignal:p.value},null,8,["createCompleteSignal"])],512),[[I,u.value==="allClaims"]])])])):(i(),c("div",Et,[a(Y,{createCompleteSignal:p.value},null,8,["createCompleteSignal"])]))])]),_:1})],64))}},ts=W(It,[["__scopeId","data-v-a6cc3807"]]);export{ts as default};

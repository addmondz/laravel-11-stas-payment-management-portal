import{L as A,S as b,b as F}from"./sweetalert2.esm.all-JndP2gID.js";import{k as g,C as M,D as O,m as L,o as u,g as m,a as t,w as C,e as V,t as n,b as e,f as T,u as o,h as D,j as U,p as $,F as z,l as K,n as G}from"./app-mMwdo2vg.js";import{_ as v,a as w,b as f}from"./TextInput-B_UnE8Sh.js";import{_ as H}from"./Modal-DZySXRky.js";import{P}from"./PrimaryButton-BJTVW_pz.js";const I={class:"space-y-6"},J={key:0},Q={class:"text-lg font-medium text-gray-900"},W={class:"grid grid-cols-1 gap-4 mt-4"},X={key:0,class:"text-gray-500 font-bold"},Y={key:0,class:"text-gray-500 font-bold"},Z=["value"],ee={class:"text-right mt-6"},se={key:1},oe={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(c,{emit:x}){const i=c,p=g(!1),k=x,d=g([]),R=g(null),_=g(!1),s=M({name:"",email:"",password:"",password_confirmation:"",role:"",approvalRole:""});O(()=>i.userData,a=>{a?(s.name=a.name,s.email=a.email,s.role=a.role,s.approvalRole=a.approval_role_id):s.reset()},{immediate:!0});const N=()=>{p.value=!1},y=()=>{p.value=!p.value},q=()=>s.password!==s.password_confirmation?(s.errors.password_confirmation="Passwords do not match",!1):(s.errors.password_confirmation="",!0),E=async()=>{if(_.value=!0,!q()){_.value=!1,b.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const a=new FormData;for(const[S,j]of Object.entries(s.data()))a.append(S,j);const l=i.userData?route("user.update",i.userData.id):route("user.create"),h=await axios["post"](l,a);b.fire({title:"Success!",text:i.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),N(),s.reset(),k("createComplete",!0)}catch(a){console.log(a),a.response&&a.response.data.errors?s.errors=a.response.data.errors:b.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}finally{_.value=!1}},B=async()=>{try{const{data:a}=await axios.get(route("approvalRoles.list"));d.value=a}catch(a){R.value=a}};return L(()=>{B()}),(a,l)=>(u(),m("section",I,[t(P,{onClick:y},{default:C(()=>[V(n(i.userData?"Edit":"Create"),1)]),_:1}),t(H,{show:p.value,onClose:y},{default:C(()=>[e("form",{onSubmit:T(E,["prevent"]),class:"p-6 space-y-4"},[_.value?(u(),m("div",se,[t(A,{class:"mt-32 mb-32"})])):(u(),m("div",J,[e("h2",Q,n(i.userData?"Edit User":"Create a New User"),1),e("div",W,[e("div",null,[t(v,{for:"name",value:"Name"}),t(w,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":l[0]||(l[0]=r=>o(s).name=r),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(f,{message:o(s).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[t(v,{for:"email",value:"Email"}),t(w,{id:"email",type:"email",modelValue:o(s).email,"onUpdate:modelValue":l[1]||(l[1]=r=>o(s).email=r),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(f,{message:o(s).errors.email,class:"mt-2"},null,8,["message"])]),e("div",null,[t(v,{for:"password",value:"Password"}),t(w,{id:"password",type:"password",modelValue:o(s).password,"onUpdate:modelValue":l[2]||(l[2]=r=>o(s).password=r),placeholder:"Password",class:"mt-1 block w-full",required:!i.userData||o(s).password_confirmation!==""},null,8,["modelValue","required"]),t(f,{message:o(s).errors.password,class:"mt-2"},null,8,["message"]),i.userData?(u(),m("small",X,"Please leave empty if you are not chaing the password")):D("",!0)]),e("div",null,[t(v,{for:"password_confirmation",value:"Confirm Password"}),t(w,{id:"password_confirmation",type:"password",modelValue:o(s).password_confirmation,"onUpdate:modelValue":l[3]||(l[3]=r=>o(s).password_confirmation=r),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!i.userData||o(s).password!==""},null,8,["modelValue","required"]),t(f,{message:o(s).errors.password_confirmation},null,8,["message"]),i.userData?(u(),m("small",Y,"Please leave empty if you are not chaing the password")):D("",!0)]),e("div",null,[t(v,{for:"role",value:"User Role"}),U(e("select",{id:"role","onUpdate:modelValue":l[4]||(l[4]=r=>o(s).role=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},l[6]||(l[6]=[e("option",{value:"",disabled:"",selected:""},"Please select User Role",-1),e("option",{value:"user"},"User",-1),e("option",{value:"finance"},"Finance",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[$,o(s).role]]),t(f,{message:o(s).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[t(v,{for:"payment_category",value:"Approval Role"}),U(e("select",{id:"currency","onUpdate:modelValue":l[5]||(l[5]=r=>o(s).approvalRole=r),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[l[7]||(l[7]=e("option",{value:""},"None",-1)),(u(!0),m(z,null,K(d.value,(r,h)=>(u(),m("option",{key:h,value:h,class:"capitalize"},n(r),9,Z))),128))],512),[[$,o(s).approvalRole]]),t(f,{message:o(s).errors.payment_category,class:"mt-2"},null,8,["message"])])]),e("div",ee,[e("button",{type:"button",onClick:y,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),t(P,{type:"submit",class:G(["ms-3",{"opacity-25":o(s).processing}]),disabled:o(s).processing},{default:C(()=>[V(n(i.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}},te={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ae={class:"flex"},le={class:"flex-1"},re={class:"grid lg:grid-cols-5 grid-cols-2 gap-x-4 gap-y-4"},ie={class:"col"},de={class:"row"},ne={class:"col"},ce={class:"text-[14px]"},ue={class:"col"},me={class:"row"},pe={class:"col"},ve={class:"text-[14px] truncate"},fe={class:"col"},_e={class:"row"},ge={class:"col"},we={class:"text-[14px] capitalize"},xe={class:"col"},ye={class:"row"},he={class:"col"},be={class:"text-[14px]"},Ce={class:"col"},ke={class:"row"},Ve={class:"col"},De={class:"text-[14px]"},Ue={class:"flex justify-center items-center"},$e={class:"cursor-pointer hover:text-violet-600 transition-all"},Be={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(c,{emit:x}){const i=x,p=()=>{i("createComplete",!0)};return(k,d)=>(u(),m("div",te,[e("div",ae,[e("div",le,[e("div",re,[e("div",ie,[d[0]||(d[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),e("div",de,[e("div",ne,[e("div",ce,n(c.data.email),1)])])]),e("div",ue,[d[1]||(d[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),e("div",me,[e("div",pe,[e("div",ve,n(c.data.name),1)])])]),e("div",fe,[d[2]||(d[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),e("div",_e,[e("div",ge,[e("div",we,n(c.data.role),1)])])]),e("div",xe,[d[3]||(d[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),e("div",ye,[e("div",he,[e("div",be,n(c.data.privilege_name??"-"),1)])])]),e("div",Ce,[d[4]||(d[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",ke,[e("div",Ve,[e("div",De,n(o(F)(c.data.created_at)),1)])])])])]),e("div",Ue,[e("button",$e,[t(oe,{userData:c.data,onCreateComplete:p},null,8,["userData"])])])])]))}};export{oe as _,Be as a};

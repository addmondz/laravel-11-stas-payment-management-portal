import{a as m,l as i,p as A,q as H,o as a,g as r,b as o,w as P,e as E,F as U,m as O,j as B,t as k,s as j,c as L,B as q,h as C,z as Q,u as W,r as X,n as T}from"./app-n_wuB9uN.js";import{L as J,N as z}from"./LoadingComponent-DGq3WGEo.js";import{M as Y}from"./Modal-Du1JuK0j.js";import{P as I}from"./PrimaryButton-Cs1f3WV1.js";import{_ as D}from"./InputError-D2mEW6Up.js";import{_ as K,a as M}from"./TextInput-Dmoe1zhi.js";import{_ as Z}from"./DateRangeComponent-cCPVZFHn.js";import{I as ee}from"./BreadcrumbComponent-DdRP9AZZ.js";var te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function G(n){for(var u=1;u<arguments.length;u++){var d=arguments[u]!=null?Object(arguments[u]):{},p=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(d).filter(function(t){return Object.getOwnPropertyDescriptor(d,t).enumerable}))),p.forEach(function(t){le(n,t,d[t])})}return n}function le(n,u,d){return u in n?Object.defineProperty(n,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[u]=d,n}var N=function(u,d){var p=G({},u,d.attrs);return m(ee,G({},p,{icon:te}),null)};N.displayName="SearchOutlined";N.inheritAttrs=!1;const ae={class:"p-6"},se={key:0},oe={key:1},re={class:"grid grid-cols-1 gap-4 mt-4"},ne=["onUpdate:modelValue","id"],de={value:"",disabled:"",selected:""},ie=["value"],ue={key:0},ce={class:"flex"},me=["value"],ve=["disabled"],pe={class:"mt-6 flex justify-between"},fe={key:0,class:"text-right"},_e={__name:"SortAndFilterComponent",props:{sortAndFilters:{type:Array,default:()=>[]},allowSorting:{type:Boolean,default:!0},filters:{type:Object,default:()=>({})}},setup(n,{emit:u}){const d=i(!1),p=i(!1),t=i({}),S=i(null),_=u,b=n;A(()=>b.filters,s=>{t.value={...s}},{immediate:!0}),A(()=>t.value,s=>{s&&!s.sort_by&&(t.value.sort_by=""),s&&!s.sort_order&&(t.value.sort_order="")},{immediate:!0}),A(()=>t.value.sort_by,s=>{s!=""&&t.value.sort_order==""&&(t.value.sort_order="asc"),s==""&&t.value.sort_order!=""&&(t.value.sort_order="")},{immediate:!0});const F=()=>{_("filtersUpdated",t.value)},c=async s=>{try{const{data:l}=await axios.get(s);return l}catch(l){S.value=l}},w=()=>{d.value=!0},g=()=>{d.value=!1},f=()=>{F(),g()},V=()=>{t.value={},F(),g()},h=s=>s.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),x=i({});return H(async()=>{t.value={...b.filters};for(const s of b.sortAndFilters)if(t.value[s.field_name]=t.value[s.field_name]||"",x.value[s.field_name]="",s.field_type==="select"&&s.api){const l=await c(s.api);s.options=l}}),(s,l)=>(a(),r("section",null,[o("div",null,[m(I,{class:"mr-2",onClick:w},{default:P(()=>l[2]||(l[2]=[E("Sort And Filters")])),_:1}),o("button",{type:"button",onClick:V,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-gray-300 rounded-md font-semibold text-xs uppercase tracking-widest mr-2"}," Reset Filters ")]),m(Y,{show:d.value,onClose:g},{default:P(()=>[o("div",ae,[p.value?(a(),r("div",se,[m(J,{class:"mt-32 mb-32"})])):(a(),r("div",oe,[l[5]||(l[5]=o("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),o("div",re,[(a(!0),r(U,null,O(n.sortAndFilters,(e,y)=>(a(),r("div",{key:y},[m(K,{for:e.field_name,value:e.display_name??h(e.field_name)},null,8,["for","value"]),e.field_type==="select"?B((a(),r("select",{key:0,"onUpdate:modelValue":v=>t.value[e.field_name]=v,id:e.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[o("option",de,"Select "+k(e.display_name??h(e.field_name)),1),(a(!0),r(U,null,O(e.options,(v,$)=>(a(),r("option",{key:$,value:$},k(h(v)),9,ie))),128))],8,ne)),[[j,t.value[e.field_name]]]):e.field_type==="date_range"?(a(),L(Z,{key:1,modelValue:t.value[e.field_name],"onUpdate:modelValue":v=>t.value[e.field_name]=v,label:e.display_name??"",showLabel:!1},null,8,["modelValue","onUpdate:modelValue","label"])):e.field_type==="number"?(a(),L(M,{key:2,modelValue:t.value[e.field_name],"onUpdate:modelValue":v=>t.value[e.field_name]=v,id:e.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:q(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(a(),L(M,{key:3,modelValue:t.value[e.field_name],"onUpdate:modelValue":v=>t.value[e.field_name]=v,id:e.field_name,type:"text",placeholder:"Search "+(e.display_name??h(e.field_name)),class:"mt-1 block w-full",required:"",onKeydown:q(f,["enter"])},null,8,["modelValue","onUpdate:modelValue","id","placeholder"])),m(D,{message:x.value[e.field_name],class:"mt-2"},null,8,["message"])]))),128)),b.allowSorting?(a(),r("div",ue,[m(K,{for:"sort_by",value:"Sort By"}),o("div",ce,[B(o("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>t.value.sort_by=e),id:"sort_by",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[l[3]||(l[3]=o("option",{value:"",selected:""},"-",-1)),(a(!0),r(U,null,O(n.sortAndFilters,(e,y)=>(a(),r("option",{key:y,value:e.field_name},k(e.display_name??h(e.field_name)),9,me))),128))],512),[[j,t.value.sort_by]]),B(o("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>t.value.sort_order=e),id:"sort_order",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!t.value.sort_by,required:""},l[4]||(l[4]=[o("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),o("option",{value:"asc"},"Ascending",-1),o("option",{value:"desc"},"Descending",-1)]),8,ve),[[j,t.value.sort_order]])]),m(D,{message:x.value.sort_by,class:"mt-2"},null,8,["message"])])):C("",!0)])])),o("div",pe,[o("button",{type:"button",onClick:V,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border border-black rounded-md font-semibold text-xs uppercase tracking-widest"}," Reset Filters "),p.value?C("",!0):(a(),r("div",fe,[o("button",{type:"button",onClick:g,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),m(I,{onClick:f,class:"ms-3"},{default:P(()=>l[6]||(l[6]=[E(" Apply Filters ")])),_:1})]))])])]),_:1},8,["show"])]))}},ye={key:0},be={key:1},ge={key:0},he={key:0,class:"flex flex-wrap justify-between items-center mt-6 mb-6 space-y-4 md:space-y-0"},we={key:0,class:"w-full md:w-auto"},xe={key:1,class:"w-full md:w-auto block"},ke={key:2,class:"flex justify-end w-full md:w-auto"},Se={key:0,class:"block mt-12"},Ce={class:"grid md:grid-cols gap-4 mb-5"},Fe={key:2},Ve={class:"flex justify-between w-full pt-6 flex-col sm:flex-row"},$e={class:"mb-4 sm:mb-0"},Ae={class:"text-center"},Ue={class:"flex justify-end flex-1"},Pe=["disabled"],Oe=["disabled"],Be={key:1},ze={__name:"ListComponent",props:{apiUrl:{type:String,required:!0},createCompleteSignal:{type:Number,default:!1},hasPaddingTop:{type:Boolean,default:!0},hasSearchBox:{type:Boolean,default:!1},sortAndFilters:{type:Array,required:!1},allowSorting:{type:Boolean,default:!0}},setup(n){const u=i(!0),d=i([]),p=i([]),t=i(null);i(null),i(null);const S=i(""),_=i(null),b=i(null),F=i(9),c=i(1),w=i(0),g=n;A(()=>g.createCompleteSignal,l=>{l&&f(c.value)});const f=async(l=1)=>{u.value=!0;try{const e=new URLSearchParams({limit:F.value,page:l});let y=p.value;y.search_value=S.value,Object.entries(y).forEach(([$,R])=>{R&&e.append($,R)});const{data:v}=await Q.get(`${g.apiUrl}?${e.toString()}`);d.value=v.data.data,_.value=v.data,b.value=v,w.value=v.data.last_page}catch(e){t.value=e}finally{u.value=!1}};H(()=>{f(c.value)});const V=()=>{c.value>=w.value||(c.value+=1,f(c.value))},h=()=>{c.value<=1||(c.value-=1,f(c.value))},x=()=>{c.value=1,f(c.value)},s=l=>{p.value=l,f()};return(l,e)=>(a(),r("div",null,[u.value?(a(),r("div",ye,[m(J,{class:"mt-20 mb-20"})])):(a(),r("div",be,[_.value?(a(),r("div",ge,[n.sortAndFilters||n.hasSearchBox?(a(),r("div",he,[n.sortAndFilters?(a(),r("div",we,[m(_e,{sortAndFilters:n.sortAndFilters,onFiltersUpdated:s,allowSorting:n.allowSorting,filters:p.value},null,8,["sortAndFilters","allowSorting","filters"])])):(a(),r("div",xe)),n.hasSearchBox?(a(),r("div",ke,[m(M,{id:"searchText",type:"text",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=y=>S.value=y),placeholder:"Search",class:"border rounded-l-lg bg-gray-50",onKeydown:q(x,["enter"])},null,8,["modelValue"]),o("button",{class:"bg-gray-50 hover:bg-gray-200 text-gray py-2 px-4 rounded-r-lg",onClick:x},[m(W(N))])])):C("",!0)])):(a(),r(U,{key:1},[n.hasPaddingTop?(a(),r("div",Se)):C("",!0)],64)),o("div",Ce,[X(l.$slots,"list-view",{data:d.value,apiResponse:_.value,fullApiResponse:b.value})]),d.value.length===0||d.value==[]?(a(),r("div",Fe,[m(z)])):C("",!0),o("div",Ve,[o("div",$e,[o("p",Ae,"Showing "+k(_.value.from??0)+" to "+k(_.value.to??0)+" of "+k(_.value.total)+" entries",1)]),o("div",Ue,[o("button",{class:T(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":c.value==1}]]),onClick:h,disabled:c.value==1},"Previous Page",10,Pe),o("button",{class:T(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":c.value==w.value}]]),disabled:c.value==w.value,onClick:V},"Next Page",10,Oe)])])])):(a(),r("div",Be,[m(z)]))]))]))}};export{ze as _};

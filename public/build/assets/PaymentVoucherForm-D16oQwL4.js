import{k as y,C as D,o as u,g as c,a as s,w as d,e as b,b as o,f as P,u as r,n as S}from"./app-CnqBuGYj.js";import{_ as p}from"./InputError-B9sv3Ep1.js";import{_ as f,a as g}from"./TextInput-HP_9QdKv.js";import{M}from"./Modal-C8Y5im8H.js";import{P as v}from"./PrimaryButton-yAnmGp7w.js";import{L as q}from"./NotFound-Bj_nHcSj.js";import{S as h}from"./helpers-Cuuican3.js";const B={key:0},E={key:1},U={class:"grid grid-cols-1 gap-4 mt-4"},j={class:"text-right mt-6"},R={__name:"PaymentVoucherForm",props:{claimId:{type:String,required:!0}},setup(V,{emit:w}){const _=V,k=w,m=y(!1),n=y(!1),l=()=>n.value=!n.value,t=D({paymentVoucherNumber:"",paymentDate:"",receipt:null}),x=async()=>{var i,e;m.value=!0;try{const a=new FormData;Object.entries(t.data()).forEach(([C,N])=>a.append(C,N)),await axios.post(route("claims.paymentCompleted",_.claimId),a),h.fire("Success!","Payment details updated successfully","success"),l(),t.reset(),k("createComplete",!0)}catch(a){h.fire("Error!",(e=(i=a.response)==null?void 0:i.data)!=null&&e.errors?"Please check the form.":"An unexpected error occurred.","error")}finally{m.value=!1}};return(i,e)=>(u(),c("section",null,[s(v,{class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:l},{default:d(()=>e[3]||(e[3]=[b(" Payment Completed ")])),_:1}),s(M,{show:n.value,onClose:l},{default:d(()=>[o("form",{onSubmit:P(x,["prevent"]),class:"p-6 space-y-4"},[m.value?(u(),c("div",B,[s(q,{class:"mt-32 mb-32"})])):(u(),c("div",E,[e[5]||(e[5]=o("h2",{class:"text-lg font-medium"},"Payment Voucher Details",-1)),o("div",U,[o("div",null,[s(f,{for:"paymentVoucherNumber",value:"Payment Voucher Number"}),s(g,{id:"paymentVoucherNumber",modelValue:r(t).paymentVoucherNumber,"onUpdate:modelValue":e[0]||(e[0]=a=>r(t).paymentVoucherNumber=a),class:"mt-1 block w-full",required:"",placeholder:"Enter Voucher Number"},null,8,["modelValue"]),s(p,{message:r(t).errors.paymentVoucherNumber,class:"mt-2"},null,8,["message"])]),o("div",null,[s(f,{for:"paymentDate",value:"Payment Date"}),s(g,{id:"paymentDate",type:"date",modelValue:r(t).paymentDate,"onUpdate:modelValue":e[1]||(e[1]=a=>r(t).paymentDate=a),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(p,{message:r(t).errors.paymentDate,class:"mt-2"},null,8,["message"])]),o("div",null,[s(f,{for:"receipt",value:"Upload Receipt"}),o("input",{id:"receipt",type:"file",onChange:e[2]||(e[2]=a=>r(t).receipt=a.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),s(p,{message:r(t).errors.receipt,class:"mt-2"},null,8,["message"])])]),o("div",j,[o("button",{type:"button",onClick:l,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),s(v,{type:"submit",class:S(["ms-3",{"opacity-25":r(t).processing}]),disabled:r(t).processing},{default:d(()=>e[4]||(e[4]=[b(" Submit ")])),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}};export{R as _};

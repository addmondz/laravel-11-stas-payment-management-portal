import{a as l,o as i,g as p,b as e,j as S,k as I,u as a,n as F,h as q,t as f,w as O,P as ee,l as _,F as T,m as j,c as M,e as V,C as te,p as se,q as le,f as ae,s as D,x as E,y as oe,d as ne}from"./app-CyzUREqe.js";import{i as J,_ as re,g as ie}from"./AuthenticatedLayout-qvthidJk.js";import{I as de,_ as ce}from"./BreadcrumbComponent-Ck6h_iL2.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as ue,a as H,b as me,S as B,c as pe}from"./sweetalert2.esm.all-MrQZAUHb.js";import{_ as ve}from"./StatusLabel-PqNV-mjt.js";import{_ as Q}from"./ListComponent-Rdqvcyd9.js";import{P as L}from"./PrimaryButton-Bh_Gq0ag.js";import{_ as P}from"./InputError-CoDVuwZl.js";import{_ as $,a as G}from"./TextInput-EXe8TGQ1.js";import{M as ye}from"./Modal-DyhYSQds.js";import{L as fe}from"./LoadingComponent-BHVwK22k.js";import{C as ge}from"./CustomSelectComponent-CngGNS_g.js";import"./ApplicationLogo-M_mRncSF.js";import"./DateRangeComponent-BL30gGvh.js";var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function z(o){for(var u=1;u<arguments.length;u++){var d=arguments[u]!=null?Object(arguments[u]):{},n=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(d).filter(function(y){return Object.getOwnPropertyDescriptor(d,y).enumerable}))),n.forEach(function(y){be(o,y,d[y])})}return o}function be(o,u,d){return u in o?Object.defineProperty(o,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[u]=d,o}var R=function(u,d){var n=z({},u,d.attrs);return l(de,z({},n,{icon:_e}),null)};R.displayName="CheckOutlined";R.inheritAttrs=!1;const xe={},Ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function he(o,u){return i(),p("svg",Ce,u[0]||(u[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const we=Y(xe,[["render",he]]),W={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(o,{emit:u}){const d=o,n=u,y=()=>{n("update-selected",!d.isSelected)};return(v,r)=>(i(),p("div",{class:F(["square-btn border-4 flex justify-center items-center",{"selected bg-violet-400 border-violet-400":o.isSelected,"border-gray-400":!o.isSelected}]),onClick:y},[S(l(a(R),{class:"font-extrabold text-white"},null,512),[[I,o.isSelected]])],2))}},Se={class:"flex"},ke={key:0,class:"flex justify-center items-center"},Ae={class:"flex-1"},Pe={class:"grid lg:grid-cols-7 grid-cols-2 gap-x-4 gap-y-4"},$e={class:"col"},Oe={class:""},Te={class:"col"},Ue={class:""},je={class:"col"},Be={class:"capitalize"},Ve={class:"col"},Fe={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Ie={class:"col"},qe={class:"truncate"},Ne={class:"col"},De={class:"col"},Me={class:""},Le={class:"flex justify-center items-center"},Re={class:"cursor-pointer hover:text-violet-600 transition-all"},X={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1},isSelected:{type:Boolean,required:!1,default:!1}},emits:["update-selected-list"],setup(o,{emit:u}){const d=u,n=o,y=v=>{d("update-selected-list",{isSelected:v,id:n.data.id})};return(v,r)=>{var h;return i(),p("div",{class:F(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":o.isSelected}])},[e("div",Se,[o.showGroupActions?(i(),p("div",ke,[l(W,{onUpdateSelected:y,isSelected:o.isSelected,class:"block mr-5"},null,8,["isSelected"])])):q("",!0),e("div",Ae,[e("div",Pe,[e("div",$e,[r[0]||(r[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",Oe,f(o.data.id),1)]),e("div",Te,[r[1]||(r[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type",-1)),e("div",Ue,f(a(ue)(o.data.payment_type)),1)]),e("div",je,[r[2]||(r[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",Be,f(o.data.payment_category_name),1)]),e("div",Ve,[r[3]||(r[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",Fe,f(o.data.currency)+" "+f(a(H)(o.data.amount)),1)]),e("div",Ie,[r[4]||(r[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",qe,f((h=o.data.created_user)==null?void 0:h.name),1)]),e("div",Ne,[r[5]||(r[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),l(ve,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:o.data.status},null,8,["status"])]),e("div",De,[r[6]||(r[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",Me,f(a(me)(o.data.created_at)),1)])])]),e("div",Le,[e("button",Re,[l(a(ee),{href:v.route("claim.details",o.data.id)},{default:O(()=>[l(we,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},Ee={key:0,class:"bg-white p-5 rounded-xl"},Ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6"},ze={class:"mb-2"},Ke={class:"flex justify-between"},Je={class:"font-bold"},K={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(o,{emit:u}){const d=_([]),n=({isSelected:y,id:v})=>{d.value=y?[...new Set([...d.value,v])]:d.value.filter(r=>r!==v)};return(y,v)=>(i(),p("div",null,[l(Q,{apiUrl:y.route("claims.list"),createCompleteSignal:o.createCompleteSignal,sortAndFilters:o.sortAndFilters,allowSorting:!0},{"list-view":O(({data:r,apiResponse:h,fullApiResponse:C})=>[Object.keys(C.sum).length?(i(),p("div",Ee,[v[1]||(v[1]=e("h2",{class:"mb-4"},"Total Amount",-1)),e("div",Ge,[(i(!0),p(T,null,j(C.sum,(g,s)=>(i(),p("div",{key:s,class:"bg-gray-100 p-6 rounded-xl shadow-md transition-all duration-500 border"},[e("p",ze,f(g.country_name)+" ("+f(s)+")",1),e("div",Ke,[v[0]||(v[0]=e("span",null,"Amount:",-1)),e("span",null,[e("span",Je,f(g.currency)+" "+f(a(H)(g.amount)),1)])])]))),128))])])):q("",!0),(i(!0),p(T,null,j(r,g=>(i(),M(X,{createComplete:o.createCompleteSignal,onUpdateSelectedList:n,key:g.id,data:g},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])]))}},Ye={key:0,class:"flex items-center w-full order-last lg:order-none max-lg:mx-auto p-5 rounded-xl overflow-hidden transition-all duration-500"},He={key:1,class:"mb-3"},Qe={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},emits:["pendingClaimsCount"],setup(o,{emit:u}){const d=u,n=_([]),y=_(1),v=_(!1),r=_([]),h=b=>{d("pendingClaimsCount",b)},C=({isSelected:b,id:x})=>{b?n.value=[...new Set([...n.value,x])]:n.value=n.value.filter(t=>t!==x);const w=[...n.value].sort(),m=[...r.value].sort();v.value=JSON.stringify(w)===JSON.stringify(m)},g=b=>{v.value=!v.value,v.value?n.value=[...new Set([...n.value,...r.value])]:n.value=[]},s=b=>{r.value=b.map(x=>x.id)},k=()=>{B.fire({title:"Are you sure?",text:"Are you sure you want to approve these Claims?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((b,x)=>{N()})})},U=()=>{y.value++,n.value=[],v.value=!1},N=async()=>{var b,x;try{const w=await axios.post(route("claims.groupApprove",n.value.toString()));U(),B.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(w){B.fire({title:"Error!",text:((x=(b=w.response)==null?void 0:b.data)==null?void 0:x.error)||"An unexpected error occurred while approving the claim.",icon:"error",confirmButtonText:"OK"})}};return(b,x)=>(i(),p("div",null,[a(J)().value?(i(),p("div",He)):(i(),p("div",Ye,[S(l(W,{onClick:x[0]||(x[0]=w=>g(b.data)),isSelected:v.value,class:"block mr-5"},null,8,["isSelected"]),[[I,r.value.length]]),l(L,{class:F(["select-none bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold animate-bounce",{invisible:!n.value.length}]),onClick:k},{default:O(()=>[V(" Approve "+f(n.value.length)+" Payment(s) ",1)]),_:1},8,["class"])])),(i(),M(Q,{apiUrl:b.route("claims.listPendingApproval"),createCompleteSignal:o.createCompleteSignal,key:y.value,allowSorting:!0,sortAndFilters:o.sortAndFilters,hasPaddingTop:!1},{"list-view":O(({data:w,apiResponse:m})=>[V(f(h(m.total))+" "+f(s(w))+" ",1),(i(!0),p(T,null,j(w,t=>(i(),M(X,{key:t.id,showGroupActions:!0,createComplete:o.createCompleteSignal,data:t,isSelected:n.value.includes(t.id),onUpdateSelectedList:C},null,8,["createComplete","data","isSelected"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"]))]))}},We={class:"space-y-6"},Xe={key:0},Ze={key:1},et={class:"grid grid-cols-1 gap-4 mt-4"},tt=["value"],st=["value"],lt={class:"col-span-2"},at={class:"flex items-center space-x-4 mt-1"},ot={class:"inline-flex items-center"},nt={class:"inline-flex items-center"},rt={class:"col-span-2"},it={class:"col-span-2"},dt={key:2,class:"text-right mt-6"},ct={__name:"CreateClaimForm",setup(o,{emit:u}){const d=_(!1),n=_(!1),y=u,v=_([]),r=_([]),h=_([]),C=_(""),g=_(null),s=te({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),k=()=>{d.value=!0},U=()=>{d.value=!1},N=async()=>{n.value=!0;try{const m=new FormData;m.append("receipt",s.receipt);for(const[c,A]of Object.entries(s.data()))m.append(c,A);const t=await axios.post(route("claims.store"),m,{headers:{"Content-Type":"multipart/form-data"}});B.fire({title:"Success!",text:t.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),U(),s.reset(),y("createComplete",!0),n.value=!1}catch(m){m.response&&m.response.data.errors?s.errors=m.response.data.errors:B.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),n.value=!1}},b=async()=>{try{const{data:m}=await axios.get(route("currency.listShortCode"));v.value=m}catch(m){g.value=m}},x=async()=>{try{const{data:m}=await axios.get(route("paymentCategory.listChoice"));h.value=m}catch(m){g.value=m}},w=async()=>{try{const{data:m}=await axios.get(route("paymentReceiver.listNameAndId"));r.value=m}catch(m){g.value=m}};return se(()=>C.value,(m,t)=>{if(s&&"payment_to"in s){s.payment_to=m.toString();const c=r.value.find(Z=>Z.id===parseInt(m)),A=c?c.currency_id:null;s.currency=A}},{immediate:!0}),le(()=>{b(),x(),w()}),(m,t)=>(i(),p("section",We,[l(L,{onClick:k},{default:O(()=>t[10]||(t[10]=[V("Create Payment")])),_:1}),l(ye,{show:d.value,onClose:U},{default:O(()=>[e("form",{onSubmit:ae(N,["prevent"]),class:"p-5"},[n.value?(i(),p("div",Xe,[l(fe,{class:"mt-32 mb-32"})])):(i(),p("div",Ze,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Payment",-1)),e("div",et,[e("div",null,[l($,{for:"payment_to",value:"Payment To"}),l(ge,{choices:r.value,modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=c=>C.value=c),label:"Payment Receiver",choicesIsObject:!0},null,8,["choices","modelValue"]),l(P,{message:a(s).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[l($,{for:"payment_type",value:"Payment Type"}),S(e("select",{id:"payment_type","onUpdate:modelValue":t[1]||(t[1]=c=>a(s).payment_type=c),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},t[11]||(t[11]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[D,a(s).payment_type]]),l(P,{message:a(s).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[l($,{for:"payment_category",value:"Payment Category"}),S(e("select",{id:"currency","onUpdate:modelValue":t[2]||(t[2]=c=>a(s).payment_category=c),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[t[12]||(t[12]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(i(!0),p(T,null,j(h.value,(c,A)=>(i(),p("option",{key:A,value:A,class:"capitalize"},f(c),9,tt))),128))],512),[[D,a(s).payment_category]]),l(P,{message:a(s).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[l($,{for:"currency",value:"Currency"}),S(e("select",{id:"currency","onUpdate:modelValue":t[3]||(t[3]=c=>a(s).currency=c),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[t[13]||(t[13]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(i(!0),p(T,null,j(v.value,(c,A)=>(i(),p("option",{key:A,value:A},f(c),9,st))),128))],512),[[D,a(s).currency]]),l(P,{message:a(s).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[l($,{for:"amount",value:"Amount (incl. GST if any)"}),l(G,{id:"amount",modelValue:a(s).amount,"onUpdate:modelValue":t[4]||(t[4]=c=>a(s).amount=c),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(P,{message:a(s).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",lt,[l($,{value:"GST"}),e("div",at,[e("label",ot,[S(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=c=>a(s).gst=c),value:"1",class:"form-radio"},null,512),[[E,a(s).gst]]),t[14]||(t[14]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",nt,[S(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=c=>a(s).gst=c),value:"0",class:"form-radio"},null,512),[[E,a(s).gst]]),t[15]||(t[15]=e("span",{class:"ml-2"},"No",-1))])]),l(P,{message:a(s).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",rt,[l($,{for:"purpose",value:"Purpose of Payment"}),S(e("textarea",{id:"purpose","onUpdate:modelValue":t[7]||(t[7]=c=>a(s).purpose=c),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[oe,a(s).purpose]]),l(P,{message:a(s).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[l($,{for:"receipt_date",value:"Date of Receipt / Invoice"}),l(G,{id:"receipt_date",modelValue:a(s).receipt_date,"onUpdate:modelValue":t[8]||(t[8]=c=>a(s).receipt_date=c),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(P,{message:a(s).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",it,[l($,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:t[9]||(t[9]=c=>a(s).receipt=c.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),l(P,{message:a(s).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),n.value?q("",!0):(i(),p("div",dt,[e("button",{type:"button",onClick:U,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),l(L,{type:"submit",class:F(["ms-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:O(()=>t[17]||(t[17]=[V(" Submit Payment ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},ut={class:"flex justify-between content-center"},mt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},pt={key:0},vt={class:"w-full inline-flex"},yt=["onClick"],ft={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},gt={class:"w-full bg-black-50 p-1 rounded-xl"},_t={key:1},bt={__name:"Claim",setup(o){const u=_(2),d=_(0),n=_("allClaims"),y=_([{name:"allClaims",label:"All Payments"},{name:"pendingApproval",label:"Pending Approval"}]),v=g=>n.value===g?"active bg-violet-400 text-white font-bold":"hover:bg-gray-200 text-black bg-white",r=()=>{u.value=Math.floor(Math.random()*100)+1},h=g=>{d.value=g},C=_([{display_name:"Payment ID",field_name:"id",field_type:"string"},{field_name:"payment_type",field_type:"select",options:{reimbursement:"Reimbursement",external_payment:"External Payment"}},{display_name:"Payment Category",field_name:"payment_category_id",field_type:"select",api:route("paymentCategory.listChoice")},{display_name:"Currency",field_name:"currency_id",field_type:"select",api:route("currency.listShortCode")},{display_name:"Created Date",field_name:"created_at",field_type:"date_range"},{field_name:"status",field_type:"select",api:route("approvalStatus.list")}]);return(g,s)=>(i(),p(T,null,[l(a(ne),{title:"Payments"}),l(re,null,{header:O(()=>[e("div",ut,[l(ce,{breadcrumbs:[{title:"Payments"}]}),l(ct,{onCreateComplete:r})])]),default:O(()=>[e("div",mt,[a(ie)().value||a(J)().value?(i(),p("div",pt,[e("div",vt,[(i(!0),p(T,null,j(y.value,k=>(i(),p("span",{key:k.name,class:F([["tab-btn p-2 px-5 text-md flex justify-center items-center",v(k.name)],"flex-1 pt-5 pb-5 border border-violet-500"]),onClick:U=>n.value=k.name},[V(f(k.label)+" ",1),k.name=="pendingApproval"&&d.value!=0&&d.value!=null?(i(),p("span",ft,f(a(pe)(d.value)),1)):q("",!0)],10,yt))),128))]),e("div",gt,[S(e("div",null,[l(Qe,{createCompleteSignal:u.value,onPendingClaimsCount:h},null,8,["createCompleteSignal"])],512),[[I,n.value==="pendingApproval"]]),S(e("div",null,[l(K,{createCompleteSignal:u.value,sortAndFilters:C.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[I,n.value==="allClaims"]])])])):(i(),p("div",_t,[l(K,{createCompleteSignal:u.value,sortAndFilters:C.value},null,8,["createCompleteSignal","sortAndFilters"])]))])]),_:1})],64))}},Ft=Y(bt,[["__scopeId","data-v-bb3c62fb"]]);export{Ft as default};

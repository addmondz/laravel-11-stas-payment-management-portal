import{a as l,k as b,m as te,g as p,u as o,w as g,F as z,q as M,o as a,d as se,b as e,c as m,h as r,e as j,t as i,l as ae,P as oe}from"./app-D1ejxDuq.js";import{_ as le,g as L,i as q}from"./AuthenticatedLayout-CIFV8MK0.js";import{L as re,N as ie}from"./NotFound-B4DZTV5N.js";import{_ as ne}from"./StatusLabel-DqIPM_M7.js";import{I as ue,_ as ce}from"./BreadcrumbComponent-Cpqzt-XB.js";import{b as U,c as de,d as $,f as G,S as B,h as pe,e as me}from"./helpers-BTGhDNsH.js";import{A as h,a as w,_ as K}from"./DocumentViewer-Bb5xOZHW.js";import{P}from"./PrimaryButton-CpBMaALl.js";import{_ as W}from"./PaymentVoucherForm-PZsmQvpr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-84s13LJh.js";import"./InputError-D-z9cZES.js";import"./TextInput-C2ZNW0L0.js";var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function Y(x){for(var v=1;v<arguments.length;v++){var s=arguments[v]!=null?Object(arguments[v]):{},f=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(s).filter(function(_){return Object.getOwnPropertyDescriptor(s,_).enumerable}))),f.forEach(function(_){ye(x,_,s[_])})}return x}function ye(x,v,s){return v in x?Object.defineProperty(x,v,{value:s,enumerable:!0,configurable:!0,writable:!0}):x[v]=s,x}var u=function(v,s){var f=Y({},v,s.attrs);return l(ue,Y({},f,{icon:ve}),null)};u.displayName="InfoCircleOutlined";u.inheritAttrs=!1;const xe={class:"flex flex-wrap justify-between items-center gap-y-4 sm:flex-nowrap"},_e={class:"flex"},fe={class:"flex items-center justify-center"},be={key:0},ge={key:1},he={key:0,class:"max-w-8xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},we={class:"mb-5"},ke={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ce={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},je={class:"flex justify-between content-center w-full"},Pe={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},De={class:"mb-4"},$e={class:"flex justify-between"},Be={class:"text-base"},Ae={class:"mb-4"},Te={class:"flex justify-between"},Oe={class:"text-base"},Se={class:"mb-4"},Ne={class:"flex justify-between"},Ve={class:"text-base"},Ie={class:"mb-4"},Re={class:"flex justify-between"},Ee={class:"text-base capitalize"},He={class:"mb-4"},Fe={class:"flex justify-between"},ze={class:"text-base"},Me={class:"mb-4"},Le={class:"flex justify-between"},qe={class:"text-base"},Ue={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ge={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Ke={class:"flex justify-between content-center w-full"},We={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Ye={class:"mb-4"},Je={class:"flex justify-between"},Qe={class:"text-base"},Xe={class:"mb-4"},Ze={class:"flex justify-between"},et={class:"text-base"},tt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},st={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},at={class:"flex justify-between content-center w-full"},ot={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},lt={class:"mb-4"},rt={class:"flex justify-between"},it={class:"text-base"},nt={class:"mb-4"},ut={class:"flex justify-between"},ct={class:"text-base"},dt={class:"mb-4"},pt={class:"flex justify-between"},mt={class:"text-base"},vt={class:"mb-4"},yt={class:"flex justify-between"},xt={class:"text-base"},_t={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},ft={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},bt={class:"flex justify-between content-center w-full"},gt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},ht={class:"mb-4"},wt={class:"flex justify-between"},kt={class:"mb-4"},Ct={class:"flex justify-between"},jt={class:"text-base"},Pt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Dt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},$t={class:"flex justify-between content-center w-full"},Bt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},At={class:"mb-4"},Tt={class:"flex justify-between"},Ot={class:"text-base"},St={class:"mb-4"},Nt={class:"flex justify-between"},Vt={class:"text-base"},It={class:"mb-4"},Rt={class:"flex justify-between"},Et={key:1},Ht={class:"mb-4"},Ft={class:"flex justify-between"},zt={class:"text-base"},Mt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Lt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},qt={class:"flex justify-between content-center w-full"},Ut={key:0,class:"p-6 border-gray-300 mb-4 w-full"},Gt={class:"relative list-none"},Kt=["value"],Wt={class:"flex justify-between flex-col sm:flex-row"},Yt={class:"font-bold"},Jt={class:"text-gray-500"},Qt={key:0,class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Xt={key:1,class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Zt={key:1},es={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},ts={class:"flex justify-center"},ys={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(x){const v=b(!0),s=b([]),f=b(null),_=b(null),k=x,J=route("claims.fetchData",k.id);b("0"),b({});const Q=[{title:"Payments",link:route("dashboard")},{title:"#"+U(k.id)}],n=b({details:!0,amount:!0,receipt:!0,approvalHistory:!0,paymentVoucher:!0,bankDetails:!0}),y=c=>{n.value[c]=!n.value[c]},A=()=>{B.fire({title:"Are you sure?",text:"Are you sure you want to approve this Payment?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((c,t)=>{X()})})},X=async()=>{try{const c=await M.post(route("claims.approveClaim",k.id));D(),B.fire({title:"Success!",text:"The payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(c){B.fire({title:"Error!",text:c.response?c.response.data.error||"There was an error while approving the payment. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},D=async()=>{try{const{data:c}=await M.get(J);s.value=c.data,_.value=c}catch(c){f.value=c}finally{v.value=!1}};te(()=>{D()});const T=()=>{D()},Z=c=>{let t={reportName:"Claim Export",reportType:"claimExport",claim_id:s.value.id,for_pdf:!1};return c&&(t.for_pdf=!0),t},ee=async c=>{v.value=!0;try{const t=Z(c==="export"),C={test:route("reports.generateReportPreview","claimExport"),export:route("reports.exportPDF",t.reportType)};await pe(c,t,C,"payment_report_"+U(s.value.id))}catch(t){console.error("Error generating report:",t)}finally{v.value=!1}};return(c,t)=>(a(),p(z,null,[l(o(se),{title:"Payment Details"}),l(le,null,{header:g(()=>[e("div",xe,[e("div",_e,[l(ce,{breadcrumbs:Q})]),e("div",fe,[_.value?(a(),m(ne,{key:0,class:"text-sm inline-block",status:s.value.status,name:s.value.status_name},null,8,["status","name"])):r("",!0),s.value.status_id<2&&o(L)().value==s.value.next_approval_level?(a(),m(P,{key:1,class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:A},{default:g(()=>t[14]||(t[14]=[j("Approve Payment")])),_:1})):r("",!0),s.value.status_id==2&&o(q)().value?(a(),m(W,{key:2,claimId:k.id,onCreateComplete:T,class:"rounded-md"},null,8,["claimId"])):r("",!0)])])]),default:g(()=>{var C,O,S,N,V,I,R,E,H,F;return[v.value?(a(),p("div",be,[l(re,{class:"mt-32"})])):(a(),p("div",ge,[_.value?(a(),p("div",he,[e("div",we,[r("",!0),l(P,{class:"mr-5",onClick:t[1]||(t[1]=d=>ee("export"))},{default:g(()=>t[16]||(t[16]=[j(" Export PDF ")])),_:1})]),e("div",ke,[e("div",Ce,[e("div",je,[t[17]||(t[17]=e("h2",null,"Details",-1)),n.value.details?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=d=>y("details"))})):r("",!0),n.value.details?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[3]||(t[3]=d=>y("details"))}))])]),n.value.details?(a(),p("div",Pe,[e("div",De,[e("div",$e,[t[18]||(t[18]=e("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Be,i(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),e("div",Ae,[e("div",Te,[t[19]||(t[19]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Oe,i(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),e("div",Se,[e("div",Ne,[t[20]||(t[20]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Ve,i(o(de)(s.value.payment_type)??"-"),1)]),e("div",Ie,[e("div",Re,[t[21]||(t[21]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Ee,i(((C=s.value.payment_category)==null?void 0:C.name)||"-"),1)]),e("div",He,[e("div",Fe,[t[22]||(t[22]=e("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),l(o(u),{class:"text-gray-400"})]),e("p",ze,i(s.value.purpose??"-"),1)]),e("div",Me,[e("div",Le,[t[23]||(t[23]=e("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),l(o(u),{class:"text-gray-400"})]),e("p",qe,i(o($)(s.value.created_at)??"-"),1)])])):r("",!0)]),e("div",Ue,[e("div",Ge,[e("div",Ke,[t[24]||(t[24]=e("h2",null,"Amount",-1)),n.value.amount?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[4]||(t[4]=d=>y("amount"))})):r("",!0),n.value.amount?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[5]||(t[5]=d=>y("amount"))}))])]),n.value.amount?(a(),p("div",We,[e("div",Ye,[e("div",Je,[t[25]||(t[25]=e("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Qe,i(s.value.currency_object.short_code)+" "+i(o(G)(s.value.amount)),1)]),e("div",Xe,[e("div",Ze,[t[26]||(t[26]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),l(o(u),{class:"text-gray-400"})]),e("p",et,i(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+o(G)(s.value.gst_amount)),1)])])):r("",!0)]),e("div",tt,[e("div",st,[e("div",at,[t[27]||(t[27]=e("h2",null,"Bank Details",-1)),n.value.bankDetails?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=d=>y("bankDetails"))})):r("",!0),n.value.bankDetails?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=d=>y("bankDetails"))}))])]),n.value.bankDetails?(a(),p("div",ot,[e("div",lt,[e("div",rt,[t[28]||(t[28]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Name",-1)),l(o(u),{class:"text-gray-400"})]),e("p",it,i(((O=s.value.payment_to_user)==null?void 0:O.bank_name)||"-"),1)]),e("div",nt,[e("div",ut,[t[29]||(t[29]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Number",-1)),l(o(u),{class:"text-gray-400"})]),e("p",ct,i(((S=s.value.payment_to_user)==null?void 0:S.bank_account_no)||"-"),1)]),e("div",dt,[e("div",pt,[t[30]||(t[30]=e("p",{class:"mb-1 text-sm text-gray-500"},"Swift Code",-1)),l(o(u),{class:"text-gray-400"})]),e("p",mt,i(((N=s.value.payment_to_user)==null?void 0:N.swift_code)||"-"),1)]),e("div",vt,[e("div",yt,[t[31]||(t[31]=e("p",{class:"mb-1 text-sm text-gray-500"},"Country",-1)),l(o(u),{class:"text-gray-400"})]),e("p",xt,i(((R=(I=(V=s.value.payment_to_user)==null?void 0:V.currency)==null?void 0:I.country)==null?void 0:R.name)||"-")+" ("+i(((F=(H=(E=s.value.payment_to_user)==null?void 0:E.currency)==null?void 0:H.country)==null?void 0:F.short_code)||"-")+")",1)])])):r("",!0)]),e("div",_t,[e("div",ft,[e("div",bt,[t[32]||(t[32]=e("h2",null,"Receipt",-1)),n.value.receipt?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[8]||(t[8]=d=>y("receipt"))})):r("",!0),n.value.receipt?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[9]||(t[9]=d=>y("receipt"))}))])]),n.value.receipt?(a(),p("div",gt,[e("div",ht,[e("div",wt,[t[33]||(t[33]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),l(o(u),{class:"text-gray-400"})]),e("div",null,[l(K,{src:`/${s.value.receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])])]),e("div",kt,[e("div",Ct,[t[34]||(t[34]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),l(o(u),{class:"text-gray-400"})]),e("p",jt,i(o($)(s.value.receipt_date)??"-"),1)])])):r("",!0)]),e("div",Pt,[e("div",Dt,[e("div",$t,[t[35]||(t[35]=e("h2",null,"Payment Voucher",-1)),n.value.paymentVoucher?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[10]||(t[10]=d=>y("paymentVoucher"))})):r("",!0),n.value.paymentVoucher?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[11]||(t[11]=d=>y("paymentVoucher"))}))])]),n.value.paymentVoucher?(a(),p("div",Bt,[e("div",At,[e("div",Tt,[t[36]||(t[36]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Voucher Number",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Ot,i(s.value.payment_voucher_number??"-"),1)]),e("div",St,[e("div",Nt,[t[37]||(t[37]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Date",-1)),l(o(u),{class:"text-gray-400"})]),e("p",Vt,i(s.value.payment_date?o($)(s.value.payment_date):"-"),1)]),e("div",It,[e("div",Rt,[t[38]||(t[38]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),l(o(u),{class:"text-gray-400"})]),e("div",null,[s.value.payment_voucher_receipt_file?(a(),m(K,{key:0,src:`/${s.value.payment_voucher_receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])):(a(),p("span",Et,"-"))])]),e("div",Ht,[e("div",Ft,[t[39]||(t[39]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Mode",-1)),l(o(u),{class:"text-gray-400"})]),e("p",zt,i(s.value.payment_mode??"-"),1)])])):r("",!0)]),e("div",Mt,[e("div",Lt,[e("div",qt,[t[40]||(t[40]=e("h2",null,"Approval History",-1)),n.value.approvalHistory?(a(),m(h,{key:0,class:"cursor-pointer",onClick:t[12]||(t[12]=d=>y("approvalHistory"))})):r("",!0),n.value.approvalHistory?r("",!0):(a(),m(w,{key:1,class:"cursor-pointer",onClick:t[13]||(t[13]=d=>y("approvalHistory"))}))])]),n.value.approvalHistory?(a(),p("div",Ut,[e("ul",Gt,[t[42]||(t[42]=e("div",{class:"absolute top-3 left-[21px] w-[2px] bg-gray-300 h-full z-1"},null,-1)),(a(!0),p(z,null,ae(s.value.status_log,d=>(a(),p("li",{class:"relative pl-10 mb-4",key:d.id,value:d},[t[41]||(t[41]=e("div",{class:"absolute left-[12px] top-1 w-5 h-5 rounded-full",style:{"background-color":"#d4d9df"}},[e("div",{class:"absolute left-[4px] top-1 w-3 h-3 rounded-full",style:{"background-color":"#7367F0"}})],-1)),e("div",Wt,[e("p",Yt,i(d.status),1),e("p",Jt,i(o(me)(d.created_at)),1)]),e("p",null,i(d.name),1)],8,Kt))),128))])])):r("",!0)]),s.value.status_id<2&&o(L)().value==s.value.next_approval_level?(a(),p("div",Qt,[l(P,{class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:A},{default:g(()=>t[43]||(t[43]=[j("Approve Payment")])),_:1})])):r("",!0),s.value.status_id>=2&&o(q)().value?(a(),p("div",Xt,[l(W,{claimId:k.id,data:s.value.payment_data,onCreateComplete:T},null,8,["claimId","data"])])):r("",!0)])):(a(),p("div",Zt,[e("div",es,[l(ie),e("div",ts,[l(o(oe),{href:c.route("dashboard")},{default:g(()=>[l(P,{class:"p-4"},{default:g(()=>t[44]||(t[44]=[j("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]))]}),_:1})],64))}};export{ys as default};

import{k as f,C as N,o as p,g as c,a as o,w as y,e as b,b as t,f as D,u as s,j as M,x as S,n as T}from"./app-6WbYh1fy.js";import{_ as m}from"./InputError-CEh4Vx6k.js";import{_ as n,a as g}from"./TextInput-DvVCeI-n.js";import{M as B}from"./Modal-xs6U5Muz.js";import{P as v}from"./PrimaryButton-XFy857jq.js";import{L as I}from"./NotFound-BKZYcC6G.js";import{S as w}from"./helpers-DBc4uWfa.js";const q={key:0},U={key:1},j={class:"grid grid-cols-1 gap-4 mt-4"},E={class:"text-right mt-6"},A={__name:"PaymentVoucherForm",props:{claimId:{type:String,required:!0}},setup(V,{emit:h}){const _=V,P=h,i=f(!1),u=f(!1),l=()=>u.value=!u.value,a=N({paymentVoucherNumber:"",paymentDate:"",receipt:null,payment_mode:""}),k=async()=>{var d,e;i.value=!0;try{const r=new FormData;Object.entries(a.data()).forEach(([x,C])=>r.append(x,C)),await axios.post(route("claims.paymentCompleted",_.claimId),r),w.fire("Success!","Payment details updated successfully","success"),l(),a.reset(),P("createComplete",!0)}catch(r){w.fire("Error!",(e=(d=r.response)==null?void 0:d.data)!=null&&e.errors?"Please check the form.":"An unexpected error occurred.","error")}finally{i.value=!1}};return(d,e)=>(p(),c("section",null,[o(v,{class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:l},{default:y(()=>e[4]||(e[4]=[b(" Payment Completed ")])),_:1}),o(B,{show:u.value,onClose:l},{default:y(()=>[t("form",{onSubmit:D(k,["prevent"]),class:"p-6 space-y-4"},[i.value?(p(),c("div",q,[o(I,{class:"mt-32 mb-32"})])):(p(),c("div",U,[e[7]||(e[7]=t("h2",{class:"text-lg font-medium"},"Payment Voucher Details",-1)),t("div",j,[t("div",null,[o(n,{for:"paymentVoucherNumber",value:"Payment Voucher Number"}),o(g,{id:"paymentVoucherNumber",modelValue:s(a).paymentVoucherNumber,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).paymentVoucherNumber=r),class:"mt-1 block w-full",required:"",placeholder:"Enter Voucher Number"},null,8,["modelValue"]),o(m,{message:s(a).errors.paymentVoucherNumber,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"paymentDate",value:"Payment Date"}),o(g,{id:"paymentDate",type:"date",modelValue:s(a).paymentDate,"onUpdate:modelValue":e[1]||(e[1]=r=>s(a).paymentDate=r),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(m,{message:s(a).errors.paymentDate,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"receipt",value:"Upload Receipt"}),t("input",{id:"receipt",type:"file",onChange:e[2]||(e[2]=r=>s(a).receipt=r.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),o(m,{message:s(a).errors.receipt,class:"mt-2"},null,8,["message"])]),t("div",null,[o(n,{for:"payment_mode",value:"Payment Mode"}),M(t("select",{id:"payment_mode","onUpdate:modelValue":e[3]||(e[3]=r=>s(a).payment_mode=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},e[5]||(e[5]=[t("option",{value:"",disabled:"",selected:""},"Please select Payment Mode",-1),t("option",{value:"PayNow"},"PayNow",-1),t("option",{value:"GIRO"},"GIRO",-1),t("option",{value:"IBFT"},"IBFT",-1),t("option",{value:"TT"},"TT",-1)]),512),[[S,s(a).payment_mode]]),o(m,{message:s(a).errors.payment_type,class:"mt-2"},null,8,["message"])])]),t("div",E,[t("button",{type:"button",onClick:l,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),o(v,{type:"submit",class:T(["ms-3",{"opacity-25":s(a).processing}]),disabled:s(a).processing},{default:y(()=>e[6]||(e[6]=[b(" Submit ")])),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}};export{A as _};

import{L as S,S as b,b as j}from"./sweetalert2.esm.all-BBtUs681.js";import{k as x,C as O,l as F,m as L,o as m,g as u,a,w as C,e as k,t as n,b as s,f as T,u as t,h as D,j as V,x as A,F as z,p as K,s as I,n as Y}from"./app-D3wxWcDe.js";import{_ as v,a as g,b as f}from"./TextInput-aNO9Ssik.js";import{_ as G}from"./Modal-BSUPLnB0.js";import{P}from"./PrimaryButton-DD1i1uYw.js";const H={class:"space-y-6"},J={key:0},Q={class:"text-lg font-medium text-gray-900"},W={class:"grid grid-cols-1 gap-4 mt-4"},X={key:0,class:"text-gray-500 font-bold"},Z={key:0,class:"text-gray-500 font-bold"},ss={class:"col-span-2"},es={class:"flex items-center space-x-4 mt-1 mb-5"},ts={class:"inline-flex items-center"},os={class:"inline-flex items-center"},as=["value"],ls={class:"text-right mt-6"},rs={key:1},is={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(c,{emit:w}){const i=c,p=x(!1),$=w,d=x([]),U=x(null),_=x(!1),e=O({name:"",email:"",password:"",password_confirmation:"",isAdmin:"0",approvalRole:""});F(()=>i.userData,l=>{l?(e.name=l.name,e.email=l.email,e.isAdmin=l.role==="admin"?"1":"0",e.approvalRole=l.approval_role_id):e.reset()},{immediate:!0});const N=()=>{p.value=!1},y=()=>{p.value=!p.value},R=()=>e.password!==e.password_confirmation?(e.errors.password_confirmation="Passwords do not match",!1):(e.errors.password_confirmation="",!0),E=async()=>{if(_.value=!0,!R()){_.value=!1,b.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const l=new FormData;for(const[B,M]of Object.entries(e.data()))l.append(B,M);const o=i.userData?route("user.update",i.userData.id):route("user.create"),h=await axios["post"](o,l);b.fire({title:"Success!",text:i.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),N(),e.reset(),$("createComplete",!0)}catch(l){console.log(l),l.response&&l.response.data.errors?e.errors=l.response.data.errors:b.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}finally{_.value=!1}},q=async()=>{try{const{data:l}=await axios.get(route("approvalRoles.list"));d.value=l}catch(l){U.value=l}};return L(()=>{q()}),(l,o)=>(m(),u("section",H,[a(P,{onClick:y},{default:C(()=>[k(n(i.userData?"Edit":"Create"),1)]),_:1}),a(G,{show:p.value,onClose:y},{default:C(()=>[s("form",{onSubmit:T(E,["prevent"]),class:"p-6 space-y-4"},[_.value?(m(),u("div",rs,[a(S,{class:"mt-32 mb-32"})])):(m(),u("div",J,[s("h2",Q,n(i.userData?"Edit User":"Create a New User"),1),s("div",W,[s("div",null,[a(v,{for:"name",value:"Name"}),a(g,{id:"name",modelValue:t(e).name,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).name=r),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(f,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",null,[a(v,{for:"email",value:"Email"}),a(g,{id:"email",type:"email",modelValue:t(e).email,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).email=r),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(f,{message:t(e).errors.email,class:"mt-2"},null,8,["message"])]),s("div",null,[a(v,{for:"password",value:"Password"}),a(g,{id:"password",type:"password",modelValue:t(e).password,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).password=r),placeholder:"Password",class:"mt-1 block w-full",required:!i.userData||t(e).password_confirmation!==""},null,8,["modelValue","required"]),a(f,{message:t(e).errors.password,class:"mt-2"},null,8,["message"]),i.userData?(m(),u("small",X,"Please leave empty if you are not chaing the password")):D("",!0)]),s("div",null,[a(v,{for:"password_confirmation",value:"Confirm Password"}),a(g,{id:"password_confirmation",type:"password",modelValue:t(e).password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).password_confirmation=r),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!i.userData||t(e).password!==""},null,8,["modelValue","required"]),a(f,{message:t(e).errors.password_confirmation},null,8,["message"]),i.userData?(m(),u("small",Z,"Please leave empty if you are not chaing the password")):D("",!0)]),s("div",null,[s("div",ss,[a(v,{value:"Is Admin"}),s("div",es,[s("label",ts,[V(s("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=r=>t(e).isAdmin=r),value:"1",class:"form-radio"},null,512),[[A,t(e).isAdmin]]),o[7]||(o[7]=s("span",{class:"ml-2"},"Yes",-1))]),s("label",os,[V(s("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=r=>t(e).isAdmin=r),value:"0",class:"form-radio"},null,512),[[A,t(e).isAdmin]]),o[8]||(o[8]=s("span",{class:"ml-2"},"No",-1))])]),a(f,{message:t(e).errors.isAdmin,class:"mt-2"},null,8,["message"])])])]),s("div",null,[a(v,{for:"payment_category",value:"Approval Role"}),V(s("select",{id:"currency","onUpdate:modelValue":o[6]||(o[6]=r=>t(e).approvalRole=r),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[o[9]||(o[9]=s("option",{value:""},"None",-1)),(m(!0),u(z,null,K(d.value,(r,h)=>(m(),u("option",{key:h,value:h,class:"capitalize"},n(r),9,as))),128))],512),[[I,t(e).approvalRole]]),a(f,{message:t(e).errors.payment_category,class:"mt-2"},null,8,["message"])]),s("div",ls,[s("button",{type:"button",onClick:y,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),a(P,{type:"submit",class:Y(["ms-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:C(()=>[k(n(i.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}},ds={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ns={class:"flex"},cs={class:"flex-1"},ms={class:"grid lg:grid-cols-5 grid-cols-2 gap-x-4 gap-y-4"},us={class:"col"},ps={class:"row"},vs={class:"col"},fs={class:"text-[14px]"},_s={class:"col"},xs={class:"row"},gs={class:"col"},ws={class:"text-[14px] truncate"},ys={class:"col"},hs={class:"row"},bs={class:"col"},Cs={class:"text-[14px] capitalize"},Vs={class:"col"},$s={class:"row"},ks={class:"col"},Ds={class:"text-[14px]"},As={class:"col"},Ps={class:"row"},Us={class:"col"},Ns={class:"text-[14px]"},Rs={class:"flex justify-center items-center"},Es={class:"cursor-pointer hover:text-violet-600 transition-all"},Os={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(c,{emit:w}){const i=w,p=()=>{i("createComplete",!0)};return($,d)=>(m(),u("div",ds,[s("div",ns,[s("div",cs,[s("div",ms,[s("div",us,[d[0]||(d[0]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),s("div",ps,[s("div",vs,[s("div",fs,n(c.data.email),1)])])]),s("div",_s,[d[1]||(d[1]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),s("div",xs,[s("div",gs,[s("div",ws,n(c.data.name),1)])])]),s("div",ys,[d[2]||(d[2]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),s("div",hs,[s("div",bs,[s("div",Cs,n(c.data.role),1)])])]),s("div",Vs,[d[3]||(d[3]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),s("div",$s,[s("div",ks,[s("div",Ds,n(c.data.privilege_name??"-"),1)])])]),s("div",As,[d[4]||(d[4]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),s("div",Ps,[s("div",Us,[s("div",Ns,n(t(j)(c.data.created_at)),1)])])])])]),s("div",Rs,[s("button",Es,[a(is,{userData:c.data,onCreateComplete:p},null,8,["userData"])])])])]))}};export{is as _,Os as a};

import{o as r,g as d,b as e,n as T,k as C,a as l,t as f,u as a,w as S,P as H,e as U,F as $,l as P,c as M,C as J,m as Q,f as W,j as h,p as A,q,s as X,h as I,d as Z,x as B}from"./app-mMwdo2vg.js";import{_ as ee,g as te,i as se}from"./AuthenticatedLayout-mQsjxLCo.js";import{_ as ae}from"./BreadcrumbComponent-DA9siMaX.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as le,a as oe,b as ne,L as re,S as j,c as ie}from"./sweetalert2.esm.all-JndP2gID.js";import{_ as de}from"./StatusLabel-0m8VPggG.js";import{_ as E}from"./ListComponent-BcObYK2e.js";import{_ as b,b as w,a as N}from"./TextInput-B_UnE8Sh.js";import{_ as ce}from"./Modal-DZySXRky.js";import{P as D}from"./PrimaryButton-BJTVW_pz.js";import"./ApplicationLogo-M_mRncSF.js";const ue={},me={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function pe(i,v){return r(),d("svg",me,v[0]||(v[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const ve=z(ue,[["render",pe]]),ge={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(i,{emit:v}){const y=i,p=v,g=()=>{p("update-selected",!y.isSelected)};return(x,c)=>(r(),d("div",{class:T(["square-btn border-4",{"selected bg-violet-500 border-violet-700":i.isSelected,"border-gray-600":!i.isSelected}]),onClick:g},null,2))}},ye={class:"flex"},fe={class:"flex justify-center items-center"},_e={class:"flex-1"},Ce={class:"grid lg:grid-cols-7 grid-cols-2 gap-x-4 gap-y-4"},xe={class:"col"},be={class:""},we={class:"col"},he={class:""},Se={class:"col"},ke={class:"capitalize"},$e={class:"col"},Pe={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Ue={class:"col"},Ve={class:"truncate"},Ae={class:"col"},Te={class:"col"},qe={class:""},Be={class:"flex justify-center items-center"},je={class:"cursor-pointer hover:text-violet-600 transition-all"},F={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0}},setup(i,{emit:v}){const y=v,p=i,g=C(!1),x=c=>{g.value=c,y("update-selected-list",{isSelected:c,id:p.data.id})};return(c,n)=>{var m;return r(),d("div",{class:T(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":g.value}])},[e("div",ye,[e("div",fe,[l(ge,{onUpdateSelected:x,isSelected:g.value,class:"block mr-5"},null,8,["isSelected"])]),e("div",_e,[e("div",Ce,[e("div",xe,[n[0]||(n[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",be,f(i.data.id),1)]),e("div",we,[n[1]||(n[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type",-1)),e("div",he,f(a(le)(i.data.payment_type)),1)]),e("div",Se,[n[2]||(n[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",ke,f(i.data.payment_category_name),1)]),e("div",$e,[n[3]||(n[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",Pe,f(i.data.currency)+" "+f(a(oe)(i.data.amount)),1)]),e("div",Ue,[n[4]||(n[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",Ve,f((m=i.data.created_user)==null?void 0:m.name),1)]),e("div",Ae,[n[5]||(n[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),l(de,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:i.data.status},null,8,["status"])]),e("div",Te,[n[6]||(n[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",qe,f(a(ne)(i.data.created_at)),1)])])]),e("div",Be,[e("button",je,[l(a(H),{href:c.route("claim.details",i.data.id)},{default:S(()=>[l(ve,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},L={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(i,{emit:v}){const y=v,p=c=>{y("pendingClaimsCount",c)},g=C([]),x=({isSelected:c,id:n})=>{g.value=c?[...new Set([...g.value,n])]:g.value.filter(m=>m!==n)};return(c,n)=>(r(),d("div",null,[l(E,{apiUrl:c.route("claims.list"),createCompleteSignal:i.createCompleteSignal},{"list-view":S(({data:m,apiResponse:s})=>[U(f(p(s.total))+" ",1),(r(!0),d($,null,P(m,_=>(r(),M(F,{createComplete:i.createCompleteSignal,onUpdateSelectedList:x,key:_.id,data:_},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal"])]))}},Ne={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(i,{emit:v}){const y=v,p=c=>{y("pendingClaimsCount",c)},g=C([]),x=({isSelected:c,id:n})=>{g.value=c?[...new Set([...g.value,n])]:g.value.filter(m=>m!==n)};return(c,n)=>(r(),d("div",null,[l(E,{apiUrl:c.route("claims.listPendingApproval"),createCompleteSignal:i.createCompleteSignal},{"list-view":S(({data:m,apiResponse:s})=>[U(f(p(s.total))+" ",1),(r(!0),d($,null,P(m,_=>(r(),M(F,{createComplete:i.createCompleteSignal,onUpdateSelectedList:x,key:_.id,data:_},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal"])]))}},De={class:"space-y-6"},Le={key:0},Me={key:1},Ie={class:"grid grid-cols-1 gap-4 mt-4"},ze=["value","data-attr-currency-id"],Ee=["value"],Fe=["value"],Oe={class:"col-span-2"},Re={class:"flex items-center space-x-4 mt-1"},Ge={class:"inline-flex items-center"},Ke={class:"inline-flex items-center"},Ye={class:"col-span-2"},He={class:"col-span-2"},Je={key:2,class:"text-right mt-6"},Qe={__name:"CreateClaimForm",setup(i,{emit:v}){const y=C(!1),p=C(!1),g=v,x=C([]),c=C([]),n=C([]),m=C(null),s=J({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),_=()=>{y.value=!0},V=()=>{y.value=!1},O=async()=>{p.value=!0;try{const u=new FormData;u.append("receipt",s.receipt);for(const[o,k]of Object.entries(s.data()))u.append(o,k);const t=await axios.post(route("claims.store"),u,{headers:{"Content-Type":"multipart/form-data"}});j.fire({title:"Success!",text:t.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),V(),s.reset(),g("createComplete",!0),p.value=!1}catch(u){u.response&&u.response.data.errors?s.errors=u.response.data.errors:j.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),p.value=!1}},R=async()=>{try{const{data:u}=await axios.get(route("currency.listShortCode"));x.value=u}catch(u){m.value=u}},G=u=>{var o;const t=(o=u.target.selectedOptions[0])==null?void 0:o.getAttribute("data-attr-currency-id");s.currency=t},K=async()=>{try{const{data:u}=await axios.get(route("paymentCategory.listChoice"));n.value=u}catch(u){m.value=u}},Y=async()=>{try{const{data:u}=await axios.get(route("paymentReceiver.listNameAndId"));c.value=u}catch(u){m.value=u}};return Q(()=>{R(),K(),Y()}),(u,t)=>(r(),d("section",De,[l(D,{onClick:_},{default:S(()=>t[10]||(t[10]=[U("Create Claim")])),_:1}),l(ce,{show:y.value,onClose:V},{default:S(()=>[e("form",{onSubmit:W(O,["prevent"]),class:"p-6"},[p.value?(r(),d("div",Le,[l(re,{class:"mt-32 mb-32"})])):(r(),d("div",Me,[t[17]||(t[17]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Claim",-1)),e("div",Ie,[e("div",null,[l(b,{for:"payment_to",value:"Payment To"}),h(e("select",{id:"payment_to","onUpdate:modelValue":t[0]||(t[0]=o=>a(s).payment_to=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:"",onChange:G},[t[11]||(t[11]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(r(!0),d($,null,P(c.value,o=>(r(),d("option",{key:o.id,value:o.id,class:"capitalize","data-attr-currency-id":o.currency_id},f(o.name),9,ze))),128))],544),[[A,a(s).payment_to]]),l(w,{message:a(s).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[l(b,{for:"payment_type",value:"Payment Type"}),h(e("select",{id:"payment_type","onUpdate:modelValue":t[1]||(t[1]=o=>a(s).payment_type=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},t[12]||(t[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[A,a(s).payment_type]]),l(w,{message:a(s).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[l(b,{for:"payment_category",value:"Payment Category"}),h(e("select",{id:"currency","onUpdate:modelValue":t[2]||(t[2]=o=>a(s).payment_category=o),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[t[13]||(t[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(r(!0),d($,null,P(n.value,(o,k)=>(r(),d("option",{key:k,value:k,class:"capitalize"},f(o),9,Ee))),128))],512),[[A,a(s).payment_category]]),l(w,{message:a(s).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[l(b,{for:"currency",value:"Currency"}),h(e("select",{id:"currency","onUpdate:modelValue":t[3]||(t[3]=o=>a(s).currency=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[t[14]||(t[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(r(!0),d($,null,P(x.value,(o,k)=>(r(),d("option",{key:k,value:k},f(o),9,Fe))),128))],512),[[A,a(s).currency]]),l(w,{message:a(s).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[l(b,{for:"amount",value:"Amount (incl. GST if any)"}),l(N,{id:"amount",modelValue:a(s).amount,"onUpdate:modelValue":t[4]||(t[4]=o=>a(s).amount=o),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(w,{message:a(s).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",Oe,[l(b,{value:"GST"}),e("div",Re,[e("label",Ge,[h(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=o=>a(s).gst=o),value:"1",class:"form-radio"},null,512),[[q,a(s).gst]]),t[15]||(t[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",Ke,[h(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=o=>a(s).gst=o),value:"0",class:"form-radio"},null,512),[[q,a(s).gst]]),t[16]||(t[16]=e("span",{class:"ml-2"},"No",-1))])]),l(w,{message:a(s).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",Ye,[l(b,{for:"purpose",value:"Purpose of Payment"}),h(e("textarea",{id:"purpose","onUpdate:modelValue":t[7]||(t[7]=o=>a(s).purpose=o),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[X,a(s).purpose]]),l(w,{message:a(s).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[l(b,{for:"receipt_date",value:"Date of Receipt / Invoice"}),l(N,{id:"receipt_date",modelValue:a(s).receipt_date,"onUpdate:modelValue":t[8]||(t[8]=o=>a(s).receipt_date=o),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(w,{message:a(s).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",He,[l(b,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:t[9]||(t[9]=o=>a(s).receipt=o.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),l(w,{message:a(s).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),p.value?I("",!0):(r(),d("div",Je,[e("button",{type:"button",onClick:V,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),l(D,{type:"submit",class:T(["ms-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:S(()=>t[18]||(t[18]=[U(" Submit Claim ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},We={class:"flex justify-between content-center"},Xe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},Ze={key:0},et={class:"inline-flex bg-white rounded"},tt=["onClick"],st={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},at={class:"w-full"},lt={key:1},ot={__name:"Claim",setup(i){const v=C(2),y=C(0),p=C("allClaims"),g=C([{name:"allClaims",label:"All Claims"},{name:"pendingApproval",label:"Pending Approval"}]),x=m=>p.value===m?"active bg-violet-500 text-white font-bold":"hover:bg-gray-200 text-black bg-white",c=()=>{v.value=Math.floor(Math.random()*100)+1},n=m=>{y.value=m};return(m,s)=>(r(),d($,null,[l(a(Z),{title:"Claims"}),l(ee,null,{header:S(()=>[e("div",We,[l(ae,{breadcrumbs:[{title:"Claims"}]}),l(Qe,{onCreateComplete:c})])]),default:S(()=>[e("div",Xe,[a(te)().value||a(se)().value?(r(),d("div",Ze,[e("div",et,[(r(!0),d($,null,P(g.value,_=>(r(),d("span",{key:_.name,class:T(["tab-btn p-2 px-5 text-md rounded flex justify-center items-center",x(_.name)]),onClick:V=>p.value=_.name},[U(f(_.label)+" ",1),_.name=="pendingApproval"&&y.value!=0&&y.value!=null?(r(),d("span",st,f(a(ie)(y.value)),1)):I("",!0)],10,tt))),128))]),e("div",at,[h(e("div",null,[l(Ne,{createCompleteSignal:v.value,onPendingClaimsCount:n},null,8,["createCompleteSignal"])],512),[[B,p.value==="pendingApproval"]]),h(e("div",null,[l(L,{createCompleteSignal:v.value},null,8,["createCompleteSignal"])],512),[[B,p.value==="allClaims"]])])])):(r(),d("div",lt,[l(L,{createCompleteSignal:v.value},null,8,["createCompleteSignal"])]))])]),_:1})],64))}},ft=z(ot,[["__scopeId","data-v-fb3ff075"]]);export{ft as default};

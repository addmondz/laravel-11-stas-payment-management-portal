import{_ as H,a as A}from"./AuthenticatedLayout-BlU-AB_m.js";import{l as u,o as d,g as c,b as e,a as o,t as R,h as j,w as b,e as U,y as $,D as G,p as I,j as N,q as O,F as S,m as E,u as g,E as J,d as Q,P as W}from"./app-CGXytpax.js";import{S as x,L as K,d as X,N as Y}from"./sweetalert2.esm.all-WbN68XuM.js";import{_ as Z}from"./BreadcrumbComponent-VBoRb9sw.js";import{P as B}from"./PrimaryButton-6qfW2tL5.js";import{$ as D}from"./jquery-DggUHWCJ.js";import{_ as k,a as w}from"./TextInput-aVxL1Cqv.js";import"./ApplicationLogo-M_mRncSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"flex mb-5"},te={class:"flex justify-center items-center"},se={key:0,class:"text-red-500 text-sm mt-2"},ae={__name:"SummaryReportComponent",setup(P){const n=u(""),r=u(""),a=u(""),m=async()=>{var s,i;if(a.value="",!n.value||!r.value){a.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(r.value)<new Date(n.value)){a.value="'Date To' cannot be earlier than 'Date From'.";return}const p=route("reports.newSummaryReport",{dateFrom:n.value,dateTo:r.value});try{const f=await $.post(p,{},{responseType:"blob"}),T=new Blob([f.data],{type:f.headers["content-type"]}),_=document.createElement("a");_.href=URL.createObjectURL(T);const V=f.headers["content-disposition"],C=V?V.split("filename=")[1].replace(/"/g,""):"report.pdf";_.download=C,document.body.appendChild(_),_.click(),document.body.removeChild(_),x.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(f){console.error(f),x.fire({title:"Error!",text:((i=(s=f.response)==null?void 0:s.data)==null?void 0:i.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}};return(p,s)=>(d(),c("div",null,[s[4]||(s[4]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),e("div",ee,[e("div",null,[o(k,{for:"receipt_date",value:"Date"}),e("div",te,[e("div",null,[o(w,{id:"date_from",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s[2]||(s[2]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(w,{id:"date_to",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])]),a.value?(d(),c("p",se,R(a.value),1)):j("",!0)])]),o(B,{onClick:m},{default:b(()=>s[3]||(s[3]=[U("Download")])),_:1})]))}},oe={class:"flex mb-5 flex-col"},le={key:0},re={key:1,class:"mb-5"},ne={class:"flex justify-center items-center"},ie={key:0,class:"text-red-500 text-sm mt-2"},de={class:"mb-5"},ce=["value","data-attr-currency-id"],ue={class:"mb-5"},me=["value"],pe={__name:"TransactionsReportComponent",setup(P){const n=u(""),r=u(""),a=u(""),m=u(""),p=u(""),s=u(""),i=u(!1),f=u([]),T=u([]),_=async()=>{var q,F;if(p.value="",!n.value||!r.value){p.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(r.value)<new Date(n.value)){p.value="'Date To' cannot be earlier than 'Date From'.";return}const v=route("reports.transactionsReport",{dateFrom:n.value,dateTo:r.value}),t=new URLSearchParams;a.value&&t.append("payment_to",a.value),m.value&&t.append("claim_ids_filters",m.value);const l=`${v}?${t.toString()}`;try{const y=await $.post(l,{},{responseType:"blob"}),M=new Blob([y.data],{type:y.headers["content-type"]}),h=document.createElement("a");h.href=URL.createObjectURL(M);const L=y.headers["content-disposition"],z=L?L.split("filename=")[1].replace(/"/g,""):"report.pdf";h.download=z,document.body.appendChild(h),h.click(),document.body.removeChild(h),x.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(y){console.error(y),x.fire({title:"Error!",text:((F=(q=y.response)==null?void 0:q.data)==null?void 0:F.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}},V=async()=>{i.vlaue=!0;try{const{data:v}=await $.get(route("paymentReceiver.listNameAndId"));f.value=v}catch(v){s.value=v}finally{i.value=!1}},C=async()=>{i.vlaue=!0;let v=route("claims.listIds");const t=a.value;if(t!==""){const l=new URLSearchParams({payment_to:t});v+=`?${l.toString()}`}try{const{data:l}=await $.get(v);T.value=l}catch(l){s.value=l}finally{i.value=!1}};return G(a,(v,t)=>{v!==t&&C()}),I(()=>{V(),C()}),(v,t)=>(d(),c("div",null,[t[11]||(t[11]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),e("div",oe,[i.value?(d(),c("div",le,[o(K,{class:"mt-32"})])):(d(),c("div",re,[o(k,{for:"receipt_date",value:"Date"}),e("div",ne,[e("div",null,[o(w,{id:"date_from",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[4]||(t[4]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(w,{id:"date_to",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1))]),p.value?(d(),c("p",ie,R(p.value),1)):j("",!0)])),e("div",de,[o(k,{for:"payment_to",value:"Payment Receiver"}),N(e("select",{id:"payment_to","onUpdate:modelValue":t[2]||(t[2]=l=>a.value=l),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[6]||(t[6]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Receiver",-1)),t[7]||(t[7]=e("option",{value:""},"All",-1)),(d(!0),c(S,null,E(f.value,l=>(d(),c("option",{key:l.id,value:l.id,class:"capitalize","data-attr-currency-id":l.currency_id},R(l.name),9,ce))),128))],512),[[O,a.value]])]),e("div",ue,[o(k,{for:"claim_ids_filters",value:"Claim ID"}),N(e("select",{id:"claim_ids_filters","onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[8]||(t[8]=e("option",{value:"",disabled:"",selected:""},"Please select Claim ID",-1)),t[9]||(t[9]=e("option",{value:""},"All",-1)),(d(!0),c(S,null,E(T.value,l=>(d(),c("option",{key:l,value:l},R(g(X)(l)),9,me))),128))],512),[[O,m.value]])])]),o(B,{onClick:_},{default:b(()=>t[10]||(t[10]=[U("Download")])),_:1})]))}},ve={class:"flex mb-5"},fe={class:"flex justify-center items-center"},_e={key:0,class:"text-red-500 text-sm mt-2"},be={__name:"PaymentDetailReportComponent",setup(P){const n=u(""),r=u(""),a=u(""),m=async()=>{var p,s;if(a.value="",!n.value||!r.value){a.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(r.value)<new Date(n.value)){a.value="'Date To' cannot be earlier than 'Date From'.";return}try{const i=await $.post("/api/report/download",{date_from:n.value,date_to:r.value});x.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(i){x.fire({title:"Error!",text:((s=(p=i.response)==null?void 0:p.data)==null?void 0:s.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}};return(p,s)=>(d(),c("div",null,[s[4]||(s[4]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),e("div",ve,[e("div",null,[o(k,{for:"receipt_date",value:"Date"}),e("div",fe,[e("div",null,[o(w,{id:"date_from",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s[2]||(s[2]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(w,{id:"date_to",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])]),a.value?(d(),c("p",_e,R(a.value),1)):j("",!0)])]),o(B,{onClick:m},{default:b(()=>s[3]||(s[3]=[U("Download")])),_:1})]))}},ye={class:"flex justify-between content-center"},xe={key:0},we={key:0},he={key:1},De={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},ge={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},Re={class:"w-full md:w-3/4 bg-white"},$e={class:"space-y-4"},ke={class:"tab-display","tab-name":"summaryReport"},Te={class:"flex items-center"},Ve={class:"flex-1 p-4"},Ce={class:"space-y-4"},Ue={class:"tab-display","tab-name":"transactionsReport"},Be={class:"flex items-center"},Pe={class:"flex-1 p-4"},Se={class:"space-y-4"},je={class:"tab-display","tab-name":"paymentDetailReport"},qe={class:"flex items-center"},Fe={class:"flex-1 p-4"},Le={key:1},Ae={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Ne={class:"flex justify-center"},Qe={__name:"Reports",setup(P){const n=u(!1);return I(()=>{const r=D(".tab-btn"),a=D(".tab-display"),m="active bg-violet-500 text-white";a.hide(),r.first().addClass(m),a.first().show(),D("body").on("click",".tab-btn",function(){a.hide(),r.removeClass(m),D(this).addClass(m),a.filter(`[tab-name="${D(this).attr("tab-name")}"]`).show()})}),(r,a)=>(d(),c(S,null,[o(g(Q),{title:"Claims"}),o(H,null,J({default:b(()=>[g(A)().value?(d(),c("div",xe,[n.value?(d(),c("div",we,[o(K,{class:"mt-32"})])):(d(),c("div",he,[e("div",De,[e("div",ge,[a[0]||(a[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",Re,[e("div",$e,[e("div",ke,[e("div",Te,[e("div",Ve,[o(ae)])])])]),e("div",Ce,[e("div",Ue,[e("div",Be,[e("div",Pe,[o(pe)])])])]),e("div",Se,[e("div",je,[e("div",qe,[e("div",Fe,[o(be)])])])])])])])]))])):(d(),c("div",Le,[e("div",Ae,[o(Y),e("div",Ne,[o(g(W),{href:r.route("dashboard")},{default:b(()=>[o(B,{class:"p-4"},{default:b(()=>a[1]||(a[1]=[U("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[g(A)().value?{name:"header",fn:b(()=>[e("div",ye,[o(Z,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{Qe as default};

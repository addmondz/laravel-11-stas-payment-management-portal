import{a as o,o as d,g as v,b as t,j as $,k as q,u as i,n as V,l as _,C as be,m as ee,p as he,c as D,w as j,e as E,f as xe,t as h,q as G,F,s as N,x as te,h as U,y as Ce,z as we,i as Se,P as Oe,d as Pe}from"./app-Dy6rl3ov.js";import{c as $e,i as ie,_ as ke,g as Ae}from"./AuthenticatedLayout-DG6bqEvW.js";import{I as z,_ as je}from"./BreadcrumbComponent-BfpH3KLq.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as B,f as ue,a as Te,b as Be}from"./helpers-BuoOvgd_.js";import{_ as Ve}from"./StatusLabel-DRWBZGh0.js";import{_ as k}from"./InputError-CYZR9bh_.js";import{_ as A,a as Y}from"./TextInput-B-S9aKC7.js";import{M as Fe}from"./Modal-B7wuL877.js";import{P as J}from"./PrimaryButton-DJXD6kBq.js";import{L as Me}from"./NotFound-BL4ALBM8.js";import{C as De}from"./CustomSelectComponent-DMXqOFOC.js";import{_ as de}from"./ListComponent-C6x223By.js";import"./DateRangeComponent-CscRcVJx.js";var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function ae(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),s.forEach(function(c){Ue(e,c,l[c])})}return e}function Ue(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var K=function(a,l){var s=ae({},a,l.attrs);return o(z,ae({},s,{icon:Ne}),null)};K.displayName="CheckOutlined";K.inheritAttrs=!1;var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function le(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),s.forEach(function(c){ze(e,c,l[c])})}return e}function ze(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var Q=function(a,l){var s=le({},a,l.attrs);return o(z,le({},s,{icon:Ee}),null)};Q.displayName="DeleteOutlined";Q.inheritAttrs=!1;var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function se(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),s.forEach(function(c){qe(e,c,l[c])})}return e}function qe(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var W=function(a,l){var s=se({},a,l.attrs);return o(z,se({},s,{icon:Ie}),null)};W.displayName="EditOutlined";W.inheritAttrs=!1;var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};function ne(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),s.forEach(function(c){Re(e,c,l[c])})}return e}function Re(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var X=function(a,l){var s=ne({},a,l.attrs);return o(z,ne({},s,{icon:Le}),null)};X.displayName="FieldTimeOutlined";X.inheritAttrs=!1;var He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zm-40 600H184V312h528v528zm168-728H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM300 550h296v64H300z"}}]},name:"switcher",theme:"outlined"};function re(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},s=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(c){return Object.getOwnPropertyDescriptor(l,c).enumerable}))),s.forEach(function(c){Ge(e,c,l[c])})}return e}function Ge(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var Z=function(a,l){var s=re({},a,l.attrs);return o(z,re({},s,{icon:He}),null)};Z.displayName="SwitcherOutlined";Z.inheritAttrs=!1;const Ye={},Je={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function Ke(e,a){return d(),v("svg",Je,a[0]||(a[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const Qe=ce(Ye,[["render",Ke]]),me={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(e,{emit:a}){const l=e,s=a,c=()=>{s("update-selected",!l.isSelected)};return(g,b)=>(d(),v("div",{class:V(["square-btn border-4 flex justify-center items-center",{"selected bg-violet-400 border-violet-400":e.isSelected,"border-gray-400":!e.isSelected}]),onClick:c},[$(o(i(K),{class:"font-extrabold text-white"},null,512),[[q,e.isSelected]])],2))}},We={class:"space-y-6"},Xe={key:0},Ze={key:1},et={class:"text-lg font-medium text-gray-900"},tt={class:"grid grid-cols-1 gap-4 mt-4"},at=["value"],lt=["value"],st={class:"col-span-2"},nt={class:"flex items-center space-x-4 mt-1"},rt={class:"flex space-x-4"},ot={class:"inline-flex items-center"},it={class:"inline-flex items-center"},ct={key:0},ut={class:"col-span-2"},dt={class:"col-span-2"},mt={key:2,class:"text-right mt-6"},pe={__name:"CreateClaimForm",props:{claimData:{type:Object,default:null}},setup(e,{emit:a}){const l=e,s=_(!1),c=_(!1),g=_(!1),b=a,w=_([]),f=_([]),p=_([]),x=_(""),y=_(null),n=be({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",gst_value:"",purpose:"",receipt_date:"",receipt:null}),I=_(0),L=_(),C=_(),S=()=>{n.gst==1?(M(),g.value=!0):g.value=!1},O=async(u=1)=>{try{const{data:r}=await axios.get(route("variables.fetchesGst"));I.value=r}catch(r){y.value=r}},M=()=>{n.gst_value=(n.amount*I.value/100).toFixed(2)},T=()=>{s.value=!0},R=()=>{s.value=!1},fe=async()=>{c.value=!0;try{const u=new FormData;n.receipt!=null&&u.append("receipt",n.receipt);for(const[P,H]of Object.entries(n.data()))P!="receipt"&&u.append(P,H);const r=l.claimData?route("claims.update",l.claimData.id):route("claims.store"),m=await axios.post(r,u,{headers:{"Content-Type":"multipart/form-data"}});B.fire({title:"Success!",text:m.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"},willClose:()=>{location.reload()}}),R(),n.reset(),b("createComplete",!0),c.value=!1}catch(u){u.response&&u.response.data.errors?n.errors=u.response.data.errors:B.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),c.value=!1}},ye=async()=>{try{const{data:u}=await axios.get(route("currency.listShortCode"));w.value=u}catch(u){y.value=u}},ge=async()=>{try{const{data:u}=await axios.get(route("paymentCategory.listChoice"));p.value=u}catch(u){y.value=u}},_e=async()=>{try{const{data:u}=await axios.get(route("paymentReceiver.listNameAndId"));f.value=u;for(let r=0;r<f.value.length;r++)if(f.value[r].id==n.payment_to){C.value=f.value[r].name;break}}catch(u){y.value=u}};return ee(()=>x.value,(u,r)=>{if(n&&"payment_to"in n){n.payment_to=u.toString();const m=f.value.find(H=>H.id===parseInt(u)),P=m?m.currency_id:null;n.currency=P}},{immediate:!0}),ee(()=>l.claimData,u=>{u?(we(()=>{n.payment_to=u.payment_receiver_id}),n.payment_type=u.payment_type,n.payment_category=u.payment_category_id,n.currency=u.currency_id,n.amount=u.amount,n.gst=u.gst_amount!=0?"1":"0",n.gst_value=u.gst_amount,n.purpose=u.purpose,n.receipt_date=u.receipt_date,u.gst_amount!=0&&(g.value=!0)):n.reset()},{immediate:!0}),he(()=>{O(),ye(),ge(),_e()}),(u,r)=>(d(),v("section",We,[l.claimData==null?(d(),D(J,{key:0,onClick:T},{default:j(()=>r[11]||(r[11]=[E("Create Payment")])),_:1})):(d(),D(i(W),{key:1,class:"mb-4 mr-2",onClick:T})),o(Fe,{show:s.value,onClose:R},{default:j(()=>[t("form",{onSubmit:xe(fe,["prevent"]),class:"p-5"},[c.value?(d(),v("div",Xe,[o(Me,{class:"mt-32 mb-32"})])):(d(),v("div",Ze,[t("h2",et,h(l.claimData!=null?"Edit Payment":"Create New Payment"),1),t("div",tt,[t("div",null,[o(A,{for:"payment_to",value:"Payment To"}),o(De,{choices:f.value,modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=m=>x.value=m),isEdit:l.claimData!=null,label:l.claimData!=null?C.value:"Payment Receiver",choicesIsObject:!0,ref_key:"customSelect",ref:L},null,8,["choices","modelValue","isEdit","label"]),o(k,{message:i(n).errors.payment_to,class:"mt-2"},null,8,["message"])]),t("div",null,[o(A,{for:"payment_type",value:"Payment Type"}),$(t("select",{id:"payment_type","onUpdate:modelValue":r[1]||(r[1]=m=>i(n).payment_type=m),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},r[12]||(r[12]=[t("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),t("option",{value:"reimbursement"},"Reimbursement",-1),t("option",{value:"external_payment"},"External Payment",-1)]),512),[[G,i(n).payment_type]]),o(k,{message:i(n).errors.payment_type,class:"mt-2"},null,8,["message"])]),t("div",null,[o(A,{for:"payment_category",value:"Payment Category"}),$(t("select",{id:"currency","onUpdate:modelValue":r[2]||(r[2]=m=>i(n).payment_category=m),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[r[13]||(r[13]=t("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(d(!0),v(F,null,N(p.value,(m,P)=>(d(),v("option",{key:P,value:P,class:"capitalize"},h(m),9,at))),128))],512),[[G,i(n).payment_category]]),o(k,{message:i(n).errors.payment_category,class:"mt-2"},null,8,["message"])]),t("div",null,[o(A,{for:"currency",value:"Currency"}),$(t("select",{id:"currency","onUpdate:modelValue":r[3]||(r[3]=m=>i(n).currency=m),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[r[14]||(r[14]=t("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(d(!0),v(F,null,N(w.value,(m,P)=>(d(),v("option",{key:P,value:P},h(m),9,lt))),128))],512),[[G,i(n).currency]]),o(k,{message:i(n).errors.currency,class:"mt-2"},null,8,["message"])]),t("div",null,[o(A,{for:"amount",value:"Amount (incl. GST if any)"}),o(Y,{id:"amount",modelValue:i(n).amount,"onUpdate:modelValue":r[4]||(r[4]=m=>i(n).amount=m),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:"",onKeyup:M},null,8,["modelValue"]),o(k,{message:i(n).errors.amount,class:"mt-2"},null,8,["message"])]),t("div",null,[t("div",st,[o(A,{value:"GST"}),t("div",nt,[t("div",rt,[t("label",ot,[$(t("input",{type:"radio","onUpdate:modelValue":r[5]||(r[5]=m=>i(n).gst=m),value:"1",class:"form-radio",onChange:S},null,544),[[te,i(n).gst]]),r[15]||(r[15]=t("span",{class:"ml-2"},"Yes",-1))]),t("label",it,[$(t("input",{type:"radio","onUpdate:modelValue":r[6]||(r[6]=m=>i(n).gst=m),value:"0",class:"form-radio",onChange:S},null,544),[[te,i(n).gst]]),r[16]||(r[16]=t("span",{class:"ml-2"},"No",-1))])]),g.value?(d(),v("div",ct,[o(Y,{id:"gst_value",modelValue:i(n).gst_value,"onUpdate:modelValue":r[7]||(r[7]=m=>i(n).gst_value=m),type:"number",step:"0.01",placeholder:"Enter GST amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])):U("",!0)]),o(k,{message:i(n).errors.gst,class:"mt-2"},null,8,["message"])])]),t("div",null,[t("div",ut,[o(A,{for:"purpose",value:"Purpose of Payment"}),$(t("textarea",{id:"purpose","onUpdate:modelValue":r[8]||(r[8]=m=>i(n).purpose=m),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[Ce,i(n).purpose]]),o(k,{message:i(n).errors.purpose,class:"mt-2"},null,8,["message"])])]),t("div",null,[o(A,{for:"receipt_date",value:"Date of Receipt / Invoice"}),o(Y,{id:"receipt_date",modelValue:i(n).receipt_date,"onUpdate:modelValue":r[9]||(r[9]=m=>i(n).receipt_date=m),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(k,{message:i(n).errors.receipt_date,class:"mt-2"},null,8,["message"])]),t("div",null,[t("div",dt,[o(A,{for:"receipt",value:"Upload Receipt"}),t("input",{id:"receipt",type:"file",onChange:r[10]||(r[10]=m=>i(n).receipt=m.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer"},null,32),o(k,{message:i(n).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),c.value?U("",!0):(d(),v("div",mt,[t("button",{type:"button",onClick:R,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),o(J,{type:"submit",class:V(["ms-3",{"opacity-25":i(n).processing}]),disabled:i(n).processing},{default:j(()=>r[17]||(r[17]=[E(" Submit Payment ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},pt={class:"flex"},vt={key:0,class:"flex justify-center items-center"},ft={class:"flex-1"},yt={class:"grid lg:grid-cols-7 grid-cols-2 gap-x-4 gap-y-4"},gt={class:"col"},_t={class:""},bt={class:"col"},ht={class:""},xt={class:"col"},Ct={class:"capitalize"},wt={class:"col"},St={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Ot={class:"col"},Pt={class:"truncate"},$t={class:"col"},kt={class:"col"},At={class:""},jt={class:"flex justify-center items-center space-x-4"},Tt=["disabled"],Bt={class:"cursor-pointer hover:text-violet-600 transition-all"},ve={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1},isSelected:{type:Boolean,required:!1,default:!1}},emits:["update-selected-list"],setup(e,{emit:a}){const l=a,s=e,c=f=>{l("update-selected-list",{isSelected:f,id:s.data.id})},g=Se(()=>s.data.status_id>=2),b=()=>{B.fire({title:"Are you sure?",text:"Are you sure you want to delete this Payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((f,p)=>{w()})})},w=async()=>{var f,p;try{const x=await axios.post(route("claims.delete",s.data.id));l("createComplete",!0),B.fire({title:"Success!",text:"The Payment has been successfully deleted.",icon:"success",confirmButtonText:"OK"})}catch(x){console.log(x),B.fire({title:"Error!",text:((p=(f=x.response)==null?void 0:f.data)==null?void 0:p.error)||"An unexpected error occurred while deleteing the payment.",icon:"error",confirmButtonText:"OK"})}};return(f,p)=>{var x,y;return d(),v("div",{class:V(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":e.isSelected}])},[t("div",pt,[e.showGroupActions?(d(),v("div",vt,[o(me,{onUpdateSelected:c,isSelected:e.isSelected,class:"block mr-5"},null,8,["isSelected"])])):U("",!0),t("div",ft,[t("div",yt,[t("div",gt,[p[0]||(p[0]=t("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),t("div",_t,h(e.data.id),1)]),t("div",bt,[p[1]||(p[1]=t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Receiver",-1)),t("div",ht,h((x=e.data.payment_receiver)==null?void 0:x.name),1)]),t("div",xt,[p[2]||(p[2]=t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),t("div",Ct,h(e.data.payment_category_name),1)]),t("div",wt,[p[3]||(p[3]=t("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),t("div",St,h(e.data.currency)+" "+h(i(ue)(e.data.amount)),1)]),t("div",Ot,[p[4]||(p[4]=t("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),t("div",Pt,h((y=e.data.created_user)==null?void 0:y.name),1)]),t("div",$t,[p[5]||(p[5]=t("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),o(Ve,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:e.data.status},null,8,["status"])]),t("div",kt,[p[6]||(p[6]=t("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),t("div",At,h(i(Te)(e.data.created_at)),1)])])]),t("div",jt,[i($e)().value?(d(),D(i(Q),{key:0,onClick:b,class:V(["mb-3 mr-2",{invisible:g.value}]),disabled:g.value},null,8,["class","disabled"])):U("",!0),t("div",{class:V({invisible:g.value}),disabled:g.value},[o(pe,{claimData:e.data},null,8,["claimData"])],10,Tt),t("button",Bt,[o(i(Oe),{href:f.route("claim.details",e.data.id)},{default:j(()=>[o(Qe,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},Vt={key:0,class:"bg-white p-5 rounded-xl"},Ft={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-6"},Mt={class:"mb-2"},Dt={class:"flex justify-between"},Nt={class:"font-bold"},oe={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(e,{emit:a}){const l=a,s=_([]),c=({isSelected:b,id:w})=>{s.value=b?[...new Set([...s.value,w])]:s.value.filter(f=>f!==w)},g=b=>{l("createComplete",!0)};return(b,w)=>(d(),v("div",null,[o(de,{apiUrl:b.route("claims.list"),createCompleteSignal:e.createCompleteSignal,sortAndFilters:e.sortAndFilters,allowSorting:!0},{"list-view":j(({data:f,apiResponse:p,fullApiResponse:x})=>[Object.keys(x.sum).length?(d(),v("div",Vt,[w[1]||(w[1]=t("h2",{class:"mb-4"},"Total Amount",-1)),t("div",Ft,[(d(!0),v(F,null,N(x.total_sum_by_country,(y,n)=>(d(),v("div",{key:n,class:"bg-gray-100 p-6 rounded-xl shadow-md transition-all duration-500 border"},[t("p",Mt,h(y.country_name)+" ("+h(n)+")",1),t("div",Dt,[w[0]||(w[0]=t("span",null,"Amount:",-1)),t("span",null,[t("span",Nt,h(y.currency)+" "+h(i(ue)(y.amount)),1)])])]))),128))])])):U("",!0),(d(!0),v(F,null,N(f,y=>(d(),D(ve,{createComplete:e.createCompleteSignal,onCreateComplete:g,onUpdateSelectedList:c,key:y.id,data:y},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])]))}},Ut={key:0,class:"flex items-center w-full order-last lg:order-none max-lg:mx-auto p-5 rounded-xl overflow-hidden transition-all duration-500"},Et={key:1,class:"mb-3"},zt={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},emits:["pendingClaimsCount"],setup(e,{emit:a}){const l=a,s=_([]),c=_(1),g=_(!1),b=_([]),w=C=>{l("pendingClaimsCount",C)},f=({isSelected:C,id:S})=>{C?s.value=[...new Set([...s.value,S])]:s.value=s.value.filter(T=>T!==S);const O=[...s.value].sort(),M=[...b.value].sort();g.value=JSON.stringify(O)===JSON.stringify(M)},p=C=>{g.value=!g.value,g.value?s.value=[...new Set([...s.value,...b.value])]:s.value=[]},x=C=>{b.value=C.map(S=>S.id)},y=()=>{B.fire({title:"Are you sure?",text:"Are you sure you want to approve these Payments?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((C,S)=>{I()})})},n=()=>{c.value++,s.value=[],g.value=!1},I=async()=>{var C,S;try{const O=await axios.post(route("claims.groupApprove",s.value.toString()));n(),B.fire({title:"Success!",text:"The Payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(O){B.fire({title:"Error!",text:((S=(C=O.response)==null?void 0:C.data)==null?void 0:S.error)||"An unexpected error occurred while approving the claim.",icon:"error",confirmButtonText:"OK"})}},L=C=>{l("createComplete",!0)};return(C,S)=>(d(),v("div",null,[i(ie)().value?(d(),v("div",Et)):(d(),v("div",Ut,[$(o(me,{onClick:S[0]||(S[0]=O=>p(C.data)),isSelected:g.value,class:"block mr-5"},null,8,["isSelected"]),[[q,b.value.length]]),o(J,{class:V(["select-none bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",{invisible:!s.value.length}]),onClick:y},{default:j(()=>[E(" Approve "+h(s.value.length)+" Payment(s) ",1)]),_:1},8,["class"])])),(d(),D(de,{apiUrl:C.route("claims.listPendingApproval"),createCompleteSignal:e.createCompleteSignal,key:c.value,allowSorting:!0,sortAndFilters:e.sortAndFilters,hasPaddingTop:!1},{"list-view":j(({data:O,apiResponse:M})=>[E(h(w(M.total))+" "+h(x(O))+" ",1),(d(!0),v(F,null,N(O,T=>(d(),D(ve,{key:T.id,showGroupActions:!0,createComplete:e.createCompleteSignal,data:T,isSelected:s.value.includes(T.id),onUpdateSelectedList:f,onCreateComplete:L},null,8,["createComplete","data","isSelected"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"]))]))}},It={class:"flex justify-between content-center"},qt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},Lt={key:0},Rt={class:"inline-flex"},Ht=["onClick"],Gt={class:"flex"},Yt={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},Jt={class:"w-full bg-black-50 p-1 rounded-xl"},Kt={key:1},Qt={__name:"Claim",setup(e){const a=_(2),l=_(0),s=_("allClaims"),c=_([{name:"allClaims",label:"All Payments",icon:Z},{name:"pendingApproval",label:"Pending Approval",icon:X}]),g=p=>s.value===p?"active bg-violet-400 text-white font-bold":"hover:bg-gray-200 text-black bg-white",b=()=>{a.value=Math.floor(Math.random()*100)+1},w=p=>{l.value=p},f=_([{display_name:"Payment ID",field_name:"id",field_type:"string"},{field_name:"payment_type",field_type:"select",options:{reimbursement:"Reimbursement",external_payment:"External Payment"}},{display_name:"Payment Category",field_name:"payment_category_id",field_type:"select",api:route("paymentCategory.listChoice")},{display_name:"Payment Receiver",field_name:"payment_receiver_id",field_type:"select",api:route("paymentReceiver.listIdToName")},{display_name:"Currency",field_name:"currency_id",field_type:"select",api:route("currency.listShortCode")},{display_name:"Created Date",field_name:"created_at",field_type:"date_range"},{field_name:"status",field_type:"select",api:route("approvalStatus.list")}]);return(p,x)=>(d(),v(F,null,[o(i(Pe),{title:"Payments"}),o(ke,null,{header:j(()=>[t("div",It,[o(je,{breadcrumbs:[{title:"Payments"}]}),o(pe,{onCreateComplete:b})])]),default:j(()=>[t("div",qt,[i(Ae)().value||i(ie)().value?(d(),v("div",Lt,[t("div",Rt,[(d(!0),v(F,null,N(c.value,y=>(d(),v("span",{key:y.name,class:V([["tab-btn p-2 px-5 text-md flex justify-center items-center",g(y.name)],"flex-1 pt-5 pb-5 border border-violet-500 flex flex-col min-w-60"]),onClick:n=>s.value=y.name},[x[0]||(x[0]=t("div",null,null,-1)),t("div",Gt,[E(h(y.label)+" ",1),y.name=="pendingApproval"&&l.value!=0&&l.value!=null?(d(),v("span",Yt,h(i(Be)(l.value)),1)):U("",!0)])],10,Ht))),128))]),t("div",Jt,[$(t("div",null,[o(zt,{createCompleteSignal:a.value,onPendingClaimsCount:w,onCreateComplete:b},null,8,["createCompleteSignal"])],512),[[q,s.value==="pendingApproval"]]),$(t("div",null,[o(oe,{createCompleteSignal:a.value,sortAndFilters:f.value,onCreateComplete:b},null,8,["createCompleteSignal","sortAndFilters"])],512),[[q,s.value==="allClaims"]])])])):(d(),v("div",Kt,[o(oe,{createCompleteSignal:a.value,sortAndFilters:f.value,onCreateComplete:b},null,8,["createCompleteSignal","sortAndFilters"])]))])]),_:1})],64))}},da=ce(Qt,[["__scopeId","data-v-6408ef9f"]]);export{da as default};

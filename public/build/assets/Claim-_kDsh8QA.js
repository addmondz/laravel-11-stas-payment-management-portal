import{o as r,g as i,b as e,k as u,i as Q,t as y,u as o,a as l,w as P,P as W,l as X,m as G,F as S,p as T,c as K,h as M,n as N,q as Z,e as q,C as ee,f as te,j as w,s as A,x as L,y as ae,d as se,z as R}from"./app-DOUvKUfi.js";import{_ as le,g as oe,i as ne}from"./AuthenticatedLayout-BsCIT_sP.js";import{_ as re}from"./BreadcrumbComponent-B_j575B6.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as ie,a as de,b as ue,L as H,N as I,S as z,c as ce}from"./sweetalert2.esm.all-CDqWq4ZO.js";import{_ as me}from"./StatusLabel-BWUge99A.js";import{_ as pe}from"./FilterDropdown-BeZotvKK.js";import{a as F,_ as C,b as h}from"./TextInput-BuKKUnQL.js";import{_ as ve}from"./ListComponent-C5AAOoax.js";import{_ as ye}from"./Modal-DLrYD__z.js";import{P as E}from"./PrimaryButton-C0BJIFEj.js";import"./ApplicationLogo-M_mRncSF.js";const ge={},fe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function _e(m,v){return r(),i("svg",fe,v[0]||(v[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const xe=Y(ge,[["render",_e]]),be={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},Ce={class:"flex"},he={class:"flex-1"},we={class:"grid lg:grid-cols-7 grid-cols-2 gap-x-4 gap-y-4"},$e={class:"col"},ke={class:""},Pe={class:"col"},Se={class:""},Ve={class:"col"},Te={class:"capitalize"},Ue={class:"col"},Ae={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Ne={class:"col"},qe={class:"truncate"},je={class:"col"},De={class:"col"},Be={class:""},Fe={class:"flex justify-center items-center"},Me={class:"cursor-pointer hover:text-violet-600 transition-all"},J={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0}},setup(m){const v=m;return u(!1),Q(()=>v.order.items.reduce((c,n)=>c+n.quantity,0)),(c,n)=>{var g;return r(),i("div",be,[e("div",Ce,[e("div",he,[e("div",we,[e("div",$e,[n[0]||(n[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",ke,y(m.data.id),1)]),e("div",Pe,[n[1]||(n[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type",-1)),e("div",Se,y(o(ie)(m.data.payment_type)),1)]),e("div",Ve,[n[2]||(n[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",Te,y(m.data.payment_category_name),1)]),e("div",Ue,[n[3]||(n[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",Ae,y(m.data.currency)+" "+y(o(de)(m.data.amount)),1)]),e("div",Ne,[n[4]||(n[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",qe,y((g=m.data.created_user)==null?void 0:g.name),1)]),e("div",je,[n[5]||(n[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),l(me,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:m.data.status},null,8,["status"])]),e("div",De,[n[6]||(n[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",Be,y(o(ue)(m.data.created_at)),1)])])]),e("div",Fe,[e("button",Me,[l(o(W),{href:c.route("claim.details",m.data.id)},{default:P(()=>[l(xe,{class:"text-violet-700"})]),_:1},8,["href"])])])])])}}},Le={key:0},Re={key:1},Ie={key:0,class:"mt-8"},ze={class:"grid md:grid-cols-4 gap-4 mb-5"},Ee={class:"grid md:grid-cols gap-4 mb-5"},Oe={key:0},Ge={class:"flex justify-between w-full"},Ke={class:"flex justify-end flex-1"},Ye=["disabled"],He=["disabled"],Je={key:1},O={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(m){const v=u(!0),c=u([]),n=u(null),g=u(null),$=u(null),b=u(""),_=u(null),f=u(9),t=u(1),x=u(0),V=route("claims.list"),j=m;X(()=>j.createCompleteSignal,a=>{a&&k(t.value)});const k=async(a=1)=>{try{const s=new URLSearchParams({limit:f.value,page:a,searchValue:b.value??"",paymentType:g.value??"",category:$.value??""}).toString(),{data:p}=await Z.get(`${V}?${s}`);c.value=p.data.data,_.value=p.data,x.value=p.data.last_page}catch(s){n.value=s}finally{v.value=!1}};G(()=>{k(t.value)});const D=()=>{t.value>=x.value||(t.value+=1,k(t.value))},B=()=>{t.value<=1||(t.value-=1,k(t.value))},U=()=>{t.value=1,k(t.value)},d=()=>{g.value=null,$.value=null,U()};return(a,s)=>v.value?(r(),i("div",Le,[l(H,{class:"mt-32"})])):(r(),i("div",Re,[_.value?(r(),i("div",Ie,[e("div",ze,[l(pe,{class:"w-full mr-5",label:"a Payment Type",modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=p=>g.value=p),options:["reimbursement","external_payment"]},null,8,["modelValue"]),l(F,{id:"search",modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=p=>b.value=p),placeholder:"Search",class:"text-center"},null,8,["modelValue"]),e("button",{class:"bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",onClick:d},"Reset Filters"),e("button",{class:"bg-violet-500 hover:bg-violet-700 text-white py-2 px-4 rounded ml-2",onClick:U},"Search")]),e("div",Ee,[(r(!0),i(S,null,T(c.value,p=>(r(),K(J,{key:p.id,data:p},null,8,["data"]))),128))]),c.value.length===0||c.value==[]?(r(),i("div",Oe,[l(I)])):M("",!0),e("div",Ge,[e("div",null,[e("p",null,"Showing "+y(_.value.from??0)+" to "+y(_.value.to??0)+" of "+y(_.value.total),1)]),e("div",Ke,[e("button",{class:N(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":t.value==1}]]),onClick:B,disabled:t.value==1},"Previous Page",10,Ye),e("button",{class:N(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":t.value==x.value}]]),disabled:t.value==x.value,onClick:D},"Next Page",10,He)])])])):(r(),i("div",Je,[l(I)]))]))}},Qe={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1}},setup(m,{emit:v}){const c=v,n=g=>{c("pendingClaimsCount",g)};return(g,$)=>(r(),i("div",null,[l(ve,{apiUrl:g.route("claims.listPendingApproval"),createCompleteSignal:m.createCompleteSignal},{"list-view":P(({data:b,apiResponse:_})=>[q(y(n(_.total))+" ",1),(r(!0),i(S,null,T(b,f=>(r(),K(J,{createComplete:m.createCompleteSignal,key:f.id,data:f},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal"])]))}},We={class:"space-y-6"},Xe={key:0},Ze={key:1},et={class:"grid grid-cols-1 gap-4 mt-4"},tt=["value","data-attr-currency-id"],at=["value"],st=["value"],lt={class:"col-span-2"},ot={class:"flex items-center space-x-4 mt-1"},nt={class:"inline-flex items-center"},rt={class:"inline-flex items-center"},it={class:"col-span-2"},dt={class:"col-span-2"},ut={key:2,class:"text-right mt-6"},ct={__name:"CreateClaimForm",setup(m,{emit:v}){const c=u(!1),n=u(!1),g=v,$=u([]),b=u([]),_=u([]),f=u(null),t=ee({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),x=()=>{c.value=!0},V=()=>{c.value=!1},j=async()=>{n.value=!0;try{const d=new FormData;d.append("receipt",t.receipt);for(const[s,p]of Object.entries(t.data()))d.append(s,p);const a=await axios.post(route("claims.store"),d,{headers:{"Content-Type":"multipart/form-data"}});z.fire({title:"Success!",text:a.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),V(),t.reset(),g("createComplete",!0),n.value=!1}catch(d){d.response&&d.response.data.errors?t.errors=d.response.data.errors:z.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),n.value=!1}},k=async()=>{try{const{data:d}=await axios.get(route("currency.listShortCode"));$.value=d}catch(d){f.value=d}},D=d=>{var s;const a=(s=d.target.selectedOptions[0])==null?void 0:s.getAttribute("data-attr-currency-id");t.currency=a},B=async()=>{try{const{data:d}=await axios.get(route("paymentCategory.listChoice"));_.value=d}catch(d){f.value=d}},U=async()=>{try{const{data:d}=await axios.get(route("paymentReceiver.listNameAndId"));b.value=d}catch(d){f.value=d}};return G(()=>{k(),B(),U()}),(d,a)=>(r(),i("section",We,[l(E,{onClick:x},{default:P(()=>a[10]||(a[10]=[q("Create Claim")])),_:1}),l(ye,{show:c.value,onClose:V},{default:P(()=>[e("form",{onSubmit:te(j,["prevent"]),class:"p-6"},[n.value?(r(),i("div",Xe,[l(H,{class:"mt-32 mb-32"})])):(r(),i("div",Ze,[a[17]||(a[17]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Claim",-1)),e("div",et,[e("div",null,[l(C,{for:"payment_to",value:"Payment To"}),w(e("select",{id:"payment_to","onUpdate:modelValue":a[0]||(a[0]=s=>o(t).payment_to=s),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:"",onChange:D},[a[11]||(a[11]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(r(!0),i(S,null,T(b.value,s=>(r(),i("option",{key:s.id,value:s.id,class:"capitalize","data-attr-currency-id":s.currency_id},y(s.name),9,tt))),128))],544),[[A,o(t).payment_to]]),l(h,{message:o(t).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[l(C,{for:"payment_type",value:"Payment Type"}),w(e("select",{id:"payment_type","onUpdate:modelValue":a[1]||(a[1]=s=>o(t).payment_type=s),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},a[12]||(a[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[A,o(t).payment_type]]),l(h,{message:o(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[l(C,{for:"payment_category",value:"Payment Category"}),w(e("select",{id:"currency","onUpdate:modelValue":a[2]||(a[2]=s=>o(t).payment_category=s),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[a[13]||(a[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(r(!0),i(S,null,T(_.value,(s,p)=>(r(),i("option",{key:p,value:p,class:"capitalize"},y(s),9,at))),128))],512),[[A,o(t).payment_category]]),l(h,{message:o(t).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[l(C,{for:"currency",value:"Currency"}),w(e("select",{id:"currency","onUpdate:modelValue":a[3]||(a[3]=s=>o(t).currency=s),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[a[14]||(a[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(r(!0),i(S,null,T($.value,(s,p)=>(r(),i("option",{key:p,value:p},y(s),9,st))),128))],512),[[A,o(t).currency]]),l(h,{message:o(t).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[l(C,{for:"amount",value:"Amount (incl. GST if any)"}),l(F,{id:"amount",modelValue:o(t).amount,"onUpdate:modelValue":a[4]||(a[4]=s=>o(t).amount=s),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(h,{message:o(t).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",lt,[l(C,{value:"GST"}),e("div",ot,[e("label",nt,[w(e("input",{type:"radio","onUpdate:modelValue":a[5]||(a[5]=s=>o(t).gst=s),value:"1",class:"form-radio"},null,512),[[L,o(t).gst]]),a[15]||(a[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",rt,[w(e("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=s=>o(t).gst=s),value:"0",class:"form-radio"},null,512),[[L,o(t).gst]]),a[16]||(a[16]=e("span",{class:"ml-2"},"No",-1))])]),l(h,{message:o(t).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",it,[l(C,{for:"purpose",value:"Purpose of Payment"}),w(e("textarea",{id:"purpose","onUpdate:modelValue":a[7]||(a[7]=s=>o(t).purpose=s),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[ae,o(t).purpose]]),l(h,{message:o(t).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[l(C,{for:"receipt_date",value:"Date of Receipt / Invoice"}),l(F,{id:"receipt_date",modelValue:o(t).receipt_date,"onUpdate:modelValue":a[8]||(a[8]=s=>o(t).receipt_date=s),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(h,{message:o(t).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",dt,[l(C,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:a[9]||(a[9]=s=>o(t).receipt=s.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),l(h,{message:o(t).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),n.value?M("",!0):(r(),i("div",ut,[e("button",{type:"button",onClick:V,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),l(E,{type:"submit",class:N(["ms-3",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:P(()=>a[18]||(a[18]=[q(" Submit Claim ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},mt={class:"flex justify-between content-center"},pt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},vt={key:0},yt={class:"flex"},gt=["onClick"],ft={key:0,class:"bg-gray-500 px-2 py-1 ml-2 rounded text-white text-xs notification-circle"},_t={class:"w-full"},xt={key:1},bt={__name:"Claim",setup(m){const v=u(2),c=u(0),n=u("allClaims"),g=u([{name:"allClaims",label:"All Claims"},{name:"pendingApproval",label:"Pending Approval"}]),$=f=>n.value===f?"active bg-violet-500 text-white font-bold":"hover:bg-gray-200",b=()=>{v.value=Math.floor(Math.random()*100)+1},_=f=>{c.value=f};return(f,t)=>(r(),i(S,null,[l(o(se),{title:"Claims"}),l(le,null,{header:P(()=>[e("div",mt,[l(re,{breadcrumbs:[{title:"Claims"}]}),l(ct,{onCreateComplete:b})])]),default:P(()=>[e("div",pt,[o(oe)().value||o(ne)().value?(r(),i("div",vt,[e("div",yt,[(r(!0),i(S,null,T(g.value,x=>(r(),i("span",{key:x.name,class:N(["tab-btn p-2 px-5 text-md text-black border-4 border-white",$(x.name)]),onClick:V=>n.value=x.name},[q(y(x.label)+" ",1),x.name=="pendingApproval"&&c.value!=0&&c.value!=null?(r(),i("span",ft,y(o(ce)(c.value)),1)):M("",!0)],10,gt))),128))]),e("div",_t,[w(e("div",null,[l(Qe,{createCompleteSignal:v.value,onPendingClaimsCount:_},null,8,["createCompleteSignal"])],512),[[R,n.value==="pendingApproval"]]),w(e("div",null,[l(O,{createCompleteSignal:v.value},null,8,["createCompleteSignal"])],512),[[R,n.value==="allClaims"]])])])):(r(),i("div",xt,[l(O,{createCompleteSignal:v.value},null,8,["createCompleteSignal"])]))])]),_:1})],64))}},qt=Y(bt,[["__scopeId","data-v-118872e1"]]);export{qt as default};

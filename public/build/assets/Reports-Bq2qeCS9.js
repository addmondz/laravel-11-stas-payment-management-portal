import{_ as q,a as W}from"./AuthenticatedLayout-wfAVnaN6.js";import{l as i,p as P,o as u,g as p,b as e,a as r,F as V,m as N,w as x,e as k,t as S,c as U,q as j,u as D,E as H,d as z,P as G}from"./app-D0oFYjCq.js";import{L as E,N as K}from"./LoadingComponent-B_TMZOCU.js";import{_ as Q}from"./BreadcrumbComponent-SLEXUkLP.js";import{P as T}from"./PrimaryButton-DlFlN8ri.js";import{$ as w}from"./jquery-lBFf_FWV.js";import{_ as B}from"./DateRangeComponent-Bg4ue0ne.js";import{g as O,h as J}from"./helpers-DuKOIRnZ.js";import{_ as C}from"./TextInput-CqiqMc8i.js";import{C as $}from"./CustomSelectComponent-TsvI6l3X.js";import"./ApplicationLogo-M_mRncSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={key:0},Y={class:"flex mb-5"},Z={__name:"SummaryReportComponent",setup(A){const s=i(["",""]),c=i(""),l=i(!1),d=[{name:"preview",label:"Preview"},{name:"test",label:"Test Display Pdf"},{name:"export",label:"Export PDF"},{name:"exportExcel",label:"Export Excel"}],n=()=>{!Array.isArray(s.value)||!s.value.length||s.value[0]===""&&s.value[1]===""?c.value="Please select a date range.":c.value=""};P(s,()=>{n()});const _=()=>({reportName:"Summary Report Preview",reportType:"summaryReport",startDate:s.value[0],endDate:s.value[1]}),b=async y=>{if(n(),c.value)return;l.value=!0;const m=_();if(y=="exportExcel"){const v=s.value[0],f=s.value[1],h=route("reports.newSummaryReport",{dateFrom:v,dateTo:f});await O(h,m)}else{const v={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(m)))}`,test:route("reports.generateReportPreview","summaryReport"),export:route("reports.exportPDF",m.reportType)};await J(y,m,v,"summary_report")}l.value=!1};return(y,m)=>(u(),p("div",null,[m[1]||(m[1]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Summary Report")],-1)),l.value?(u(),U(E,{key:1,class:"mt-32 mb-32"})):(u(),p("div",X,[e("div",Y,[r(B,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=v=>s.value=v),label:"Date",additionalErrorMessage:c.value},null,8,["modelValue","additionalErrorMessage"])]),(u(),p(V,null,N(d,v=>r(T,{key:v.name,class:"mr-5",onClick:f=>b(v.name)},{default:x(()=>[k(S(v.label),1)]),_:2},1032,["onClick"])),64))]))]))}},ee={key:0},te={class:"flex mb-5"},ae={class:"mb-5"},se={class:"mb-5"},le={__name:"TransactionsReportComponent",setup(A){const s=i(["",""]),c=i([]),l=i([]),d=i(""),n=i(!1),_=i(""),b=i([]),y=i([]),m=i([]),v=[{name:"preview",label:"Preview"},{name:"test",label:"Test Display Pdf"},{name:"export",label:"Export PDF"},{name:"exportExcel",label:"Export Excel"}],f=()=>{!Array.isArray(s.value)||!s.value.length||s.value[0]===""&&s.value[1]===""?d.value="Please select a date range.":d.value=""};P(s,()=>{f()});const h=()=>({reportName:"Transactions Report Preview",reportType:"transactionReport",startDate:s.value[0],endDate:s.value[1],payment_to:l.value.join(","),claim_ids_filters:c.value.join(",")}),I=async o=>{if(f(),d.value)return;n.value=!0;const a=h();if(o=="exportExcel"){const t=s.value[0],R=s.value[1],F=route("reports.transactionsReport",{dateFrom:t,dateTo:R});await O(F,a)}else{const t={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(a)))}`,test:route("reports.generateReportPreview",a.reportType),export:route("reports.exportPDF",a.reportType)};await J(o,a,t,"transactions_report")}n.value=!1},M=async()=>{n.value=!0;try{const{data:o}=await axios.get(route("paymentReceiver.listNameAndId"));b.value=o}catch(o){_.value=o}finally{n.value=!1}},L=async()=>{n.value=!0;let o=route("claims.listIds");const a=l.value=="All"?"":l.value;if(a!==""){const t=new URLSearchParams({payment_to:a});o+=`?${t.toString()}`}try{const{data:t}=await axios.get(o);y.value=t,g()}catch(t){_.value=t}finally{n.value=!1}},g=async()=>{n.value=!0;const a=(l.value.length===0?["All"]:l.value).flatMap(t=>y.value[t]||[]);m.value=a,n.value=!1,c.value=[]};return P(l,(o,a)=>{g()},{deep:!0}),j(()=>{M(),L()}),(o,a)=>(u(),p("div",null,[a[3]||(a[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),n.value?(u(),U(E,{key:1,class:"mt-32 mb-32"})):(u(),p("div",ee,[e("div",te,[r(B,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),label:"Date",additionalErrorMessage:d.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",ae,[r(C,{for:"payment_to",value:"Payment Receivers"}),r($,{choices:b.value,modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),label:"Payment Receivers",choicesIsObject:!0,allowAllChoice:!0,allowMultiChoice:!0},null,8,["choices","modelValue"])]),e("div",se,[r(C,{for:"claim_ids_filters",value:"Payment IDs"}),r($,{choices:m.value,allowMultiChoice:!0,modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t),label:"Payment IDs",allowAllChoice:!0},null,8,["choices","modelValue"])]),(u(),p(V,null,N(v,t=>r(T,{key:t.name,class:"mr-5",onClick:R=>I(t.name)},{default:x(()=>[k(S(t.label),1)]),_:2},1032,["onClick"])),64))]))]))}},oe={key:0},re={class:"flex mb-5"},ne={class:"mb-5"},ie={class:"mb-5"},ce={__name:"PaymentDetailReportComponent",setup(A){const s=i(["",""]),c=i([]),l=i([]),d=i(""),n=i(!1),_=i(""),b=i([]),y=i([]),m=i([]),v=[{name:"preview",label:"Preview"},{name:"test",label:"Test Display Pdf"},{name:"export",label:"Export PDF"},{name:"exportExcel",label:"Export Excel"}],f=()=>{!Array.isArray(s.value)||!s.value.length||s.value[0]===""&&s.value[1]===""?d.value="Please select a date range.":d.value=""};P(s,()=>{f()});const h=()=>({reportName:"Payment Detail Report",reportType:"paymentDetailReport",startDate:s.value[0],endDate:s.value[1],payment_to:l.value.join(","),claim_ids_filters:c.value.join(",")}),I=async o=>{if(f(),d.value)return;n.value=!0;const a=h();if(o=="exportExcel"){const t=s.value[0],R=s.value[1],F=route("reports.paymentDetailReport",{dateFrom:t,dateTo:R});await O(F,a)}else{const t={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(a)))}`,test:route("reports.generateReportPreview",a.reportType),export:route("reports.exportPDF",a.reportType)};await J(o,a,t,"payment_detail")}n.value=!1},M=async()=>{n.value=!0;try{const{data:o}=await axios.get(route("paymentReceiver.listNameAndId"));b.value=o}catch(o){_.value=o}finally{n.value=!1}},L=async()=>{n.value=!0;let o=route("claims.listIds");const a=l.value=="All"?"":l.value;if(a!==""){const t=new URLSearchParams({payment_to:a});o+=`?${t.toString()}`}try{const{data:t}=await axios.get(o);y.value=t,g()}catch(t){_.value=t}finally{n.value=!1}},g=async()=>{n.value=!0;const a=(l.value.length===0?["All"]:l.value).flatMap(t=>y.value[t]||[]);m.value=a,n.value=!1};return P(l,(o,a)=>{g(),c.value=[]},{deep:!0}),j(()=>{M(),L()}),(o,a)=>(u(),p("div",null,[a[3]||(a[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),n.value?(u(),U(E,{key:1,class:"mt-32 mb-32"})):(u(),p("div",oe,[e("div",re,[r(B,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),label:"Date",additionalErrorMessage:d.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",ne,[r(C,{for:"payment_to",value:"Payment Receiver"}),r($,{choices:b.value,modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t),label:"Payment Receiver",choicesIsObject:!0,allowAllChoice:!0},null,8,["choices","modelValue"])]),e("div",ie,[r(C,{for:"claim_ids_filters",value:"Payment ID"}),r($,{choices:m.value,modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t),label:"Payment ID",allowAllChoice:!0},null,8,["choices","modelValue"])]),(u(),p(V,null,N(v,t=>r(T,{key:t.name,class:"mr-5",onClick:R=>I(t.name)},{default:x(()=>[k(S(t.label),1)]),_:2},1032,["onClick"])),64))]))]))}},de={class:"flex justify-between content-center"},ue={key:0},me={key:0},pe={key:1},ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},ye={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},fe={class:"w-full md:w-3/4 bg-white"},_e={class:"space-y-4"},be={class:"tab-display","tab-name":"summaryReport"},xe={class:"flex items-center"},he={class:"flex-1 p-4"},ge={class:"space-y-4"},Re={class:"tab-display","tab-name":"transactionsReport"},we={class:"flex items-center"},Pe={class:"flex-1 p-4"},De={class:"space-y-4"},Ce={class:"tab-display","tab-name":"paymentDetailReport"},$e={class:"flex items-center"},Ve={class:"flex-1 p-4"},ke={key:1},Ee={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Te={class:"flex justify-center"},We={__name:"Reports",setup(A){const s=i(!1);return j(()=>{const c=w(".tab-btn"),l=w(".tab-display"),d="active bg-violet-500 text-white";l.hide(),c.first().addClass(d),l.first().show(),w("body").on("click",".tab-btn",function(){l.hide(),c.removeClass(d),w(this).addClass(d),l.filter(`[tab-name="${w(this).attr("tab-name")}"]`).show()})}),(c,l)=>(u(),p(V,null,[r(D(z),{title:"Reports"}),r(q,null,H({default:x(()=>[D(W)().value?(u(),p("div",ue,[s.value?(u(),p("div",me,[r(E,{class:"mt-32"})])):(u(),p("div",pe,[e("div",ve,[e("div",ye,[l[0]||(l[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",fe,[e("div",_e,[e("div",be,[e("div",xe,[e("div",he,[r(Z)])])])]),e("div",ge,[e("div",Re,[e("div",we,[e("div",Pe,[r(le)])])])]),e("div",De,[e("div",Ce,[e("div",$e,[e("div",Ve,[r(ce)])])])])])])])]))])):(u(),p("div",ke,[e("div",Ee,[r(K),e("div",Te,[r(D(G),{href:c.route("dashboard")},{default:x(()=>[r(T,{class:"p-4"},{default:x(()=>l[1]||(l[1]=[k("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[D(W)().value?{name:"header",fn:x(()=>[e("div",de,[r(Q,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{We as default};

import{a as o,o as r,g as c,b as e,l as w,C as X,w as j,e as S,f as Z,u as l,n as ee,F as I,j as E,k as M,c as h,q as te,z,d as se,h as f,t as y,m as oe,P as ae}from"./app-BI87N5FI.js";import{_ as re,g as le,i as ne}from"./AuthenticatedLayout-CiQPwnhR.js";import{L as A,N as K}from"./LoadingComponent-BnEUPFoC.js";import{_ as ie}from"./StatusLabel-HF3Mpf2I.js";import{I as W,_ as ce}from"./BreadcrumbComponent-CHrBAFQF.js";import{S as D,d as Y,f as ue,b as B,a as U,e as de}from"./sweetalert2.esm.all-MrQZAUHb.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as N}from"./PrimaryButton-Bo-xq8_b.js";import{_ as R}from"./InputError-BHf2LlTW.js";import{_ as q,a as F}from"./TextInput-1Xi0Pfb1.js";import{M as Q}from"./Modal-XIE_Hk8z.js";import"./ApplicationLogo-M_mRncSF.js";var me={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function H(n){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},v=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(s).filter(function(m){return Object.getOwnPropertyDescriptor(s,m).enumerable}))),v.forEach(function(m){pe(n,m,s[m])})}return n}function pe(n,a,s){return a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n}var L=function(a,s){var v=H({},a,s.attrs);return o(W,H({},v,{icon:me}),null)};L.displayName="CloseOutlined";L.inheritAttrs=!1;var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function G(n){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?Object(arguments[a]):{},v=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(s).filter(function(m){return Object.getOwnPropertyDescriptor(s,m).enumerable}))),v.forEach(function(m){ve(n,m,s[m])})}return n}function ve(n,a,s){return a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n}var x=function(a,s){var v=G({},a,s.attrs);return o(W,G({},v,{icon:fe}),null)};x.displayName="InfoCircleOutlined";x.inheritAttrs=!1;const ye={},be={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function _e(n,a){return r(),c("svg",be,a[0]||(a[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))}const P=J(ye,[["render",_e]]),xe={},ge={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function he(n,a){return r(),c("svg",ge,a[0]||(a[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)]))}const V=J(xe,[["render",he]]),we={key:0},ke={key:1},Ce={class:"grid grid-cols-1 gap-4 mt-4"},je={class:"text-right mt-6"},$e={__name:"PaymentVoucherForm",props:{claimId:{type:String,required:!0}},setup(n,{emit:a}){const s=n,v=a,m=w(!1),k=w(!1),C=()=>k.value=!k.value,b=X({paymentVoucherNumber:"",paymentDate:""}),i=async()=>{m.value=!0;try{const u=new FormData;for(const[$,O]of Object.entries(b.data()))u.append($,O);const p=route("claims.paymentCompleted",s.claimId);await axios["post"](p,u),D.fire({title:"Success!",text:"Payment details updated successfully",icon:"success",confirmButtonText:"OK"}),C(),b.reset(),v("createComplete",!0)}catch(u){u.response&&u.response.data.errors?b.errors=u.response.data.errors:D.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}finally{m.value=!1}};return(u,p)=>(r(),c("section",null,[o(N,{onClick:C},{default:j(()=>p[2]||(p[2]=[S("Payment Completed")])),_:1}),o(Q,{show:k.value,onClose:C},{default:j(()=>[e("form",{onSubmit:Z(i,["prevent"]),class:"p-6 space-y-4"},[m.value?(r(),c("div",we,[o(A,{class:"mt-32 mb-32"})])):(r(),c("div",ke,[p[4]||(p[4]=e("h2",{class:"text-lg font-medium"},"Payment Voucher Details",-1)),e("div",Ce,[e("div",null,[o(q,{for:"paymentVoucherNumber",value:"Payment Voucher Number"}),o(F,{id:"paymentVoucherNumber",modelValue:l(b).paymentVoucherNumber,"onUpdate:modelValue":p[0]||(p[0]=g=>l(b).paymentVoucherNumber=g),class:"mt-1 block w-full",required:"",placeholder:"Enter Voucher Number"},null,8,["modelValue"]),o(R,{message:l(b).errors.paymentVoucherNumber,class:"mt-2"},null,8,["message"])]),e("div",null,[o(q,{for:"paymentDate",value:"Payment Date"}),o(F,{id:"paymentDate",type:"date",modelValue:l(b).paymentDate,"onUpdate:modelValue":p[1]||(p[1]=g=>l(b).paymentDate=g),class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(R,{message:l(b).errors.paymentDate,class:"mt-2"},null,8,["message"])])]),e("div",je,[e("button",{type:"button",onClick:C,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),o(N,{type:"submit",class:ee(["ms-3",{"opacity-25":l(b).processing}]),disabled:l(b).processing},{default:j(()=>p[3]||(p[3]=[S(" Submit ")])),_:1},8,["class","disabled"])])]))],32)]),_:1},8,["show"])]))}},Oe={class:"bg-white p-4 pt-2 rounded-lg img-modal"},Pe={class:"flex flex-col"},Ve={class:"flex justify-between"},De={class:"flex justify-center items-center img-loader-container"},Se=["src","alt"],Ne={__name:"ImageLoader",props:{src:{type:String,required:!0},alt:{type:String,default:"Image"},id:{type:Number,required:!0}},setup(n){const a=n,s=w(!1),v=w(!1),m=()=>{s.value=!0},k=()=>{v.value=!0},C=w(!1),b=()=>{C.value=!0},i=()=>{C.value=!1},u=async()=>{try{const p=a.src,g=await fetch(p);if(!g.ok)throw new Error("Failed to fetch the image");const $=await g.blob(),O=window.URL.createObjectURL($),d=document.createElement("a");d.href=O,d.download="receipt-document-claim-"+Y(a.id)+".jpg",document.body.appendChild(d),d.click(),d.remove(),window.URL.revokeObjectURL(O)}catch(p){console.error("Error downloading the image:",p)}};return(p,g)=>(r(),c("div",null,[e("div",{class:"text-base cursor-pointer inline text-violet-700 font-bold",onClick:b}," Open "),o(Q,{show:C.value,onClose:i},{default:j(()=>[e("div",Oe,[e("div",Pe,[e("div",Ve,[o(N,{class:"m-3 ml-0",onClick:u},{default:j(()=>g[0]||(g[0]=[S("Download Receipt")])),_:1}),o(l(L),{class:"pb-2 mt-3",onClick:i})]),e("div",De,[v.value?(r(),h(K,{key:1})):(r(),c(I,{key:0},[E(e("img",{onLoad:m,onError:k,src:n.src,alt:n.alt,style:{overflow:"hidden"}},null,40,Se),[[M,s.value]]),E(o(A,{class:"mt-32 mb-32"},null,512),[[M,!s.value]])],64))])])])]),_:1},8,["show"])]))}},Be={class:"flex justify-between content-center"},Ie={key:0},Ae={key:1},Le={key:0,class:"py-12 m-5 mt-0 mb-0 pt-5"},Te={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ee={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Me={class:"flex justify-between content-center w-full"},ze={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Ue={class:"mb-4"},Re={class:"flex justify-between"},qe={class:"text-base"},Fe={class:"mb-4"},He={class:"flex justify-between"},Ge={class:"text-base"},Ke={class:"mb-4"},We={class:"flex justify-between"},Ye={class:"text-base"},Je={class:"mb-4"},Qe={class:"flex justify-between"},Xe={class:"text-base capitalize"},Ze={class:"mb-4"},et={class:"flex justify-between"},tt={class:"text-base"},st={class:"mb-4"},ot={class:"flex justify-between"},at={class:"text-base"},rt={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},lt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},nt={class:"flex justify-between content-center w-full"},it={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},ct={class:"mb-4"},ut={class:"flex justify-between"},dt={class:"text-base"},mt={class:"mb-4"},pt={class:"flex justify-between"},ft={class:"text-base"},vt={class:"mb-4"},yt={class:"flex justify-between"},bt={class:"text-base"},_t={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},xt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},gt={class:"flex justify-between content-center w-full"},ht={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},wt={class:"mb-4"},kt={class:"flex justify-between"},Ct={class:"mb-4"},jt={class:"flex justify-between"},$t={class:"text-base"},Ot={class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Pt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Vt={class:"flex justify-between content-center w-full"},Dt={key:0,class:"p-6 border-gray-300 mb-4 w-full"},St={class:"relative list-none"},Nt=["value"],Bt={class:"flex justify-between flex-col sm:flex-row"},It={class:"font-bold"},At={class:"text-gray-500"},Lt={key:0,class:"bg-white max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Tt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Et={class:"flex justify-between content-center w-full"},Mt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},zt={class:"mb-4"},Ut={class:"flex justify-between"},Rt={class:"text-base"},qt={class:"mb-4"},Ft={class:"flex justify-between"},Ht={class:"text-base"},Gt={key:1,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Kt={key:2,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Wt={key:1},Yt={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Jt={class:"flex justify-center"},cs={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(n){const a=w(!0),s=w([]),v=w(null),m=w(null),k=n,C=route("claims.fetchData",k.id);w("0"),w({});const b=[{title:"Claims",link:route("dashboard")},{title:"#"+Y(k.id)}],i=w({details:!0,amount:!0,receipt:!0,approvalHistory:!0,paymentVoucher:!0}),u=d=>{i.value[d]=!i.value[d]},p=()=>{D.fire({title:"Are you sure?",text:"Are you sure you want to approve this Claim?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((d,t)=>{g()})})},g=async()=>{try{const d=await z.post(route("claims.approveClaim",k.id));$(),D.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(d){D.fire({title:"Error!",text:d.response?d.response.data.error||"There was an error while approving the claim. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},$=async()=>{try{const{data:d}=await z.get(C);s.value=d.data,m.value=d}catch(d){v.value=d}finally{a.value=!1}};te(()=>{$()});const O=()=>{$()};return(d,t)=>(r(),c(I,null,[o(l(se),{title:"Claim Details"}),o(re,null,{header:j(()=>[e("div",Be,[o(ce,{breadcrumbs:b}),m.value?(r(),h(ie,{key:0,class:"text-sm inline-block",status:s.value.status},null,8,["status"])):f("",!0)])]),default:j(()=>{var T;return[a.value?(r(),c("div",Ie,[o(A,{class:"mt-32"})])):(r(),c("div",Ae,[m.value?(r(),c("div",Le,[e("div",Te,[e("div",Ee,[e("div",Me,[t[10]||(t[10]=e("h2",null,"Details",-1)),i.value.details?(r(),h(P,{key:0,class:"cursor-pointer",onClick:t[0]||(t[0]=_=>u("details"))})):f("",!0),i.value.details?f("",!0):(r(),h(V,{key:1,class:"cursor-pointer",onClick:t[1]||(t[1]=_=>u("details"))}))])]),i.value.details?(r(),c("div",ze,[e("div",Ue,[e("div",Re,[t[11]||(t[11]=e("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),o(l(x),{class:"text-gray-400"})]),e("p",qe,y(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),e("div",Fe,[e("div",He,[t[12]||(t[12]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),o(l(x),{class:"text-gray-400"})]),e("p",Ge,y(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),e("div",Ke,[e("div",We,[t[13]||(t[13]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),o(l(x),{class:"text-gray-400"})]),e("p",Ye,y(l(ue)(s.value.payment_type)??"-"),1)]),e("div",Je,[e("div",Qe,[t[14]||(t[14]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),o(l(x),{class:"text-gray-400"})]),e("p",Xe,y(((T=s.value.payment_category)==null?void 0:T.name)||"-"),1)]),e("div",Ze,[e("div",et,[t[15]||(t[15]=e("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),o(l(x),{class:"text-gray-400"})]),e("p",tt,y(s.value.purpose??"-"),1)]),e("div",st,[e("div",ot,[t[16]||(t[16]=e("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),o(l(x),{class:"text-gray-400"})]),e("p",at,y(l(B)(s.value.created_at)??"-"),1)])])):f("",!0)]),e("div",rt,[e("div",lt,[e("div",nt,[t[17]||(t[17]=e("h2",null,"Amount",-1)),i.value.amount?(r(),h(P,{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=_=>u("amount"))})):f("",!0),i.value.amount?f("",!0):(r(),h(V,{key:1,class:"cursor-pointer",onClick:t[3]||(t[3]=_=>u("amount"))}))])]),i.value.amount?(r(),c("div",it,[e("div",ct,[e("div",ut,[t[18]||(t[18]=e("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),o(l(x),{class:"text-gray-400"})]),e("p",dt,y(s.value.currency_object.short_code)+" "+y(l(U)(s.value.amount)),1)]),e("div",mt,[e("div",pt,[t[19]||(t[19]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Percent",-1)),o(l(x),{class:"text-gray-400"})]),e("p",ft,y(Number(s.value.gst_amount)===0?"-":s.value.gst_percent+" %"),1)]),e("div",vt,[e("div",yt,[t[20]||(t[20]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),o(l(x),{class:"text-gray-400"})]),e("p",bt,y(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+l(U)(s.value.gst_amount)),1)])])):f("",!0)]),e("div",_t,[e("div",xt,[e("div",gt,[t[21]||(t[21]=e("h2",null,"Receipt",-1)),i.value.receipt?(r(),h(P,{key:0,class:"cursor-pointer",onClick:t[4]||(t[4]=_=>u("receipt"))})):f("",!0),i.value.receipt?f("",!0):(r(),h(V,{key:1,class:"cursor-pointer",onClick:t[5]||(t[5]=_=>u("receipt"))}))])]),i.value.receipt?(r(),c("div",ht,[e("div",wt,[e("div",kt,[t[22]||(t[22]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),o(l(x),{class:"text-gray-400"})]),e("div",null,[o(Ne,{src:`/${s.value.receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])])]),e("div",Ct,[e("div",jt,[t[23]||(t[23]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),o(l(x),{class:"text-gray-400"})]),e("p",$t,y(l(B)(s.value.receipt_date)??"-"),1)])])):f("",!0)]),e("div",Ot,[e("div",Pt,[e("div",Vt,[t[24]||(t[24]=e("h2",null,"Approval History",-1)),i.value.approvalHistory?(r(),h(P,{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=_=>u("approvalHistory"))})):f("",!0),i.value.approvalHistory?f("",!0):(r(),h(V,{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=_=>u("approvalHistory"))}))])]),i.value.approvalHistory?(r(),c("div",Dt,[e("ul",St,[t[26]||(t[26]=e("div",{class:"absolute top-3 left-[21px] w-[2px] bg-gray-300 h-full z-1"},null,-1)),(r(!0),c(I,null,oe(s.value.status_log,_=>(r(),c("li",{class:"relative pl-10 mb-4",key:_.id,value:_},[t[25]||(t[25]=e("div",{class:"absolute left-[12px] top-1 w-5 h-5 rounded-full",style:{"background-color":"#d4d9df"}},[e("div",{class:"absolute left-[4px] top-1 w-3 h-3 rounded-full",style:{"background-color":"#7367F0"}})],-1)),e("div",Bt,[e("p",It,y(_.status),1),e("p",At,y(l(de)(_.created_at)),1)]),e("p",null,y(_.name),1)],8,Nt))),128))])])):f("",!0)]),s.value.status_id>=3?(r(),c("div",Lt,[e("div",Tt,[e("div",Et,[t[27]||(t[27]=e("h2",null,"Payment Voucher",-1)),i.value.paymentVoucher?(r(),h(P,{key:0,class:"cursor-pointer",onClick:t[8]||(t[8]=_=>u("paymentVoucher"))})):f("",!0),i.value.paymentVoucher?f("",!0):(r(),h(V,{key:1,class:"cursor-pointer",onClick:t[9]||(t[9]=_=>u("paymentVoucher"))}))])]),i.value.paymentVoucher?(r(),c("div",Mt,[e("div",zt,[e("div",Ut,[t[28]||(t[28]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Voucher Number",-1)),o(l(x),{class:"text-gray-400"})]),e("p",Rt,y(s.value.payment_voucher_number??"-"),1)]),e("div",qt,[e("div",Ft,[t[29]||(t[29]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Date",-1)),o(l(x),{class:"text-gray-400"})]),e("p",Ht,y(l(B)(s.value.payment_date)??"-"),1)])])):f("",!0)])):f("",!0),s.value.status_id<2&&l(le)().value==s.value.next_approval_level?(r(),c("div",Gt,[o(N,{onClick:p},{default:j(()=>t[30]||(t[30]=[S("Approve Claim")])),_:1})])):f("",!0),s.value.status_id==2&&l(ne)().value?(r(),c("div",Kt,[o($e,{claimId:k.id,onCreateComplete:O},null,8,["claimId"])])):f("",!0)])):(r(),c("div",Wt,[e("div",Yt,[o(K),e("div",Jt,[o(l(ae),{href:d.route("dashboard")},{default:j(()=>[o(N,{class:"p-4"},{default:j(()=>t[31]||(t[31]=[S("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]))]}),_:1})],64))}};export{cs as default};

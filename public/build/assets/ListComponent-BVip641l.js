import{l as n,D as z,p as I,o as a,g as l,a as i,w as V,e as O,b as o,F as A,m as P,j as q,t as h,q as B,c as L,A as D,h as S,y as H,r as J,n as E}from"./app-aM69IDsn.js";import{L as G,N as M}from"./sweetalert2.esm.all-vFncgdV7.js";import{_ as Q}from"./Modal-C6fo55aG.js";import{P as j}from"./PrimaryButton-GD9_oimd.js";import{_ as K}from"./InputError-BPMAAmSR.js";import{_ as R,a as T}from"./TextInput-BS9jK6QB.js";const W={class:"p-6"},X={key:0},Y={key:1},Z={class:"grid grid-cols-1 gap-4 mt-4"},ee=["onUpdate:modelValue","id"],te={value:"",disabled:"",selected:""},ae=["value"],se={key:0},le={class:"flex"},oe=["value"],ne=["disabled"],de={key:2,class:"text-right mt-6"},re={__name:"SortAndFilterComponent",props:{sortAndFilters:{type:Array,default:[]},allowSorting:{type:Boolean,default:!0}},setup(m,{emit:k}){const v=n(!1),w=n(!1),c=n([]),r=n(""),p=n(""),d=n(null),b=k,x=m,_=async s=>{try{const{data:e}=await axios.get(s);return e}catch(e){d.value=e}},U=()=>{v.value=!0},F=()=>{v.value=!1},$=()=>{let s=c.value;s.sort_by=r.value,s.sort_order=p.value,b("filtersUpdated",s),F()},u=s=>s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),f=n([]),y=n([]);return z(r,(s,e)=>{s!==e&&(p.value="asc"),s==""&&(p.value="")}),I(async()=>{for(const s of x.sortAndFilters)if(f.value[s.name]="",y.value[s.name]="",s.field_type==="select"&&s.api){const e=await _(s.api);s.options=e}}),(s,e)=>(a(),l("section",null,[i(j,{onClick:U},{default:V(()=>e[2]||(e[2]=[O("Sort And Filters")])),_:1}),i(Q,{show:v.value,onClose:F},{default:V(()=>[o("div",W,[w.value?(a(),l("div",X,[i(G,{class:"mt-32 mb-32"})])):(a(),l("div",Y,[e[5]||(e[5]=o("h2",{class:"text-lg font-medium text-gray-900"},"Sort And Filters",-1)),o("div",Z,[(a(!0),l(A,null,P(m.sortAndFilters,(t,C)=>(a(),l("div",{key:C},[i(R,{for:t.field_name,value:t.display_name??u(t.field_name)},null,8,["for","value"]),t.field_type==="select"?q((a(),l("select",{key:0,"onUpdate:modelValue":g=>c.value[t.field_name]=g,id:t.field_name,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[o("option",te,"Select "+h(t.field_name),1),(a(!0),l(A,null,P(t.options,(g,N)=>(a(),l("option",{key:N,value:N},h(g),9,ae))),128))],8,ee)),[[B,c.value[t.field_name]]]):t.field_type==="number"?(a(),L(T,{key:1,modelValue:c.value[t.field_name],"onUpdate:modelValue":g=>c.value[t.field_name]=g,id:t.field_name,type:"number",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:D($,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])):(a(),L(T,{key:2,modelValue:c.value[t.field_name],"onUpdate:modelValue":g=>c.value[t.field_name]=g,id:t.field_name,type:"text",placeholder:"Enter value",class:"mt-1 block w-full",required:"",onKeydown:D($,["enter"])},null,8,["modelValue","onUpdate:modelValue","id"])),i(K,{message:y.value[t.field_name],class:"mt-2"},null,8,["message"])]))),128)),x.allowSorting?(a(),l("div",se,[i(R,{for:"sortOption",value:"Sort By"}),o("div",le,[q(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),id:"sortOption",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[e[3]||(e[3]=o("option",{value:"",selected:""},"-",-1)),(a(!0),l(A,null,P(m.sortAndFilters,(t,C)=>(a(),l("option",{key:C,value:t.field_name},h(t.display_name??u(t.field_name)),9,oe))),128))],512),[[B,r.value]]),q(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t),id:"sortOrder",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",disabled:!r.value,required:""},e[4]||(e[4]=[o("option",{value:"",disabled:"",selected:""},"Select Sorting Order",-1),o("option",{value:"asc"},"Ascending",-1),o("option",{value:"desc"},"Descending",-1)]),8,ne),[[B,p.value]])]),i(K,{message:y.value.sortOption,class:"mt-2"},null,8,["message"])])):S("",!0)])])),w.value?S("",!0):(a(),l("div",de,[o("button",{type:"button",onClick:F,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest"}," Close "),i(j,{onClick:$,class:"ms-3"},{default:V(()=>e[6]||(e[6]=[O(" Apply Filters ")])),_:1})]))])]),_:1},8,["show"])]))}},ie={key:0},ue={key:1},ce={key:0},me={key:0,class:"block mt-12"},ve={class:"grid md:grid-cols gap-4 mb-5"},pe={key:2},_e={class:"flex justify-between w-full pt-6"},fe={class:"flex justify-end flex-1"},ye=["disabled"],ge=["disabled"],be={key:1},Ae={__name:"ListComponent",props:{apiUrl:{type:String,required:!0},createCompleteSignal:{type:Number,default:!1},hasPaddingTop:{type:Boolean,default:!0},sortAndFilters:{type:Array,required:!1}},setup(m){const k=n(!0),v=n([]),w=n([]),c=n(null);n(null),n(null);const r=n(null),p=n(9),d=n(1),b=n(0),x=m;z(()=>x.createCompleteSignal,u=>{u&&_(d.value)});const _=async(u=1)=>{k.value=!0;try{const f=new URLSearchParams({limit:p.value,page:u});Object.entries(w.value).forEach(([s,e])=>{e&&f.append(s,e)});const{data:y}=await H.get(`${x.apiUrl}?${f.toString()}`);v.value=y.data.data,r.value=y.data,b.value=y.data.last_page}catch(f){c.value=f}finally{k.value=!1}};I(()=>{_(d.value)});const U=()=>{d.value>=b.value||(d.value+=1,_(d.value))},F=()=>{d.value<=1||(d.value-=1,_(d.value))},$=u=>{w.value=u,_()};return(u,f)=>(a(),l("div",null,[k.value?(a(),l("div",ie,[i(G,{class:"mt-20 mb-20"})])):(a(),l("div",ue,[r.value?(a(),l("div",ce,[m.sortAndFilters?(a(),L(re,{key:0,class:"mt-6 mb-6",sortAndFilters:m.sortAndFilters,onFiltersUpdated:$},null,8,["sortAndFilters"])):(a(),l(A,{key:1},[m.hasPaddingTop?(a(),l("div",me)):S("",!0)],64)),o("div",ve,[J(u.$slots,"list-view",{data:v.value,apiResponse:r.value})]),v.value.length===0||v.value==[]?(a(),l("div",pe,[i(M)])):S("",!0),o("div",_e,[o("div",null,[o("p",null,"Showing "+h(r.value.from??0)+" to "+h(r.value.to??0)+" of "+h(r.value.total)+" entries",1)]),o("div",fe,[o("button",{class:E(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==1}]]),onClick:F,disabled:d.value==1},"Previous Page",10,ye),o("button",{class:E(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==b.value}]]),disabled:d.value==b.value,onClick:U},"Next Page",10,ge)])])])):(a(),l("div",be,[i(M)]))]))]))}};export{Ae as _};

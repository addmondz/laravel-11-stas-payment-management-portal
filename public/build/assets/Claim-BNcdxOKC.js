import{a as i,o as m,g as f,b as e,k as g,C as ge,l as Q,m as re,c as T,w as A,e as U,u as o,f as _e,t as h,j as $,p as z,F as k,q as j,s as X,h as V,x as be,n as F,y as he,i as xe,P as Ce,d as we,z as Z}from"./app-D5C2AmWC.js";import{i as N,c as Se,_ as Pe,g as Oe}from"./AuthenticatedLayout-f56pfp2g.js";import{I as M,_ as $e}from"./BreadcrumbComponent-W-Vy6AaF.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as I,f as oe,a as Ae,b as ke}from"./helpers-CfCDD1Y8.js";import{_ as Te}from"./StatusLabel-CyxogGag.js";import{_ as je,a as ie}from"./ListComponent-CJQuvEPM.js";import{_ as P}from"./InputError-Dvy4q7sj.js";import{_ as O,a as E}from"./TextInput-DZF0X0XS.js";import{M as Ve}from"./Modal-BPAM9ovg.js";import{P as K}from"./PrimaryButton-B3H0bTRv.js";import{L as Fe}from"./NotFound-pXncx0VD.js";import{C as Ie}from"./CustomSelectComponent-DRhyZ5PC.js";import"./DateRangeComponent-BH27KR5E.js";var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function ee(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Me(a,u,l[u])})}return a}function Me(a,s,l){return s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}var L=function(s,l){var r=ee({},s,l.attrs);return i(M,ee({},r,{icon:Ue}),null)};L.displayName="DeleteOutlined";L.inheritAttrs=!1;var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};function te(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){De(a,u,l[u])})}return a}function De(a,s,l){return s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}var q=function(s,l){var r=te({},s,l.attrs);return i(M,te({},r,{icon:Be}),null)};q.displayName="EditOutlined";q.inheritAttrs=!1;var ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"};function ae(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Ee(a,u,l[u])})}return a}function Ee(a,s,l){return s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}var H=function(s,l){var r=ae({},s,l.attrs);return i(M,ae({},r,{icon:ze}),null)};H.displayName="FieldTimeOutlined";H.inheritAttrs=!1;var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 240H144c-17.7 0-32 14.3-32 32v608c0 17.7 14.3 32 32 32h608c17.7 0 32-14.3 32-32V272c0-17.7-14.3-32-32-32zm-40 600H184V312h528v528zm168-728H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h576v576c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM300 550h296v64H300z"}}]},name:"switcher",theme:"outlined"};function le(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(l).filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable}))),r.forEach(function(u){Le(a,u,l[u])})}return a}function Le(a,s,l){return s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}var R=function(s,l){var r=le({},s,l.attrs);return i(M,le({},r,{icon:Ne}),null)};R.displayName="SwitcherOutlined";R.inheritAttrs=!1;const qe={},He={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function Re(a,s){return m(),f("svg",He,s[0]||(s[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const Ge=ne(qe,[["render",Re]]),Je={class:"space-y-6"},Ye={key:0},We={key:1},Qe={class:"text-lg font-medium text-gray-900"},Xe={class:"grid grid-cols-1 gap-4 mt-4"},Ze=["value"],Ke=["value"],et={class:"col-span-2"},tt={class:"flex items-center space-x-4 mt-1"},at={class:"flex space-x-4"},lt={class:"inline-flex items-center"},st={class:"inline-flex items-center"},rt={key:0},nt={class:"col-span-2"},ot={class:"col-span-2"},it={key:2,class:"text-right mt-6"},ce={__name:"CreateClaimForm",props:{claimData:{type:Object,default:null}},setup(a,{emit:s}){const l=a,r=g(!1),u=g(!1),x=g(!1),C=s,_=g([]),y=g([]),c=g([]),v=g(""),b=g(null),t=ge({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",gst_value:"",purpose:"",receipt_date:"",receipt:null}),S=g(0),ue=g(),G=g(),J=()=>{t.gst==1?(Y(),x.value=!0):x.value=!1},me=async(d=1)=>{try{const{data:n}=await axios.get(route("variables.fetchesGst"));S.value=n}catch(n){b.value=n}},Y=()=>{t.gst_value=(t.amount*S.value/100).toFixed(2)},W=()=>{r.value=!0},B=()=>{r.value=!1},pe=async()=>{u.value=!0;try{const d=new FormData;t.receipt!=null&&d.append("receipt",t.receipt);for(const[w,D]of Object.entries(t.data()))w!="receipt"&&d.append(w,D);const n=l.claimData?route("claims.update",l.claimData.id):route("claims.store"),p=await axios.post(n,d,{headers:{"Content-Type":"multipart/form-data"}});I.fire({title:"Success!",text:p.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"},willClose:()=>{location.reload()}}),B(),t.reset(),C("createComplete",!0),u.value=!1}catch(d){d.response&&d.response.data.errors?t.errors=d.response.data.errors:I.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),u.value=!1}},ve=async()=>{try{const{data:d}=await axios.get(route("currency.listShortCode"));_.value=d}catch(d){b.value=d}},fe=async()=>{try{const{data:d}=await axios.get(route("paymentCategory.listChoice"));c.value=d}catch(d){b.value=d}},ye=async()=>{try{const{data:d}=await axios.get(route("paymentReceiver.listNameAndId"));y.value=d;for(let n=0;n<y.value.length;n++)if(y.value[n].id==t.payment_to){G.value=y.value[n].name;break}}catch(d){b.value=d}};return Q(()=>v.value,(d,n)=>{if(t&&"payment_to"in t){t.payment_to=d.toString();const p=y.value.find(D=>D.id===parseInt(d)),w=p?p.currency_id:null;t.currency=w}},{immediate:!0}),Q(()=>l.claimData,d=>{d?(he(()=>{t.payment_to=d.payment_receiver_id}),t.payment_type=d.payment_type,t.payment_category=d.payment_category_id,t.currency=d.currency_id,t.amount=d.amount,t.gst=d.gst_amount!=0?"1":"0",t.gst_value=d.gst_amount,t.purpose=d.purpose,t.receipt_date=d.receipt_date,d.gst_amount!=0&&(x.value=!0)):t.reset()},{immediate:!0}),re(()=>{me(),ve(),fe(),ye()}),(d,n)=>(m(),f("section",Je,[l.claimData==null?(m(),T(K,{key:0,onClick:W},{default:A(()=>n[11]||(n[11]=[U("Create Payment")])),_:1})):(m(),T(o(q),{key:1,class:"mb-4 mr-2",onClick:W})),i(Ve,{show:r.value,onClose:B},{default:A(()=>[e("form",{onSubmit:_e(pe,["prevent"]),class:"p-5"},[u.value?(m(),f("div",Ye,[i(Fe,{class:"mt-32 mb-32"})])):(m(),f("div",We,[e("h2",Qe,h(l.claimData!=null?"Edit Payment":"Create New Payment"),1),e("div",Xe,[e("div",null,[i(O,{for:"payment_to",value:"Payment To"}),i(Ie,{choices:y.value,modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=p=>v.value=p),isEdit:l.claimData!=null,label:l.claimData!=null?G.value:"Payment To",choicesIsObject:!0,ref_key:"customSelect",ref:ue},null,8,["choices","modelValue","isEdit","label"]),i(P,{message:o(t).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"payment_type",value:"Payment Type"}),$(e("select",{id:"payment_type","onUpdate:modelValue":n[1]||(n[1]=p=>o(t).payment_type=p),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},n[12]||(n[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[z,o(t).payment_type]]),i(P,{message:o(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"payment_category",value:"Payment Category"}),$(e("select",{id:"currency","onUpdate:modelValue":n[2]||(n[2]=p=>o(t).payment_category=p),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[n[13]||(n[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(m(!0),f(k,null,j(c.value,(p,w)=>(m(),f("option",{key:w,value:w,class:"capitalize"},h(p),9,Ze))),128))],512),[[z,o(t).payment_category]]),i(P,{message:o(t).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"currency",value:"Currency"}),$(e("select",{id:"currency","onUpdate:modelValue":n[3]||(n[3]=p=>o(t).currency=p),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[n[14]||(n[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(m(!0),f(k,null,j(_.value,(p,w)=>(m(),f("option",{key:w,value:w},h(p),9,Ke))),128))],512),[[z,o(t).currency]]),i(P,{message:o(t).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[i(O,{for:"amount",value:"Amount (incl. GST if any)"}),i(E,{id:"amount",modelValue:o(t).amount,"onUpdate:modelValue":n[4]||(n[4]=p=>o(t).amount=p),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:"",onKeyup:Y},null,8,["modelValue"]),i(P,{message:o(t).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",et,[i(O,{value:"GST"}),e("div",tt,[e("div",at,[e("label",lt,[$(e("input",{type:"radio","onUpdate:modelValue":n[5]||(n[5]=p=>o(t).gst=p),value:"1",class:"form-radio",onChange:J},null,544),[[X,o(t).gst]]),n[15]||(n[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",st,[$(e("input",{type:"radio","onUpdate:modelValue":n[6]||(n[6]=p=>o(t).gst=p),value:"0",class:"form-radio",onChange:J},null,544),[[X,o(t).gst]]),n[16]||(n[16]=e("span",{class:"ml-2"},"No",-1))])]),x.value?(m(),f("div",rt,[i(E,{id:"gst_value",modelValue:o(t).gst_value,"onUpdate:modelValue":n[7]||(n[7]=p=>o(t).gst_value=p),type:"number",step:"0.01",placeholder:"Enter GST amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])):V("",!0)]),i(P,{message:o(t).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",nt,[i(O,{for:"purpose",value:"Purpose of Payment"}),$(e("textarea",{id:"purpose","onUpdate:modelValue":n[8]||(n[8]=p=>o(t).purpose=p),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[be,o(t).purpose]]),i(P,{message:o(t).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[i(O,{for:"receipt_date",value:"Date of Receipt / Invoice"}),i(E,{id:"receipt_date",modelValue:o(t).receipt_date,"onUpdate:modelValue":n[9]||(n[9]=p=>o(t).receipt_date=p),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),i(P,{message:o(t).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",ot,[i(O,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:n[10]||(n[10]=p=>o(t).receipt=p.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer"},null,32),i(P,{message:o(t).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),u.value?V("",!0):(m(),f("div",it,[e("button",{type:"button",onClick:B,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),i(K,{type:"submit",class:F(["ms-3",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:A(()=>n[17]||(n[17]=[U(" Submit Payment ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},ct={class:"flex"},dt={key:0,class:"flex justify-center items-center"},ut={class:"flex-1"},mt={class:"grid lg:grid-cols-8 grid-cols-2 gap-x-4 gap-y-4 relative isolate"},pt={class:"col"},vt={class:""},ft={class:"col"},yt={class:""},gt={class:"col"},_t={class:"capitalize"},bt={class:"col"},ht={class:"whitespace-nowrap overflow-hidden text-ellipsis"},xt={class:"col"},Ct={class:"relative group"},wt={class:"truncate cursor-pointer"},St={class:"absolute invisible group-hover:visible left-0 -top-2 transform -translate-y-full w-max max-w-xs px-4 py-3 bg-gray-900/95 backdrop-blur-sm text-white text-sm font-medium rounded-lg shadow-xl transform-gpu scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-200 ease-out before:content-[''] before:absolute before:left-4 before:top-full before:border-8 before:border-x-transparent before:border-b-transparent before:border-t-gray-900/95 z-[9999]"},Pt={class:"break-words"},Ot={class:"col"},$t={class:"truncate"},At={class:"col"},kt={class:"col"},Tt={class:""},jt={class:"flex justify-center items-center space-x-4"},Vt=["disabled"],Ft={class:"cursor-pointer hover:text-violet-600 transition-all"},de={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1},isSelected:{type:Boolean,required:!1,default:!1}},emits:["update-selected-list"],setup(a,{emit:s}){const l=s,r=a,u=y=>{l("update-selected-list",{isSelected:y,id:r.data.id})},x=xe(()=>r.data.status_id>=2),C=()=>{I.fire({title:"Are you sure?",text:"Are you sure you want to delete this Payment?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((y,c)=>{_()})})},_=async()=>{var y,c;try{const v=await axios.post(route("claims.delete",r.data.id));l("createComplete",!0),I.fire({title:"Success!",text:"The Payment has been successfully deleted.",icon:"success",confirmButtonText:"OK"})}catch(v){console.log(v),I.fire({title:"Error!",text:((c=(y=v.response)==null?void 0:y.data)==null?void 0:c.error)||"An unexpected error occurred while deleteing the payment.",icon:"error",confirmButtonText:"OK"})}};return g(!1),(y,c)=>{var v,b;return m(),f("div",{class:F(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-visible bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":a.isSelected}])},[e("div",ct,[a.showGroupActions&&!o(N)().value?(m(),f("div",dt,[i(je,{onUpdateSelected:u,isSelected:a.isSelected,class:"block mr-5"},null,8,["isSelected"])])):V("",!0),e("div",ut,[e("div",mt,[e("div",pt,[c[0]||(c[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",vt,h(a.data.id),1)]),e("div",ft,[c[1]||(c[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment To",-1)),e("div",yt,h((v=a.data.payment_receiver)==null?void 0:v.name),1)]),e("div",gt,[c[2]||(c[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",_t,h(a.data.payment_category_name),1)]),e("div",bt,[c[3]||(c[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",ht,h(a.data.currency)+" "+h(o(oe)(a.data.amount)),1)]),e("div",xt,[c[4]||(c[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Purpose",-1)),e("div",Ct,[e("div",wt,h(a.data.purpose),1),e("div",St,[e("div",Pt,h(a.data.purpose),1)])])]),e("div",Ot,[c[5]||(c[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",$t,h((b=a.data.created_user)==null?void 0:b.name),1)]),e("div",At,[c[6]||(c[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),i(Te,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:a.data.status,name:a.data.status_name},null,8,["status","name"])]),e("div",kt,[c[7]||(c[7]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",Tt,h(o(Ae)(a.data.created_at)),1)])])]),e("div",jt,[o(Se)().value?(m(),T(o(L),{key:0,onClick:C,class:F(["mb-3 mr-2",{invisible:x.value}]),disabled:x.value},null,8,["class","disabled"])):V("",!0),e("div",{class:F({invisible:x.value}),disabled:x.value},[i(ce,{claimData:a.data},null,8,["claimData"])],10,Vt),e("button",Ft,[i(o(Ce),{href:y.route("claim.details",a.data.id)},{default:A(()=>[i(Ge,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},It={key:0,class:"bg-white p-5 rounded-xl"},Ut={class:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-3 gap-6"},Mt={class:"mb-2"},Bt={class:"flex justify-between"},Dt={class:"font-bold"},se={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(a,{emit:s}){const l=s,r=g([]),u=({isSelected:C,id:_})=>{r.value=C?[...new Set([...r.value,_])]:r.value.filter(y=>y!==_)},x=C=>{l("createComplete",!0)};return(C,_)=>(m(),f("div",null,[i(ie,{apiUrl:C.route("claims.list"),createCompleteSignal:a.createCompleteSignal,sortAndFilters:a.sortAndFilters,allowSorting:!0,showFiltersOutside:!0},{"list-view":A(({data:y,apiResponse:c,fullApiResponse:v})=>[Object.keys(v.total_sum_by_country).length?(m(),f("div",It,[_[1]||(_[1]=e("h2",{class:"mb-4"},"Total Amount",-1)),e("div",Ut,[(m(!0),f(k,null,j(v.total_sum_by_country,(b,t)=>(m(),f("div",{key:t,class:"bg-gray-100 p-6 rounded-xl shadow-md transition-all duration-500 border"},[e("p",Mt,h(b.country_name)+" ("+h(t)+")",1),e("div",Bt,[_[0]||(_[0]=e("span",null,"Amount:",-1)),e("span",null,[e("span",Dt,h(b.currency)+" "+h(o(oe)(b.amount)),1)])])]))),128))])])):V("",!0),(m(!0),f(k,null,j(y,b=>(m(),T(de,{createComplete:a.createCompleteSignal,onCreateComplete:x,onUpdateSelectedList:u,key:b.id,data:b},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])]))}},zt={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},emits:["pendingClaimsCount"],setup(a,{emit:s}){const l=s,r=g([]),u=g(1),x=c=>{l("pendingClaimsCount",c)},C=c=>{r.value=c},_=({isSelected:c,id:v})=>{c?r.value=[...new Set([...r.value,v])]:r.value=r.value.filter(S=>S!==v);const b=[...r.value].sort(),t=[...allIds.value].sort();selectAll.value=JSON.stringify(b)===JSON.stringify(t)},y=c=>{l("createComplete",!0)};return(c,v)=>(m(),f("div",null,[(m(),T(ie,{apiUrl:c.route("claims.listPendingApproval"),createCompleteSignal:a.createCompleteSignal,key:u.value,allowSorting:!0,sortAndFilters:a.sortAndFilters,allowSelectAll:!0,selectedIds:r.value,"onUpdate:wholeSelectedIds":C,showFiltersOutside:!0},{"list-view":A(({data:b,apiResponse:t})=>[U(h(x(t.total))+" ",1),(m(!0),f(k,null,j(b,S=>(m(),T(de,{createComplete:a.createCompleteSignal,onCreateComplete:y,onUpdateSelectedList:_,key:S.id,showGroupActions:!0,data:S,isSelected:r.value.includes(S.id)},null,8,["createComplete","data","isSelected"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters","selectedIds"]))]))}},Et={class:"flex justify-between content-center"},Nt={class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},Lt={key:0},qt={class:"inline-flex max-w-full"},Ht=["onClick"],Rt={class:"flex"},Gt={class:"flex justify-center items-center"},Jt={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},Yt={class:"w-full bg-black-50 p-1 rounded-xl"},Wt={key:1},Qt={__name:"Claim",setup(a){const s=g(2),l=g(0),r=g(localStorage.getItem("activeTab")||"allClaims"),u=g([{name:"allClaims",label:"All Payments",icon:R},{name:"pendingApproval",label:N().value?"Pending Action":"Pending Approval",icon:H}]),x=v=>r.value===v?"active bg-violet-400 text-white font-bold":"hover:bg-gray-200 text-black bg-white",C=v=>{r.value=v,localStorage.setItem("activeTab",v)},_=()=>{s.value=Math.floor(Math.random()*100)+1},y=v=>{l.value=v},c=g([{display_name:"Payment ID",field_name:"id",field_type:"string"},{field_name:"payment_type",field_type:"select",options:{reimbursement:"Reimbursement",external_payment:"External Payment"}},{field_name:"approval_level",field_type:"select",options:{0:"L1",1:"L2",2:"L3"}},{display_name:"Payment Category",field_name:"payment_category_id",field_type:"select",api:route("paymentCategory.listChoice")},{display_name:"Payment To",field_name:"payment_receiver_id",field_type:"select",api:route("paymentReceiver.listIdToName")},{display_name:"Currency",field_name:"currency_id",field_type:"select",api:route("currency.listShortCode")},{display_name:"Created Date",field_name:"created_at",field_type:"date_range"},{field_name:"status",field_type:"select",api:route("approvalStatus.list")}]);return re(()=>{const v=localStorage.getItem("activeTab");v&&(r.value=v)}),(v,b)=>(m(),f(k,null,[i(o(we),{title:"Payments"}),i(Pe,null,{header:A(()=>[e("div",Et,[i($e,{breadcrumbs:[{title:"Payments"}]}),i(ce,{onCreateComplete:_})])]),default:A(()=>[e("div",Nt,[o(Oe)().value||o(N)().value?(m(),f("div",Lt,[e("div",qt,[(m(!0),f(k,null,j(u.value,t=>(m(),f("span",{key:t.name,class:F([["tab-btn p-2 px-5 text-md flex justify-center items-center",x(t.name)],"flex-1 pt-5 pb-5 border border-violet-500 flex flex-col sm:min-w-60"]),onClick:S=>C(t.name)},[e("div",Rt,[U(h(t.label)+" ",1),e("div",Gt,[t.name=="pendingApproval"&&l.value!=0&&l.value!=null?(m(),f("span",Jt,h(o(ke)(l.value)),1)):V("",!0)])])],10,Ht))),128))]),e("div",Yt,[$(e("div",null,[i(zt,{createCompleteSignal:s.value,onPendingClaimsCount:y,onCreateComplete:_,sortAndFilters:c.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[Z,r.value==="pendingApproval"]]),$(e("div",null,[i(se,{createCompleteSignal:s.value,onCreateComplete:_,sortAndFilters:c.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[Z,r.value==="allClaims"]])])])):(m(),f("div",Wt,[i(se,{createCompleteSignal:s.value,sortAndFilters:c.value,onCreateComplete:_},null,8,["createCompleteSignal","sortAndFilters"])]))])]),_:1})],64))}},ua=ne(Qt,[["__scopeId","data-v-2463eeb0"]]);export{ua as default};

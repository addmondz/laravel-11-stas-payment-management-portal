import{S as y,b as M}from"./sweetalert2.esm.all-CKHE_-mc.js";import{k as h,C as S,l as j,m as O,o as v,g as f,a,w as b,e as D,t as n,b as s,f as F,u as t,h as $,j as C,x as k,F as T,p as z,s as K,n as L}from"./app-SEWvw0Uz.js";import{_ as u,a as _,b as p}from"./TextInput-h7bnaiwj.js";import{_ as I}from"./Modal-VsCZarg6.js";import{P as A}from"./PrimaryButton-hO6usjpA.js";const Y={class:"space-y-6"},G={class:"text-lg font-medium text-gray-900"},H={class:"grid grid-cols-1 gap-4 mt-4"},J={key:0,class:"text-gray-500 font-bold"},Q={key:0,class:"text-gray-500 font-bold"},W={class:"col-span-2"},X={class:"flex items-center space-x-4 mt-1"},Z={class:"inline-flex items-center"},ss={class:"inline-flex items-center"},es=["value"],ts={class:"text-right mt-6"},os={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(c,{emit:x}){const i=c,m=h(!1),V=x,d=h([]),P=h(null),e=S({name:"",email:"",password:"",password_confirmation:"",isAdmin:"0",approvalRole:""});j(()=>i.userData,l=>{l?(e.name=l.name,e.email=l.email,e.isAdmin=l.role==="admin"?"1":"0",e.approvalRole=l.approval_role_id):e.reset()},{immediate:!0});const U=()=>{m.value=!1},g=()=>{m.value=!m.value},N=()=>e.password!==e.password_confirmation?(e.errors.password_confirmation="Passwords do not match",!1):(e.errors.password_confirmation="",!0),R=async()=>{if(!N()){y.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const l=new FormData;for(const[q,B]of Object.entries(e.data()))l.append(q,B);const o=i.userData?route("user.update",i.userData.id):route("user.create"),w=await axios["post"](o,l);y.fire({title:"Success!",text:i.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),U(),e.reset(),V("createComplete",!0)}catch(l){console.log(l),l.response&&l.response.data.errors?e.errors=l.response.data.errors:y.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},E=async()=>{try{const{data:l}=await axios.get(route("approvalRoles.list"));d.value=l}catch(l){P.value=l}};return O(()=>{E()}),(l,o)=>(v(),f("section",Y,[a(A,{onClick:g},{default:b(()=>[D(n(i.userData?"Edit":"Create"),1)]),_:1}),a(I,{show:m.value,onClose:g},{default:b(()=>[s("form",{onSubmit:F(R,["prevent"]),class:"p-6 space-y-4"},[s("h2",G,n(i.userData?"Edit User":"Create a New User"),1),s("div",H,[s("div",null,[a(u,{for:"name",value:"Name"}),a(_,{id:"name",modelValue:t(e).name,"onUpdate:modelValue":o[0]||(o[0]=r=>t(e).name=r),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(p,{message:t(e).errors.name,class:"mt-2"},null,8,["message"])]),s("div",null,[a(u,{for:"email",value:"Email"}),a(_,{id:"email",type:"email",modelValue:t(e).email,"onUpdate:modelValue":o[1]||(o[1]=r=>t(e).email=r),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(p,{message:t(e).errors.email,class:"mt-2"},null,8,["message"])]),s("div",null,[a(u,{for:"password",value:"Password"}),a(_,{id:"password",type:"password",modelValue:t(e).password,"onUpdate:modelValue":o[2]||(o[2]=r=>t(e).password=r),placeholder:"Password",class:"mt-1 block w-full",required:!i.userData||t(e).password_confirmation!==""},null,8,["modelValue","required"]),a(p,{message:t(e).errors.password,class:"mt-2"},null,8,["message"]),i.userData?(v(),f("small",J,"Please leave empty if you are not chaing the password")):$("",!0)]),s("div",null,[a(u,{for:"password_confirmation",value:"Confirm Password"}),a(_,{id:"password_confirmation",type:"password",modelValue:t(e).password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=r=>t(e).password_confirmation=r),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!i.userData||t(e).password!==""},null,8,["modelValue","required"]),a(p,{message:t(e).errors.password_confirmation},null,8,["message"]),i.userData?(v(),f("small",Q,"Please leave empty if you are not chaing the password")):$("",!0)]),s("div",null,[s("div",W,[a(u,{value:"Is Admin"}),s("div",X,[s("label",Z,[C(s("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=r=>t(e).isAdmin=r),value:"1",class:"form-radio"},null,512),[[k,t(e).isAdmin]]),o[7]||(o[7]=s("span",{class:"ml-2"},"Yes",-1))]),s("label",ss,[C(s("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=r=>t(e).isAdmin=r),value:"0",class:"form-radio"},null,512),[[k,t(e).isAdmin]]),o[8]||(o[8]=s("span",{class:"ml-2"},"No",-1))])]),a(p,{message:t(e).errors.isAdmin,class:"mt-2"},null,8,["message"])])])]),s("div",null,[a(u,{for:"payment_category",value:"Approval Role"}),C(s("select",{id:"currency","onUpdate:modelValue":o[6]||(o[6]=r=>t(e).approvalRole=r),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[o[9]||(o[9]=s("option",{value:""},"None",-1)),(v(!0),f(T,null,z(d.value,(r,w)=>(v(),f("option",{key:w,value:w,class:"capitalize"},n(r),9,es))),128))],512),[[K,t(e).approvalRole]]),a(p,{message:t(e).errors.payment_category,class:"mt-2"},null,8,["message"])]),s("div",ts,[s("button",{type:"button",onClick:g,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),a(A,{type:"submit",class:L(["ms-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing},{default:b(()=>[D(n(i.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}},as={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ls={class:"flex"},rs={class:"flex-1"},is={class:"grid lg:grid-cols-5 grid-cols-2 gap-x-4 gap-y-4"},ds={class:"col"},ns={class:"row"},cs={class:"col"},ms={class:"text-[14px]"},us={class:"col"},ps={class:"row"},vs={class:"col"},fs={class:"text-[14px] truncate"},_s={class:"col"},xs={class:"row"},gs={class:"col"},ws={class:"text-[14px] capitalize"},ys={class:"col"},hs={class:"row"},bs={class:"col"},Cs={class:"text-[14px]"},Vs={class:"col"},Ds={class:"row"},$s={class:"col"},ks={class:"text-[14px]"},As={class:"flex justify-center items-center"},Ps={class:"cursor-pointer hover:text-violet-600 transition-all"},Bs={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(c,{emit:x}){const i=x,m=()=>{i("createComplete",!0)};return(V,d)=>(v(),f("div",as,[s("div",ls,[s("div",rs,[s("div",is,[s("div",ds,[d[0]||(d[0]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),s("div",ns,[s("div",cs,[s("div",ms,n(c.data.email),1)])])]),s("div",us,[d[1]||(d[1]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),s("div",ps,[s("div",vs,[s("div",fs,n(c.data.name),1)])])]),s("div",_s,[d[2]||(d[2]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),s("div",xs,[s("div",gs,[s("div",ws,n(c.data.role),1)])])]),s("div",ys,[d[3]||(d[3]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),s("div",hs,[s("div",bs,[s("div",Cs,n(c.data.privilege_name??"-"),1)])])]),s("div",Vs,[d[4]||(d[4]=s("div",{class:"row"},[s("div",{class:"col-auto"},[s("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),s("div",Ds,[s("div",$s,[s("div",ks,n(t(M)(c.data.created_at)),1)])])])])]),s("div",As,[s("button",Ps,[a(os,{userData:c.data,onCreateComplete:m},null,8,["userData"])])])])]))}};export{os as _,Bs as a};

import{k as c,C as Y,D as G,l as z,o as u,g as m,a as t,w as V,e as E,t as v,b as e,f as H,u as a,h as S,j as R,q as L,F as q,p as K,m as J,n as j,i as Q,x as W,d as X,c as Z}from"./app-4V7fhS2R.js";import{_ as ee}from"./AuthenticatedLayout-EaXkpAy8.js";import{b as se,L as te,N as M}from"./LoadingComponent-C5eB2J9M.js";import{_ as b,a as D,b as $}from"./TextInput-BaQ0Qvo5.js";import{_ as ae}from"./Modal-D75FtwiL.js";import{P as O}from"./PrimaryButton-BOrugIjy.js";import{S as F,_ as T}from"./FilterDropdown-DUmnTFsk.js";import{_ as oe}from"./BreadcrumbComponent-BVxckR1E.js";import"./ApplicationLogo-M_mRncSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"space-y-6"},re={class:"text-lg font-medium text-gray-900"},ie={class:"grid grid-cols-1 gap-4 mt-4"},ne={key:0,class:"text-gray-500 font-bold"},de={key:0,class:"text-gray-500 font-bold"},ce={class:"col-span-2"},ue={class:"flex items-center space-x-4 mt-1"},me={class:"inline-flex items-center"},ve={class:"inline-flex items-center"},pe=["value"],_e={class:"text-right mt-6"},I={__name:"UserForm",props:{userData:{type:Object,default:null}},setup(p,{emit:y}){const i=p,r=c(!1),P=y,C=c([]),x=c(null),s=Y({name:"",email:"",password:"",password_confirmation:"",isAdmin:"0",approvalRole:""});G(()=>i.userData,o=>{o?(s.name=o.name,s.email=o.email,s.isAdmin=o.role==="admin"?"1":"0",s.approvalRole=o.privilege_id):s.reset()},{immediate:!0});const g=()=>{r.value=!1},k=()=>{r.value=!r.value},d=()=>s.password!==s.password_confirmation?(s.errors.password_confirmation="Passwords do not match",!1):(s.errors.password_confirmation="",!0),w=async()=>{if(!d()){F.fire({title:"Error!",text:"Passwords do not match.",icon:"error",confirmButtonText:"OK"});return}try{const o=new FormData;for(const[A,N]of Object.entries(s.data()))o.append(A,N);const l=i.userData?route("user.update",i.userData.id):route("user.create"),h=await axios["post"](l,o);F.fire({title:"Success!",text:i.userData?"User updated successfully":"User created successfully",icon:"success",confirmButtonText:"OK"}),g(),s.reset(),P("createComplete",!0)}catch(o){console.log(o),o.response&&o.response.data.errors?s.errors=o.response.data.errors:F.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},U=async()=>{try{const{data:o}=await axios.get(route("approvalRoles.list"));C.value=o}catch(o){x.value=o}};return z(()=>{U()}),(o,l)=>(u(),m("section",le,[t(O,{onClick:k},{default:V(()=>[E(v(i.userData?"Edit User":"Create User"),1)]),_:1}),t(ae,{show:r.value,onClose:k},{default:V(()=>[e("form",{onSubmit:H(w,["prevent"]),class:"p-6 space-y-4"},[e("h2",re,v(i.userData?"Edit User":"Create a New User"),1),e("div",ie,[e("div",null,[t(b,{for:"name",value:"Name"}),t(D,{id:"name",modelValue:a(s).name,"onUpdate:modelValue":l[0]||(l[0]=n=>a(s).name=n),placeholder:"Full Name",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t($,{message:a(s).errors.name,class:"mt-2"},null,8,["message"])]),e("div",null,[t(b,{for:"email",value:"Email"}),t(D,{id:"email",type:"email",modelValue:a(s).email,"onUpdate:modelValue":l[1]||(l[1]=n=>a(s).email=n),placeholder:"Email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t($,{message:a(s).errors.email,class:"mt-2"},null,8,["message"])]),e("div",null,[t(b,{for:"password",value:"Password"}),t(D,{id:"password",type:"password",modelValue:a(s).password,"onUpdate:modelValue":l[2]||(l[2]=n=>a(s).password=n),placeholder:"Password",class:"mt-1 block w-full",required:!i.userData||a(s).password_confirmation!==""},null,8,["modelValue","required"]),t($,{message:a(s).errors.password,class:"mt-2"},null,8,["message"]),i.userData?(u(),m("small",ne,"Please leave empty if you are not chaing the password")):S("",!0)]),e("div",null,[t(b,{for:"password_confirmation",value:"Confirm Password"}),t(D,{id:"password_confirmation",type:"password",modelValue:a(s).password_confirmation,"onUpdate:modelValue":l[3]||(l[3]=n=>a(s).password_confirmation=n),placeholder:"Confirm Password",class:"mt-1 block w-full",required:!i.userData||a(s).password!==""},null,8,["modelValue","required"]),t($,{message:a(s).errors.password_confirmation},null,8,["message"]),i.userData?(u(),m("small",de,"Please leave empty if you are not chaing the password")):S("",!0)]),e("div",null,[e("div",ce,[t(b,{value:"Is Admin"}),e("div",ue,[e("label",me,[R(e("input",{type:"radio","onUpdate:modelValue":l[4]||(l[4]=n=>a(s).isAdmin=n),value:"1",class:"form-radio"},null,512),[[L,a(s).isAdmin]]),l[7]||(l[7]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",ve,[R(e("input",{type:"radio","onUpdate:modelValue":l[5]||(l[5]=n=>a(s).isAdmin=n),value:"0",class:"form-radio"},null,512),[[L,a(s).isAdmin]]),l[8]||(l[8]=e("span",{class:"ml-2"},"No",-1))])]),t($,{message:a(s).errors.isAdmin,class:"mt-2"},null,8,["message"])])])]),e("div",null,[t(b,{for:"payment_category",value:"Approval Role"}),R(e("select",{id:"currency","onUpdate:modelValue":l[6]||(l[6]=n=>a(s).approvalRole=n),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm"},[l[9]||(l[9]=e("option",{value:""},"None",-1)),(u(!0),m(q,null,K(C.value,(n,h)=>(u(),m("option",{key:h,value:h,class:"capitalize"},v(n),9,pe))),128))],512),[[J,a(s).approvalRole]]),t($,{message:a(s).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",_e,[e("button",{type:"button",onClick:k,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),t(O,{type:"submit",class:j(["ms-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:V(()=>[E(v(i.userData?"Update":"Submit"),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}},fe={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ge={class:"flex"},ye={class:"flex-1"},xe={class:"grid lg:grid-cols-6 grid-cols-2 gap-x-4 gap-y-4"},we={class:"col"},he={class:"row"},be={class:"col"},$e={class:""},ke={class:"col"},Ve={class:"row"},Ce={class:"col"},De={class:""},Pe={class:"col"},Ue={class:"row"},Ae={class:"col"},Ne={class:""},Re={class:"col"},Fe={class:"row"},Se={class:"col"},qe={class:"capitalize"},je={class:"col"},Be={class:"row"},Ee={class:"col"},Le={class:""},Me={class:"col"},Oe={class:"row"},Te={class:"col"},ze={class:""},Ke={class:"flex justify-center items-center"},Ie={class:"cursor-pointer hover:text-violet-600 transition-all"},Ye={__name:"UsersListTemplate",props:{data:{type:Object,required:!0}},setup(p){const y=p;return c(!1),Q(()=>y.order.items.reduce((i,r)=>i+r.quantity,0)),(i,r)=>(u(),m("div",fe,[e("div",ge,[e("div",ye,[e("div",xe,[e("div",we,[r[0]||(r[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"ID")])],-1)),e("div",he,[e("div",be,[e("div",$e,v(p.data.id),1)])])]),e("div",ke,[r[1]||(r[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Email")])],-1)),e("div",Ve,[e("div",Ce,[e("div",De,v(p.data.email),1)])])]),e("div",Pe,[r[2]||(r[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Name")])],-1)),e("div",Ue,[e("div",Ae,[e("div",Ne,v(p.data.name),1)])])]),e("div",Re,[r[3]||(r[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Role")])],-1)),e("div",Fe,[e("div",Se,[e("div",qe,v(p.data.role),1)])])]),e("div",je,[r[4]||(r[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Approval Privillage")])],-1)),e("div",Be,[e("div",Ee,[e("div",Le,v(p.data.privilege_name??"-"),1)])])]),e("div",Me,[r[5]||(r[5]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",Oe,[e("div",Te,[e("div",ze,v(a(se)(p.data.created_at)),1)])])])])]),e("div",Ke,[e("button",Ie,[t(I,{userData:p.data},null,8,["userData"])])])])]))}},Ge={class:"flex justify-between content-center"},He={key:0},Je={key:1},Qe={key:0,class:"py-12"},We={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0"},Xe={class:"grid md:grid-cols-4 gap-4 mb-5 hidden"},Ze={class:"grid md:grid-cols gap-4 mb-5"},es={key:0},ss={class:"flex justify-between w-full"},ts={class:"flex justify-end flex-1"},as=["disabled"],os=["disabled"],ls={key:1},fs={__name:"User",setup(p){const y=c(!0),i=c([]),r=c([]),P=c([]),C=c(null),x=c(null),s=c(null),g=c(null),k=c(9),d=c(1),w=c(0),U=route("users.list"),o=async(B=1)=>{try{const f=new URLSearchParams({limit:k.value,page:B,brand:x.value??"",category:s.value??""}).toString(),{data:_}=await W.get(`${U}?${f}`);i.value=_.data.data,g.value=_.data,w.value=_.data.last_page}catch(f){C.value=f}finally{y.value=!1}};z(()=>{o(d.value)});const l=()=>{d.value>=w.value||(d.value+=1,o(d.value))},n=()=>{d.value<=1||(d.value-=1,o(d.value))},h=()=>{d.value=1,o(d.value)},A=()=>{x.value=null,s.value=null,h()},N=()=>{o(d.value)};return(B,f)=>(u(),m(q,null,[t(a(X),{title:"Users"}),t(ee,null,{header:V(()=>[e("div",Ge,[t(oe,{breadcrumbs:[{title:"Users"}]}),t(I,{onCreateComplete:N})])]),default:V(()=>[y.value?(u(),m("div",He,[t(te,{class:"mt-32"})])):(u(),m("div",Je,[g.value?(u(),m("div",Qe,[e("div",We,[e("div",Xe,[t(T,{class:"w-full mr-5",label:"a brand",modelValue:x.value,"onUpdate:modelValue":f[0]||(f[0]=_=>x.value=_),options:P.value},null,8,["modelValue","options"]),t(T,{class:"w-full mr-5",label:"a category",modelValue:s.value,"onUpdate:modelValue":f[1]||(f[1]=_=>s.value=_),options:r.value},null,8,["modelValue","options"]),e("button",{class:"bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",onClick:A},"Reset Filters"),e("button",{class:"bg-violet-500 hover:bg-violet-700 text-white py-2 px-4 rounded ml-2",onClick:h},"Search")]),e("div",Ze,[(u(!0),m(q,null,K(i.value,_=>(u(),Z(Ye,{key:_.id,data:_},null,8,["data"]))),128))]),i.value.length===0||i.value==[]?(u(),m("div",es,[t(M)])):S("",!0),e("div",ss,[e("div",null,[e("p",null,"Showing "+v(g.value.from??0)+" to "+v(g.value.to??0)+" of "+v(g.value.total)+" entries ",1)]),e("div",ts,[e("button",{class:j(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==1}]]),onClick:n,disabled:d.value==1},"Previous Page",10,as),e("button",{class:j(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":d.value==w.value}]]),disabled:d.value==w.value,onClick:l},"Next Page",10,os)])])])])):(u(),m("div",ls,[t(M)]))]))]),_:1})],64))}};export{fs as default};

import{o as i,g as d,b as e,k as m,i as K,t as v,u as o,a as s,w as V,P as Y,C as H,l as O,e as N,f as J,j as P,m as q,F as T,p as D,q as M,s as Q,n as B,h as I,x as W,d as X,c as Z}from"./app-1Z8-0ieN.js";import{_ as ee}from"./AuthenticatedLayout-CTxPhiEH.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as se,a as R,b as ae,L as G,S as A,N as E}from"./sweetalert2.esm.all-DGRDATcK.js";import{_ as oe}from"./StatusLabel-Cmt8iEjZ.js";import{_ as w,b as h,a as F}from"./TextInput-B3mTvAA3.js";import{_ as le}from"./Modal-Bh0bWHcc.js";import{P as z}from"./PrimaryButton-DMla4g2d.js";import{_ as re}from"./FilterDropdown-DWbJ_T-u.js";import{_ as ne}from"./BreadcrumbComponent-C7VOl9IQ.js";import"./ApplicationLogo-M_mRncSF.js";const ie={},de={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function ce(c,_){return i(),d("svg",de,_[0]||(_[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const ue=te(ie,[["render",ce]]),me={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},ve={class:"flex"},pe={class:"flex-1"},ye={class:"grid lg:grid-cols-8 grid-cols-2 gap-x-4 gap-y-4"},_e={class:"col"},ge={class:"row"},fe={class:"col"},xe={class:""},be={class:"col"},we={class:"row"},he={class:"col"},Ce={class:""},$e={class:"col"},ke={class:"row"},Pe={class:"col"},Ve={class:"capitalize"},Se={class:"col"},Te={class:"row"},Ue={class:"col"},je={class:"whitespace-nowrap overflow-hidden text-ellipsis"},qe={class:"col"},De={class:"row"},Be={class:"col"},Fe={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Le={class:"col"},Ne={class:"row"},Me={class:"col"},Re={class:""},Ae={class:"col"},Ee={class:"row"},ze={class:"col"},Oe={class:"col"},Ie={class:"row"},Ge={class:"col"},Ke={class:""},Ye={class:"flex justify-center items-center"},He={class:"cursor-pointer hover:text-violet-600 transition-all"},Je={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0}},setup(c){const _=c;return m(!1),K(()=>_.order.items.reduce((p,l)=>p+l.quantity,0)),(p,l)=>(i(),d("div",me,[e("div",ve,[e("div",pe,[e("div",ye,[e("div",_e,[l[0]||(l[0]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"ID")])],-1)),e("div",ge,[e("div",fe,[e("div",xe,v(c.data.id),1)])])]),e("div",be,[l[1]||(l[1]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type")])],-1)),e("div",we,[e("div",he,[e("div",Ce,v(o(se)(c.data.payment_type)),1)])])]),e("div",$e,[l[2]||(l[2]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category")])],-1)),e("div",ke,[e("div",Pe,[e("div",Ve,v(c.data.payment_category_name),1)])])]),e("div",Se,[l[3]||(l[3]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount")])],-1)),e("div",Te,[e("div",Ue,[e("div",je,v(c.data.currency)+" "+v(o(R)(c.data.amount)),1)])])]),e("div",qe,[l[4]||(l[4]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Tax Amount")])],-1)),e("div",De,[e("div",Be,[e("div",Fe,v(c.data.gst_amount==0?"-":c.data.currency+" "+o(R)(c.data.gst_amount)),1)])])]),e("div",Le,[l[5]||(l[5]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Purpose")])],-1)),e("div",Ne,[e("div",Me,[e("div",Re,v(c.data.purpose),1)])])]),e("div",Ae,[l[6]||(l[6]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Status")])],-1)),e("div",Ee,[e("div",ze,[s(oe,{class:"text-xs inline-block w-[120px]",status:c.data.status},null,8,["status"])])])]),e("div",Oe,[l[7]||(l[7]=e("div",{class:"row"},[e("div",{class:"col-auto"},[e("div",{class:"mb-1 text-xs text-gray-500"},"Created At")])],-1)),e("div",Ie,[e("div",Ge,[e("div",Ke,v(o(ae)(c.data.created_at)),1)])])])])]),e("div",Ye,[e("button",He,[s(o(Y),{href:p.route("claim.details",c.data.id)},{default:V(()=>[s(ue,{class:"text-violet-700"})]),_:1},8,["href"])])])])]))}},Qe={class:"space-y-6"},We={key:0},Xe={key:1},Ze={class:"grid grid-cols-1 gap-4 mt-4"},et=["value"],tt=["value"],st={class:"col-span-2"},at={class:"flex items-center space-x-4 mt-1"},ot={class:"inline-flex items-center"},lt={class:"inline-flex items-center"},rt={class:"col-span-2"},nt={class:"col-span-2"},it={key:2,class:"text-right mt-6"},dt={__name:"CreateClaimForm",setup(c,{emit:_}){const p=m(!1),l=m(!1),$=_,S=m([]),k=m([]),f=m(null),a=H({payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),u=()=>{p.value=!0},x=()=>{p.value=!1},U=async()=>{l.value=!0;try{const n=new FormData;n.append("receipt",a.receipt);for(const[r,g]of Object.entries(a.data()))n.append(r,g);const t=await axios.post(route("claims.store"),n,{headers:{"Content-Type":"multipart/form-data"}});A.fire({title:"Success!",text:t.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),x(),a.reset(),$("createComplete",!0),l.value=!1}catch(n){n.response&&n.response.data.errors?a.errors=n.response.data.errors:A.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),l.value=!1}},C=async()=>{try{const{data:n}=await axios.get(route("currency.listShortCode"));S.value=n}catch(n){f.value=n}},j=async()=>{try{const{data:n}=await axios.get(route("paymentCategory.listChoice"));k.value=n}catch(n){f.value=n}};return O(()=>{C(),j()}),(n,t)=>(i(),d("section",Qe,[s(z,{onClick:u},{default:V(()=>t[9]||(t[9]=[N("Create Claim")])),_:1}),s(le,{show:p.value,onClose:x},{default:V(()=>[e("form",{onSubmit:J(U,["prevent"]),class:"p-6"},[l.value?(i(),d("div",We,[s(G,{class:"mt-32 mb-32"})])):(i(),d("div",Xe,[t[15]||(t[15]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Claim",-1)),e("div",Ze,[e("div",null,[s(w,{for:"payment_type",value:"Payment Type"}),P(e("select",{id:"payment_type","onUpdate:modelValue":t[0]||(t[0]=r=>o(a).payment_type=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},t[10]||(t[10]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[q,o(a).payment_type]]),s(h,{message:o(a).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[s(w,{for:"payment_category",value:"Payment Category"}),P(e("select",{id:"currency","onUpdate:modelValue":t[1]||(t[1]=r=>o(a).payment_category=r),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[t[11]||(t[11]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(i(!0),d(T,null,D(k.value,(r,g)=>(i(),d("option",{key:g,value:g,class:"capitalize"},v(r),9,et))),128))],512),[[q,o(a).payment_category]]),s(h,{message:o(a).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[s(w,{for:"currency",value:"Currency"}),P(e("select",{id:"currency","onUpdate:modelValue":t[2]||(t[2]=r=>o(a).currency=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[t[12]||(t[12]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(i(!0),d(T,null,D(S.value,(r,g)=>(i(),d("option",{key:g,value:g},v(r),9,tt))),128))],512),[[q,o(a).currency]]),s(h,{message:o(a).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[s(w,{for:"amount",value:"Amount (incl. GST if any)"}),s(F,{id:"amount",modelValue:o(a).amount,"onUpdate:modelValue":t[3]||(t[3]=r=>o(a).amount=r),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(h,{message:o(a).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",st,[s(w,{value:"GST"}),e("div",at,[e("label",ot,[P(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>o(a).gst=r),value:"1",class:"form-radio"},null,512),[[M,o(a).gst]]),t[13]||(t[13]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",lt,[P(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>o(a).gst=r),value:"0",class:"form-radio"},null,512),[[M,o(a).gst]]),t[14]||(t[14]=e("span",{class:"ml-2"},"No",-1))])]),s(h,{message:o(a).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",rt,[s(w,{for:"purpose",value:"Purpose of Payment"}),P(e("textarea",{id:"purpose","onUpdate:modelValue":t[6]||(t[6]=r=>o(a).purpose=r),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[Q,o(a).purpose]]),s(h,{message:o(a).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[s(w,{for:"receipt_date",value:"Date of Receipt / Invoice"}),s(F,{id:"receipt_date",modelValue:o(a).receipt_date,"onUpdate:modelValue":t[7]||(t[7]=r=>o(a).receipt_date=r),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(h,{message:o(a).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",nt,[s(w,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:t[8]||(t[8]=r=>o(a).receipt=r.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),s(h,{message:o(a).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),l.value?I("",!0):(i(),d("div",it,[e("button",{type:"button",onClick:x,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),s(z,{type:"submit",class:B(["ms-3",{"opacity-25":o(a).processing}]),disabled:o(a).processing},{default:V(()=>t[16]||(t[16]=[N(" Submit Claim ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},ct={class:"flex justify-between content-center"},ut={key:0},mt={key:1},vt={key:0,class:"py-12"},pt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0"},yt={class:"grid md:grid-cols-4 gap-4 mb-5"},_t={class:"grid md:grid-cols gap-4 mb-5"},gt={key:0},ft={class:"flex justify-between w-full"},xt={class:"flex justify-end flex-1"},bt=["disabled"],wt=["disabled"],ht={key:1},Bt={__name:"Claim",setup(c){const _=m(!0),p=m([]),l=m(null),$=m(null),S=m(null),k=m(""),f=m(null),a=m(9),u=m(1),x=m(0),U=route("claims.list"),C=async(L=1)=>{try{const b=new URLSearchParams({limit:a.value,page:L,searchValue:k.value??"",paymentType:$.value??"",category:S.value??""}).toString(),{data:y}=await W.get(`${U}?${b}`);p.value=y.data.data,f.value=y.data,x.value=y.data.last_page}catch(b){l.value=b}finally{_.value=!1}};O(()=>{C(u.value)});const j=()=>{u.value>=x.value||(u.value+=1,C(u.value))},n=()=>{C(u.value)},t=()=>{u.value<=1||(u.value-=1,C(u.value))},r=()=>{u.value=1,C(u.value)},g=()=>{$.value=null,S.value=null,r()};return(L,b)=>(i(),d(T,null,[s(o(X),{title:"Claims"}),s(ee,null,{header:V(()=>[e("div",ct,[s(ne,{breadcrumbs:[{title:"Claims"}]}),s(dt,{onCreateComplete:n})])]),default:V(()=>[_.value?(i(),d("div",ut,[s(G,{class:"mt-32"})])):(i(),d("div",mt,[f.value?(i(),d("div",vt,[e("div",pt,[e("div",yt,[s(re,{class:"w-full mr-5",label:"a Payment Type",modelValue:$.value,"onUpdate:modelValue":b[0]||(b[0]=y=>$.value=y),options:["reimbursement","external_payment"]},null,8,["modelValue"]),s(F,{id:"search",modelValue:k.value,"onUpdate:modelValue":b[1]||(b[1]=y=>k.value=y),placeholder:"Search",class:"text-center"},null,8,["modelValue"]),e("button",{class:"bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",onClick:g},"Reset Filters"),e("button",{class:"bg-violet-500 hover:bg-violet-700 text-white py-2 px-4 rounded ml-2",onClick:r},"Search")]),e("div",_t,[(i(!0),d(T,null,D(p.value,y=>(i(),Z(Je,{key:y.id,data:y},null,8,["data"]))),128))]),p.value.length===0||p.value==[]?(i(),d("div",gt,[s(E)])):I("",!0),e("div",ft,[e("div",null,[e("p",null,"Showing "+v(f.value.from??0)+" to "+v(f.value.to??0)+" of "+v(f.value.total)+" entries ",1)]),e("div",xt,[e("button",{class:B(["bg-white hover:bg-gray-200 text-gray py-2 px-4 rounded ml-2",[{"cursor-not-allowed":u.value==1}]]),onClick:t,disabled:u.value==1},"Previous Page",10,bt),e("button",{class:B(["bg-black hover:bg-gray-700 text-white py-2 px-4 rounded ml-2",[{"cursor-not-allowed":u.value==x.value}]]),disabled:u.value==x.value,onClick:j},"Next Page",10,wt)])])])])):(i(),d("div",ht,[s(E)]))]))]),_:1})],64))}};export{Bt as default};

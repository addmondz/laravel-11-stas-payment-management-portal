import{_ as $}from"./ListComponent-Z6lr4_Ji.js";import{_ as A}from"./AuthenticatedLayout-CDsAnG-h.js";import{a as c,k as h,o as l,g as _,b as t,t as m,u as x,c as y,h as w,F as C,l as k,w as b,d as E}from"./app-CoP-N2eD.js";import{I as j,_ as I}from"./BreadcrumbComponent-CXVJU7zb.js";import{_ as L}from"./ClaimsListTemplate-CV-8hpwl.js";import{_ as V,A as B,a as F}from"./DocumentViewer-tqJbvI51.js";import{_ as N}from"./PaymentVoucherForm-d2t-XCBH.js";import{d as M,f as R,S as p,h as U,b as G}from"./helpers-BkfvwUxe.js";import"./NotFound-WALqoxpN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-5CRMQ2eI.js";import"./PrimaryButton-DfL8ipy_.js";import"./InputError-C_hXWNVM.js";import"./TextInput-CrgGSdBp.js";import"./DateRangeComponent-B0myjPjP.js";import"./CreateClaimForm-BLLoR_vS.js";import"./CustomSelectComponent-B_Jaa_Rk.js";var T={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};function S(e){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?Object(arguments[s]):{},r=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable}))),r.forEach(function(i){z(e,i,o[i])})}return e}function z(e,s,o){return s in e?Object.defineProperty(e,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[s]=o,e}var P=function(s,o){var r=S({},s,o.attrs);return c(j,S({},r,{icon:T}),null)};P.displayName="ExportOutlined";P.inheritAttrs=!1;const H={class:"w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500"},q={class:"flex items-center justify-center"},Y={class:"flex-1"},J={class:"grid grid-cols-7 gap-4"},Q={class:"col"},W={class:"row"},X={class:"col"},Z={class:"text-[14px]"},K={class:"col"},tt={class:"row"},et={class:"col"},at={class:"text-[14px] truncate"},st={class:"col"},ot={class:"row"},rt={class:"col"},it={class:"text-[14px] truncate"},lt={class:"col"},nt={class:"row"},ct={class:"col"},dt={class:"text-[14px] truncate"},mt={class:"col"},ut={class:"row"},pt={class:"col"},_t={class:"whitespace-nowrap overflow-hidden text-ellipsis"},ft={class:"col"},vt={class:"row"},xt={class:"col"},yt={class:"flex justify-end items-center space-x-4"},ht={key:0,class:"mt-5"},gt={__name:"PaymentGroupListTemplate",props:{data:{type:Object,required:!0}},setup(e,{emit:s}){const o=s,r=e,i=h(!0),d=h(!1),f=()=>{d.value=!d.value},g=()=>{o("createComplete",!0)},O=u=>{let a={reportName:"Claim Export",reportType:"claimExport",payment_group_id:r.data.id,for_pdf:!1};return a.for_pdf=!0,a},v=async u=>{if((await p.fire({title:"Are you sure?",text:"Do you want to export this report?",icon:"info",showCancelButton:!0,confirmButtonText:"Yes"})).isConfirmed){p.fire({title:"Processing...",text:"Please wait while we generate your report.",allowOutsideClick:!1,didOpen:()=>{p.showLoading()}}),i.value=!0;try{const n=O(u==="export"),D={export:route("reports.exportPaymentGroupPDF",n.reportType)};await U(u,n,D,"payment_group_report_"+G(r.data.id)),p.close()}catch(n){console.error("Error generating report:",n),p.fire("Error","Failed to generate the report. Please try again.","error")}finally{i.value=!1}}};return(u,a)=>(l(),_("div",H,[t("div",q,[t("div",Y,[t("div",J,[t("div",Q,[a[1]||(a[1]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"ID")])],-1)),t("div",W,[t("div",X,[t("div",Z,m(e.data.id),1)])])]),t("div",K,[a[2]||(a[2]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Voucher Number")])],-1)),t("div",tt,[t("div",et,[t("div",at,m(e.data.payment_voucher_number),1)])])]),t("div",st,[a[3]||(a[3]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Date")])],-1)),t("div",ot,[t("div",rt,[t("div",it,m(x(M)(e.data.payment_date)),1)])])]),t("div",lt,[a[4]||(a[4]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Mode")])],-1)),t("div",nt,[t("div",ct,[t("div",dt,m(e.data.payment_mode??"-"),1)])])]),t("div",mt,[a[5]||(a[5]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount")])],-1)),t("div",ut,[t("div",pt,[t("div",_t,m(e.data.currency)+" "+m(x(R)(e.data.sum_claims)),1)])])]),t("div",ft,[a[6]||(a[6]=t("div",{class:"row"},[t("div",{class:"col-auto"},[t("div",{class:"mb-1 text-xs text-gray-500"},"Payment Voucher Receipt")])],-1)),t("div",vt,[t("div",xt,[c(V,{src:`/${e.data.payment_voucher_receipt_file}`,alt:"Receipt Image",id:e.data.id},null,8,["src","id"])])])]),t("div",yt,[c(N,{claimId:e.data.claimIds,data:e.data,onCreateComplete:g,isListComponent:!0},null,8,["claimId","data"]),c(x(P),{class:"cursor-pointer",onClick:a[0]||(a[0]=n=>v("export"))}),d.value?(l(),y(B,{key:0,class:"cursor-pointer",onClick:f})):w("",!0),d.value?w("",!0):(l(),y(F,{key:1,class:"cursor-pointer",onClick:f}))])]),d.value?(l(),_("div",ht,[(l(!0),_(C,null,k(e.data.claims,n=>(l(),y(L,{onCreateComplete:g,class:"mb-2",onUpdateSelectedList:u.handleUpdateSelectedList,key:n.id,data:n},null,8,["onUpdateSelectedList","data"]))),128))])):w("",!0)])])]))}},wt={class:"flex justify-between content-center"},bt={class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3"},Rt={__name:"PaymentGroups",setup(e){const s=h(2),o=()=>{s.value=Math.floor(Math.random()*100)+132},r=h([{display_name:"Payment Group ID",field_name:"id",field_type:"string"},{display_name:"Payment Voucher Number",field_name:"payment_voucher_number",field_type:"string"},{display_name:"Payment Date",field_name:"payment_date",field_type:"date_range"}]);return(i,d)=>(l(),_(C,null,[c(x(E),{title:"Completed Payments"}),c(A,null,{header:b(()=>[t("div",wt,[c(I,{breadcrumbs:[{title:"Completed Payments"}]})])]),default:b(()=>[t("div",bt,[c($,{apiUrl:i.route("paymentGroup.list"),createCompleteSignal:s.value,sortAndFilters:r.value,allowSorting:!1},{"list-view":b(({data:f,apiResponse:g,fullApiResponse:O})=>[(l(!0),_(C,null,k(f,v=>(l(),y(gt,{onCreateComplete:o,key:v.id,data:v},null,8,["data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])])]),_:1})],64))}};export{Rt as default};

import{a as o,k as g,m as se,i as ae,g as p,u as l,w as _,F as L,q as M,o as a,d as oe,b as e,c as v,h as r,e as C,t as u,l as le,P as re}from"./app-DXWRZbTu.js";import{_ as ie,g as q,i as U}from"./AuthenticatedLayout-hEbHbn_O.js";import{L as ne,N as ue}from"./NotFound-Bo211h0C.js";import{_ as de}from"./StatusLabel-D0-TTy9q.js";import{I as ce,_ as pe}from"./BreadcrumbComponent-CmG1oAuH.js";import{b as W,c as me,d as $,f as G,S as A,h as ve,e as ye}from"./helpers-CrVvo6q3.js";import{A as w,a as h,_ as K}from"./DocumentViewer-Cl6sGbcx.js";import{P as j}from"./PrimaryButton-C1vt5dv4.js";import{_ as Y}from"./PaymentVoucherForm-Btv3Bhu5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-GjDE-CDu.js";import"./InputError-1v-n5xrC.js";import"./TextInput-CECpCSa5.js";var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function J(x){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?Object(arguments[m]):{},b=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(b=b.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),b.forEach(function(f){fe(x,f,s[f])})}return x}function fe(x,m,s){return m in x?Object.defineProperty(x,m,{value:s,enumerable:!0,configurable:!0,writable:!0}):x[m]=s,x}var c=function(m,s){var b=J({},m,s.attrs);return o(ce,J({},b,{icon:xe}),null)};c.displayName="InfoCircleOutlined";c.inheritAttrs=!1;const _e={class:"flex flex-wrap justify-between items-center gap-y-4 sm:flex-nowrap"},be={class:"flex"},ge={class:"flex items-center justify-center"},we={key:0},he={key:1},ke={key:0,class:"max-w-8xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Ce={class:"mb-5"},je={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Pe={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},De={class:"flex justify-between content-center w-full"},$e={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Ae={class:"mb-4"},Be={class:"flex justify-between"},Oe={class:"text-base"},Te={class:"mb-4"},Se={class:"flex justify-between"},Ie={class:"text-base"},Ne={class:"mb-4"},Ve={class:"flex justify-between"},Re={class:"text-base"},Fe={class:"mb-4"},Ee={class:"flex justify-between"},He={class:"text-base capitalize"},ze={class:"mb-4"},Le={class:"flex justify-between"},Me={class:"text-base"},qe={class:"mb-4"},Ue={class:"flex justify-between"},We={class:"text-base"},Ge={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ke={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Ye={class:"flex justify-between content-center w-full"},Je={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},Qe={class:"mb-4"},Xe={class:"flex justify-between"},Ze={class:"text-base"},et={class:"mb-4"},tt={class:"flex justify-between"},st={class:"text-base"},at={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},ot={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},lt={class:"flex justify-between content-center w-full"},rt={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},it={class:"mb-4"},nt={class:"flex justify-between"},ut={class:"text-base"},dt={class:"mb-4"},ct={class:"flex justify-between"},pt={class:"text-base"},mt={class:"mb-4"},vt={class:"flex justify-between"},yt={class:"text-base"},xt={class:"mb-4"},ft={class:"flex justify-between"},_t={class:"text-base"},bt={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},gt={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},wt={class:"flex justify-between content-center w-full"},ht={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},kt={class:"mb-4"},Ct={class:"flex justify-between"},jt={class:"mb-4"},Pt={class:"flex justify-between"},Dt={class:"text-base"},$t={class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},At={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Bt={class:"flex justify-between content-center w-full"},Ot={key:0,class:"p-6 border-gray-300 mb-4 w-full"},Tt={class:"relative list-none"},St=["value"],It={class:"flex justify-between flex-col sm:flex-row"},Nt={class:"font-bold"},Vt={class:"text-gray-500"},Rt={key:0,class:"bg-white max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5"},Ft={class:"px-5 py-3 border-b border-gray-300 flex justify-between items-center"},Et={class:"flex justify-between content-center w-full"},Ht={key:0,class:"grid md:grid-cols-3 gap-9 p-6 border-gray-300 col-span-2"},zt={class:"mb-4"},Lt={class:"flex justify-between"},Mt={class:"text-base"},qt={class:"mb-4"},Ut={class:"flex justify-between"},Wt={class:"text-base"},Gt={class:"mb-4"},Kt={class:"flex justify-between"},Yt={key:1,class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Jt={key:2,class:"max-w-8xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mb-5 text-right"},Qt={key:1},Xt={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Zt={class:"flex justify-center"},ms={__name:"ClaimDetails",props:{id:{type:String,required:!0}},setup(x){const m=g(!0),s=g([]),b=g(null),f=g(null),k=x,Q=route("claims.fetchData",k.id);g("0"),g({});const X=[{title:"Payments",link:route("dashboard")},{title:"#"+W(k.id)}],n=g({details:!0,amount:!0,receipt:!0,approvalHistory:!0,paymentVoucher:!0,bankDetails:!0}),y=i=>{n.value[i]=!n.value[i]},B=()=>{A.fire({title:"Are you sure?",text:"Are you sure you want to approve this Payment?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((i,t)=>{Z()})})},Z=async()=>{try{const i=await M.post(route("claims.approveClaim",k.id));D(),A.fire({title:"Success!",text:"The payment has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(i){A.fire({title:"Error!",text:i.response?i.response.data.error||"There was an error while approving the payment. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}},D=async()=>{try{const{data:i}=await M.get(Q);s.value=i.data,f.value=i}catch(i){b.value=i}finally{m.value=!1}};se(()=>{D()});const O=()=>{D()},ee=ae(()=>{const i=s.value.receipt_file;return i&&i.toLowerCase().endsWith(".pdf")}),te=i=>{let t={reportName:"Claim Export 1",reportType:"claimExport",claim_id:s.value.id,for_pdf:!1,isReceiptFilePdf:ee.value};return i&&(t.for_pdf=!0),t},T=async i=>{m.value=!0;try{const t=te(i==="export"),P={test:route("reports.generateReportPreview","claimExport"),export:route("reports.exportPDF",t.reportType)};await ve(i,t,P,"claim_report_"+W(s.value.id))}catch(t){console.error("Error generating report:",t)}finally{m.value=!1}};return(i,t)=>(a(),p(L,null,[o(l(oe),{title:"Payment Details"}),o(ie,null,{header:_(()=>[e("div",_e,[e("div",be,[o(pe,{breadcrumbs:X})]),e("div",ge,[f.value?(a(),v(de,{key:0,class:"text-sm inline-block",status:s.value.status,name:s.value.status_name},null,8,["status","name"])):r("",!0),s.value.status_id<2&&l(q)().value==s.value.next_approval_level?(a(),v(j,{key:1,class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:B},{default:_(()=>t[14]||(t[14]=[C("Approve Payment")])),_:1})):r("",!0),s.value.status_id==2&&l(U)().value?(a(),v(Y,{key:2,claimId:k.id,onCreateComplete:O,class:"rounded-md"},null,8,["claimId"])):r("",!0)])])]),default:_(()=>{var P,S,I,N,V,R,F,E,H,z;return[m.value?(a(),p("div",we,[o(ne,{class:"mt-32"})])):(a(),p("div",he,[f.value?(a(),p("div",ke,[e("div",Ce,[o(j,{class:"mr-5",onClick:t[0]||(t[0]=d=>T("test"))},{default:_(()=>t[15]||(t[15]=[C(" Preview ")])),_:1}),o(j,{class:"mr-5",onClick:t[1]||(t[1]=d=>T("export"))},{default:_(()=>t[16]||(t[16]=[C(" Export PDF ")])),_:1})]),e("div",je,[e("div",Pe,[e("div",De,[t[17]||(t[17]=e("h2",null,"Details",-1)),n.value.details?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[2]||(t[2]=d=>y("details"))})):r("",!0),n.value.details?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[3]||(t[3]=d=>y("details"))}))])]),n.value.details?(a(),p("div",$e,[e("div",Ae,[e("div",Be,[t[18]||(t[18]=e("p",{class:"mb-1 text-sm text-gray-500"},"Created By",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Oe,u(s.value.created_user?s.value.created_user.name??"-":"-"),1)]),e("div",Te,[e("div",Se,[t[19]||(t[19]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment To",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Ie,u(s.value.payment_to_user?s.value.payment_to_user.name??"-":"-"),1)]),e("div",Ne,[e("div",Ve,[t[20]||(t[20]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Type",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Re,u(l(me)(s.value.payment_type)??"-"),1)]),e("div",Fe,[e("div",Ee,[t[21]||(t[21]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Category",-1)),o(l(c),{class:"text-gray-400"})]),e("p",He,u(((P=s.value.payment_category)==null?void 0:P.name)||"-"),1)]),e("div",ze,[e("div",Le,[t[22]||(t[22]=e("p",{class:"mb-1 text-sm text-gray-500"},"Purpose",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Me,u(s.value.purpose??"-"),1)]),e("div",qe,[e("div",Ue,[t[23]||(t[23]=e("p",{class:"mb-1 text-sm text-gray-500"},"Creatd At",-1)),o(l(c),{class:"text-gray-400"})]),e("p",We,u(l($)(s.value.created_at)??"-"),1)])])):r("",!0)]),e("div",Ge,[e("div",Ke,[e("div",Ye,[t[24]||(t[24]=e("h2",null,"Amount",-1)),n.value.amount?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[4]||(t[4]=d=>y("amount"))})):r("",!0),n.value.amount?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[5]||(t[5]=d=>y("amount"))}))])]),n.value.amount?(a(),p("div",Je,[e("div",Qe,[e("div",Xe,[t[25]||(t[25]=e("p",{class:"mb-1 text-sm text-gray-500"},"Total Amount",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Ze,u(s.value.currency_object.short_code)+" "+u(l(G)(s.value.amount)),1)]),e("div",et,[e("div",tt,[t[26]||(t[26]=e("p",{class:"mb-1 text-sm text-gray-500"},"GST Amount",-1)),o(l(c),{class:"text-gray-400"})]),e("p",st,u(Number(s.value.gst_amount)===0?"-":s.value.currency_object.short_code+" "+l(G)(s.value.gst_amount)),1)])])):r("",!0)]),e("div",at,[e("div",ot,[e("div",lt,[t[27]||(t[27]=e("h2",null,"Bank Details",-1)),n.value.bankDetails?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[6]||(t[6]=d=>y("bankDetails"))})):r("",!0),n.value.bankDetails?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[7]||(t[7]=d=>y("bankDetails"))}))])]),n.value.bankDetails?(a(),p("div",rt,[e("div",it,[e("div",nt,[t[28]||(t[28]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Name",-1)),o(l(c),{class:"text-gray-400"})]),e("p",ut,u(((S=s.value.payment_to_user)==null?void 0:S.bank_name)||"-"),1)]),e("div",dt,[e("div",ct,[t[29]||(t[29]=e("p",{class:"mb-1 text-sm text-gray-500"},"Bank Number",-1)),o(l(c),{class:"text-gray-400"})]),e("p",pt,u(((I=s.value.payment_to_user)==null?void 0:I.bank_account_no)||"-"),1)]),e("div",mt,[e("div",vt,[t[30]||(t[30]=e("p",{class:"mb-1 text-sm text-gray-500"},"Swift Code",-1)),o(l(c),{class:"text-gray-400"})]),e("p",yt,u(((N=s.value.payment_to_user)==null?void 0:N.swift_code)||"-"),1)]),e("div",xt,[e("div",ft,[t[31]||(t[31]=e("p",{class:"mb-1 text-sm text-gray-500"},"Country",-1)),o(l(c),{class:"text-gray-400"})]),e("p",_t,u(((F=(R=(V=s.value.payment_to_user)==null?void 0:V.currency)==null?void 0:R.country)==null?void 0:F.name)||"-")+" ("+u(((z=(H=(E=s.value.payment_to_user)==null?void 0:E.currency)==null?void 0:H.country)==null?void 0:z.short_code)||"-")+")",1)])])):r("",!0)]),e("div",bt,[e("div",gt,[e("div",wt,[t[32]||(t[32]=e("h2",null,"Receipt",-1)),n.value.receipt?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[8]||(t[8]=d=>y("receipt"))})):r("",!0),n.value.receipt?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[9]||(t[9]=d=>y("receipt"))}))])]),n.value.receipt?(a(),p("div",ht,[e("div",kt,[e("div",Ct,[t[33]||(t[33]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),o(l(c),{class:"text-gray-400"})]),e("div",null,[o(K,{src:`/${s.value.receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])])]),e("div",jt,[e("div",Pt,[t[34]||(t[34]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Date",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Dt,u(l($)(s.value.receipt_date)??"-"),1)])])):r("",!0)]),e("div",$t,[e("div",At,[e("div",Bt,[t[35]||(t[35]=e("h2",null,"Approval History",-1)),n.value.approvalHistory?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[10]||(t[10]=d=>y("approvalHistory"))})):r("",!0),n.value.approvalHistory?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[11]||(t[11]=d=>y("approvalHistory"))}))])]),n.value.approvalHistory?(a(),p("div",Ot,[e("ul",Tt,[t[37]||(t[37]=e("div",{class:"absolute top-3 left-[21px] w-[2px] bg-gray-300 h-full z-1"},null,-1)),(a(!0),p(L,null,le(s.value.status_log,d=>(a(),p("li",{class:"relative pl-10 mb-4",key:d.id,value:d},[t[36]||(t[36]=e("div",{class:"absolute left-[12px] top-1 w-5 h-5 rounded-full",style:{"background-color":"#d4d9df"}},[e("div",{class:"absolute left-[4px] top-1 w-3 h-3 rounded-full",style:{"background-color":"#7367F0"}})],-1)),e("div",It,[e("p",Nt,u(d.status),1),e("p",Vt,u(l(ye)(d.created_at)),1)]),e("p",null,u(d.name),1)],8,St))),128))])])):r("",!0)]),s.value.status_id>=3?(a(),p("div",Rt,[e("div",Ft,[e("div",Et,[t[38]||(t[38]=e("h2",null,"Payment Voucher",-1)),n.value.paymentVoucher?(a(),v(w,{key:0,class:"cursor-pointer",onClick:t[12]||(t[12]=d=>y("paymentVoucher"))})):r("",!0),n.value.paymentVoucher?r("",!0):(a(),v(h,{key:1,class:"cursor-pointer",onClick:t[13]||(t[13]=d=>y("paymentVoucher"))}))])]),n.value.paymentVoucher?(a(),p("div",Ht,[e("div",zt,[e("div",Lt,[t[39]||(t[39]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Voucher Number",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Mt,u(s.value.payment_voucher_number??"-"),1)]),e("div",qt,[e("div",Ut,[t[40]||(t[40]=e("p",{class:"mb-1 text-sm text-gray-500"},"Payment Date",-1)),o(l(c),{class:"text-gray-400"})]),e("p",Wt,u(l($)(s.value.payment_date)??"-"),1)]),e("div",Gt,[e("div",Kt,[t[41]||(t[41]=e("p",{class:"mb-1 text-sm text-gray-500"},"Receipt Document",-1)),o(l(c),{class:"text-gray-400"})]),e("div",null,[o(K,{src:`/${s.value.payment_voucher_receipt_file}`,alt:"Receipt Image",id:s.value.id},null,8,["src","id"])])])])):r("",!0)])):r("",!0),s.value.status_id<2&&l(q)().value==s.value.next_approval_level?(a(),p("div",Yt,[o(j,{class:"bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:B},{default:_(()=>t[42]||(t[42]=[C("Approve Payment")])),_:1})])):r("",!0),s.value.status_id==2&&l(U)().value?(a(),p("div",Jt,[o(Y,{claimId:k.id,onCreateComplete:O},null,8,["claimId"])])):r("",!0)])):(a(),p("div",Qt,[e("div",Xt,[o(ue),e("div",Zt,[o(l(re),{href:i.route("dashboard")},{default:_(()=>[o(j,{class:"p-4"},{default:_(()=>t[43]||(t[43]=[C("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]))]}),_:1})],64))}};export{ms as default};

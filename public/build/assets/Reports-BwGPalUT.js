import{_ as J,a as B}from"./AuthenticatedLayout-DG6bqEvW.js";import{l as d,p as C,E as z,o as p,g as f,a as n,w as b,e as M,b as e,j as G,k as H,F as O,m as w,c as N,u as P,G as q,d as K,P as Q}from"./app-Dy6rl3ov.js";import{L as D,N as W}from"./NotFound-BL4ALBM8.js";import{_ as X}from"./BreadcrumbComponent-BfpH3KLq.js";import{P as U}from"./PrimaryButton-DJXD6kBq.js";import{$ as h}from"./jquery-BdOzmSpe.js";import{_ as S}from"./DateRangeComponent-CscRcVJx.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as j,h as L}from"./helpers-BuoOvgd_.js";import{_ as $}from"./TextInput-B-S9aKC7.js";import{C as k}from"./CustomSelectComponent-DMXqOFOC.js";const Z={class:"absolute z-10 mt-2 bg-white rounded-md shadow-lg",style:{"min-width":"120px"}},ee={class:"py-1"},te={__name:"ExportButtons",emits:["action"],setup(R,{emit:a}){const r=d(!1),s=d(null),u=m=>{s.value&&!s.value.contains(m.target)&&(r.value=!1)},c=m=>{r.value=!1,y("action",m)},y=a;return C(()=>{document.addEventListener("click",u)}),z(()=>{document.removeEventListener("click",u)}),(m,o)=>(p(),f(O,null,[n(U,{class:"mr-5",onClick:o[0]||(o[0]=v=>m.$emit("action","test"))},{default:b(()=>o[4]||(o[4]=[M(" Preview ")])),_:1}),e("div",{class:"relative inline-block",ref_key:"dropdownRef",ref:s},[n(U,{class:"inline-flex items-center bg-violet-500 hover:bg-violet-700 active:bg-violet-700 focus:bg-violet-700 font-bold",onClick:o[1]||(o[1]=v=>r.value=!r.value)},{default:b(()=>o[5]||(o[5]=[M(" Export "),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),_:1}),G(e("div",Z,[e("div",ee,[e("button",{class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:o[2]||(o[2]=v=>c("export"))}," PDF "),e("button",{class:"block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:o[3]||(o[3]=v=>c("exportExcel"))}," Excel ")])],512),[[H,r.value]])],512)],64))}},F=Y(te,[["__scopeId","data-v-588c867d"]]),ae={key:0},se={class:"flex mb-5"},le={__name:"SummaryReportComponent",setup(R){const a=d(["",""]),r=d(""),s=d(!1),u=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?r.value="Please select a date range.":r.value=""};w(a,()=>{u()});const c=()=>({reportName:"Summary Report Preview",reportType:"summaryReport",startDate:a.value[0],endDate:a.value[1]}),y=async m=>{if(u(),r.value)return;s.value=!0;const o=c();if(m=="exportExcel"){const v=a.value[0],_=a.value[1],g=route("reports.newSummaryReport",{dateFrom:v,dateTo:_});await j(g,o)}else{const v={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(o)))}`,test:route("reports.generateReportPreview","summaryReport"),export:route("reports.exportPDF",o.reportType)};await L(m,o,v,"summary_report")}s.value=!1};return(m,o)=>(p(),f("div",null,[o[1]||(o[1]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Summary Report")],-1)),s.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",ae,[e("div",se,[n(S,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=v=>a.value=v),label:"Date",additionalErrorMessage:r.value},null,8,["modelValue","additionalErrorMessage"])]),n(F,{onAction:y})]))]))}},oe={key:0},re={class:"flex mb-5"},ne={class:"mb-5"},ie={class:"mb-5"},ce={__name:"TransactionsReportComponent",setup(R){const a=d(["",""]),r=d([]),s=d([]),u=d(""),c=d(!1),y=d(""),m=d([]),o=d([]),v=d([]),_=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?u.value="Please select a date range.":u.value=""};w(a,()=>{_()});const g=()=>({reportName:"Transactions Report Preview",reportType:"transactionReport",startDate:a.value[0],endDate:a.value[1],payment_to:s.value.join(","),claim_ids_filters:r.value.join(",")}),V=async i=>{if(_(),u.value)return;c.value=!0;const t=g();if(i=="exportExcel"){const l=a.value[0],T=a.value[1],I=route("reports.transactionsReport",{dateFrom:l,dateTo:T});await j(I,t)}else{const l={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(t)))}`,test:route("reports.generateReportPreview",t.reportType),export:route("reports.exportPDF",t.reportType)};await L(i,t,l,"transactions_report")}c.value=!1},A=async()=>{c.value=!0;try{const{data:i}=await axios.get(route("paymentReceiver.listNameAndId"));m.value=i}catch(i){y.value=i}finally{c.value=!1}},E=async()=>{c.value=!0;let i=route("claims.listIds");const t=s.value=="All"?"":s.value;if(t!==""){const l=new URLSearchParams({payment_to:t});i+=`?${l.toString()}`}try{const{data:l}=await axios.get(i);o.value=l,x()}catch(l){y.value=l}finally{c.value=!1}},x=async()=>{c.value=!0;const t=(s.value.length===0?["All"]:s.value).flatMap(l=>o.value[l]||[]);v.value=t,c.value=!1,r.value=[]};return w(s,(i,t)=>{x()},{deep:!0}),C(()=>{A(),E()}),(i,t)=>(p(),f("div",null,[t[3]||(t[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),c.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",oe,[e("div",re,[n(S,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),label:"Date",additionalErrorMessage:u.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",ne,[n($,{for:"payment_to",value:"Payment Receivers"}),n(k,{choices:m.value,modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value=l),label:"Payment Receivers",choicesIsObject:!0,allowAllChoice:!0,allowMultiChoice:!0},null,8,["choices","modelValue"])]),e("div",ie,[n($,{for:"claim_ids_filters",value:"Payment IDs"}),n(k,{choices:v.value,allowMultiChoice:!0,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),label:"Payment IDs",allowAllChoice:!0},null,8,["choices","modelValue"])]),n(F,{onAction:V})]))]))}},de={key:0},ue={class:"flex mb-5"},me={class:"mb-5"},ve={class:"mb-5"},pe={__name:"PaymentDetailReportComponent",setup(R){const a=d(["",""]),r=d([]),s=d([]),u=d(""),c=d(!1),y=d(""),m=d([]),o=d([]),v=d([]),_=()=>{!Array.isArray(a.value)||!a.value.length||a.value[0]===""&&a.value[1]===""?u.value="Please select a date range.":u.value=""};w(a,()=>{_()});const g=()=>({reportName:"Payment Detail Report",reportType:"paymentDetailReport",startDate:a.value[0],endDate:a.value[1],payment_to:s.value.join(","),claim_ids_filters:r.value.join(",")}),V=async i=>{if(_(),u.value)return;c.value=!0;const t=g();if(i=="exportExcel"){const l=a.value[0],T=a.value[1],I=route("reports.paymentDetailReport",{dateFrom:l,dateTo:T});await j(I,t)}else{const l={preview:`${route("report.preview")}?data=${encodeURIComponent(btoa(JSON.stringify(t)))}`,test:route("reports.generateReportPreview",t.reportType),export:route("reports.exportPDF",t.reportType)};await L(i,t,l,"payment_detail")}c.value=!1},A=async()=>{c.value=!0;try{const{data:i}=await axios.get(route("paymentReceiver.listNameAndId"));m.value=i}catch(i){y.value=i}finally{c.value=!1}},E=async()=>{c.value=!0;let i=route("claims.listIds");const t=s.value=="All"?"":s.value;if(t!==""){const l=new URLSearchParams({payment_to:t});i+=`?${l.toString()}`}try{const{data:l}=await axios.get(i);o.value=l,x()}catch(l){y.value=l}finally{c.value=!1}},x=async()=>{c.value=!0;const t=(s.value.length===0?["All"]:s.value).flatMap(l=>o.value[l]||[]);v.value=t,c.value=!1};return w(s,(i,t)=>{x(),r.value=[]},{deep:!0}),C(()=>{A(),E()}),(i,t)=>(p(),f("div",null,[t[3]||(t[3]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),c.value?(p(),N(D,{key:1,class:"mt-32 mb-32"})):(p(),f("div",de,[e("div",ue,[n(S,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),label:"Date",additionalErrorMessage:u.value},null,8,["modelValue","additionalErrorMessage"])]),e("div",me,[n($,{for:"payment_to",value:"Payment Receiver"}),n(k,{choices:m.value,modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value=l),label:"Payment Receiver",choicesIsObject:!0,allowAllChoice:!0},null,8,["choices","modelValue"])]),e("div",ve,[n($,{for:"claim_ids_filters",value:"Payment ID"}),n(k,{choices:v.value,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),label:"Payment ID",allowAllChoice:!0},null,8,["choices","modelValue"])]),n(F,{onAction:V})]))]))}},fe={class:"flex justify-between content-center"},ye={key:0},_e={key:0},be={key:1},ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},xe={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},he={class:"w-full md:w-3/4 bg-white"},we={class:"space-y-4"},Re={class:"tab-display","tab-name":"summaryReport"},Pe={class:"flex items-center"},$e={class:"flex-1 p-4"},ke={class:"space-y-4"},Ce={class:"tab-display","tab-name":"transactionsReport"},De={class:"flex items-center"},Ve={class:"flex-1 p-4"},Ae={class:"space-y-4"},Ee={class:"tab-display","tab-name":"paymentDetailReport"},Te={class:"flex items-center"},Ie={class:"flex-1 p-4"},Me={key:1},Ue={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},Ne={class:"flex justify-center"},Ke={__name:"Reports",setup(R){const a=d(!1);return C(()=>{const r=h(".tab-btn"),s=h(".tab-display"),u="active bg-violet-500 text-white";s.hide(),r.first().addClass(u),s.first().show(),h("body").on("click",".tab-btn",function(){s.hide(),r.removeClass(u),h(this).addClass(u),s.filter(`[tab-name="${h(this).attr("tab-name")}"]`).show()})}),(r,s)=>(p(),f(O,null,[n(P(K),{title:"Reports"}),n(J,null,q({default:b(()=>[P(B)().value?(p(),f("div",ye,[a.value?(p(),f("div",_e,[n(D,{class:"mt-32"})])):(p(),f("div",be,[e("div",ge,[e("div",xe,[s[0]||(s[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",he,[e("div",we,[e("div",Re,[e("div",Pe,[e("div",$e,[n(le)])])])]),e("div",ke,[e("div",Ce,[e("div",De,[e("div",Ve,[n(ce)])])])]),e("div",Ae,[e("div",Ee,[e("div",Te,[e("div",Ie,[n(pe)])])])])])])])]))])):(p(),f("div",Me,[e("div",Ue,[n(W),e("div",Ne,[n(P(Q),{href:r.route("dashboard")},{default:b(()=>[n(U,{class:"p-4"},{default:b(()=>s[1]||(s[1]=[M("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[P(B)().value?{name:"header",fn:b(()=>[e("div",fe,[n(X,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{Ke as default};

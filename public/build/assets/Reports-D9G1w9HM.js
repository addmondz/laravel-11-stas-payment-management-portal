import{_ as J,a as z}from"./AuthenticatedLayout-T4mUm7Yg.js";import{l as d,o as r,g as n,b as e,a as o,t as g,h as E,w as h,e as I,y as D,D as H,p as K,j as L,q as j,F as B,m as q,u as k,E as Q,d as W,P as X}from"./app-aM69IDsn.js";import{S as T,L as M,d as G,N as Y}from"./sweetalert2.esm.all-vFncgdV7.js";import{_ as Z}from"./BreadcrumbComponent-CypbHhAC.js";import{P as A}from"./PrimaryButton-GD9_oimd.js";import{$ as S}from"./jquery-a0YhUGSw.js";import{_ as R,a as V}from"./TextInput-BS9jK6QB.js";import"./ApplicationLogo-M_mRncSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"flex mb-5"},te={class:"flex justify-center items-center"},se={key:0,class:"text-red-500 text-sm mt-2"},ae={__name:"SummaryReportComponent",setup(F){const u=d(""),i=d(""),a=d(""),p=async()=>{var c,m;if(a.value="",!u.value||!i.value){a.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(i.value)<new Date(u.value)){a.value="'Date To' cannot be earlier than 'Date From'.";return}const v=route("reports.newSummaryReport",{dateFrom:u.value,dateTo:i.value});try{const f=await D.post(v,{},{responseType:"blob"}),x=new Blob([f.data],{type:f.headers["content-type"]}),_=document.createElement("a");_.href=URL.createObjectURL(x);const $=f.headers["content-disposition"],w=$?$.split("filename=")[1].replace(/"/g,""):"report.pdf";_.download=w,document.body.appendChild(_),_.click(),document.body.removeChild(_),T.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(f){T.fire({title:"Error!",text:((m=(c=f.response)==null?void 0:c.data)==null?void 0:m.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}};return(v,c)=>(r(),n("div",null,[c[4]||(c[4]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),e("div",ee,[e("div",null,[o(R,{for:"receipt_date",value:"Date"}),e("div",te,[e("div",null,[o(V,{id:"date_from",modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=m=>u.value=m),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),c[2]||(c[2]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(V,{id:"date_to",modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=m=>i.value=m),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])]),a.value?(r(),n("p",se,g(a.value),1)):E("",!0)])]),o(A,{onClick:p},{default:h(()=>c[3]||(c[3]=[I("Download")])),_:1})]))}},oe={key:0},le={key:1,class:"flex mb-5 flex-col"},re={class:"mb-5"},ne={class:"flex justify-center items-center"},ie={key:0,class:"text-red-500 text-sm mt-2"},de={class:"mb-5"},ue=["value","data-attr-currency-id"],ce={class:"mb-5"},me=["value"],pe={__name:"TransactionsReportComponent",setup(F){const u=d(""),i=d(""),a=d(""),p=d([]),v=d(""),c=d(""),m=d(!1),f=d([]),x=d([]),_=async()=>{var C,U;if(v.value="",!u.value||!i.value){v.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(i.value)<new Date(u.value)){v.value="'Date To' cannot be earlier than 'Date From'.";return}const l=route("reports.transactionsReport",{dateFrom:u.value,dateTo:i.value}),t=new URLSearchParams;a.value&&t.append("payment_to",a.value),p.value.length&&t.append("claim_ids_filters",p.value.join(","));const s=`${l}?${t.toString()}`;try{const y=await D.post(s,{},{responseType:"blob"}),N=new Blob([y.data],{type:y.headers["content-type"]}),b=document.createElement("a");b.href=URL.createObjectURL(N);const P=y.headers["content-disposition"],O=P?P.split("filename=")[1].replace(/"/g,""):"report.pdf";b.download=O,document.body.appendChild(b),b.click(),document.body.removeChild(b),T.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(y){T.fire({title:"Error!",text:((U=(C=y.response)==null?void 0:C.data)==null?void 0:U.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}},$=async()=>{m.value=!0;try{const{data:l}=await D.get(route("paymentReceiver.listNameAndId"));f.value=l}catch(l){c.value=l}finally{m.value=!1}},w=async()=>{m.value=!0;let l=route("claims.listIds");const t=a.value;if(t!==""){const s=new URLSearchParams({payment_to:t});l+=`?${s.toString()}`}try{const{data:s}=await D.get(l);x.value=s}catch(s){c.value=s}finally{m.value=!1}};return H(a,(l,t)=>{l!==t&&w()}),K(()=>{$(),w()}),(l,t)=>(r(),n("div",null,[t[11]||(t[11]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),m.value?(r(),n("div",oe,[o(M,{class:"mt-20 mb-20"})])):(r(),n("div",le,[e("div",re,[o(R,{for:"receipt_date",value:"Date"}),e("div",ne,[e("div",null,[o(V,{id:"date_from",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[4]||(t[4]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(V,{id:"date_to",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1))]),v.value?(r(),n("p",ie,g(v.value),1)):E("",!0)]),e("div",de,[o(R,{for:"payment_to",value:"Payment Receiver"}),L(e("select",{id:"payment_to","onUpdate:modelValue":t[2]||(t[2]=s=>a.value=s),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[6]||(t[6]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Receiver",-1)),t[7]||(t[7]=e("option",{value:""},"All",-1)),(r(!0),n(B,null,q(f.value,s=>(r(),n("option",{key:s.id,value:s.id,class:"capitalize","data-attr-currency-id":s.currency_id},g(s.name),9,ue))),128))],512),[[j,a.value]])]),e("div",ce,[o(R,{for:"claim_ids_filters",value:"Claim ID"}),L(e("select",{id:"claim_ids_filters","onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),multiple:"",class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[8]||(t[8]=e("option",{value:"",disabled:""},"Please select Claim ID",-1)),t[9]||(t[9]=e("option",{value:""},"All",-1)),(r(!0),n(B,null,q(x.value,s=>(r(),n("option",{key:s,value:s},g(k(G)(s)),9,me))),128))],512),[[j,p.value]])])])),o(A,{onClick:_},{default:h(()=>t[10]||(t[10]=[I("Download")])),_:1})]))}},ve={key:0},fe={key:1,class:"flex mb-5 flex-col"},ye={class:"mb-5"},be={class:"flex justify-center items-center"},_e={key:0,class:"text-red-500 text-sm mt-2"},xe={class:"mb-5"},we=["value","data-attr-currency-id"],he={class:"mb-5"},ge=["value"],De={__name:"PaymentDetailReportComponent",setup(F){const u=d(""),i=d(""),a=d(""),p=d(""),v=d(""),c=d(""),m=d(!1),f=d([]),x=d([]),_=async()=>{var C,U;if(v.value="",!u.value||!i.value){v.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(i.value)<new Date(u.value)){v.value="'Date To' cannot be earlier than 'Date From'.";return}const l=route("reports.paymentDetailReport",{dateFrom:u.value,dateTo:i.value}),t=new URLSearchParams;a.value&&t.append("payment_to",a.value),p.value&&t.append("claim_ids_filters",p.value);const s=`${l}?${t.toString()}`;try{const y=await D.post(s,{},{responseType:"blob"}),N=new Blob([y.data],{type:y.headers["content-type"]}),b=document.createElement("a");b.href=URL.createObjectURL(N);const P=y.headers["content-disposition"],O=P?P.split("filename=")[1].replace(/"/g,""):"report.pdf";b.download=O,document.body.appendChild(b),b.click(),document.body.removeChild(b),T.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(y){T.fire({title:"Error!",text:((U=(C=y.response)==null?void 0:C.data)==null?void 0:U.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}},$=async()=>{m.value=!0;try{const{data:l}=await D.get(route("paymentReceiver.listNameAndId"));f.value=l}catch(l){c.value=l}finally{m.value=!1}},w=async()=>{m.value=!0;let l=route("claims.listIds");const t=a.value;if(t!==""){const s=new URLSearchParams({payment_to:t});l+=`?${s.toString()}`}try{const{data:s}=await D.get(l);x.value=s}catch(s){c.value=s}finally{m.value=!1}};return H(a,(l,t)=>{l!==t&&w()}),K(()=>{$(),w()}),(l,t)=>(r(),n("div",null,[t[11]||(t[11]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),m.value?(r(),n("div",ve,[o(M,{class:"mt-20 mb-20"})])):(r(),n("div",fe,[e("div",ye,[o(R,{for:"receipt_date",value:"Date"}),e("div",be,[e("div",null,[o(V,{id:"date_from",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[4]||(t[4]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[o(V,{id:"date_to",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1))]),v.value?(r(),n("p",_e,g(v.value),1)):E("",!0)]),e("div",xe,[o(R,{for:"payment_to",value:"Payment Receiver"}),L(e("select",{id:"payment_to","onUpdate:modelValue":t[2]||(t[2]=s=>a.value=s),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[6]||(t[6]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Receiver",-1)),t[7]||(t[7]=e("option",{value:""},"All",-1)),(r(!0),n(B,null,q(f.value,s=>(r(),n("option",{key:s.id,value:s.id,class:"capitalize","data-attr-currency-id":s.currency_id},g(s.name),9,we))),128))],512),[[j,a.value]])]),e("div",he,[o(R,{for:"claim_ids_filters",value:"Claim ID"}),L(e("select",{id:"claim_ids_filters","onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[8]||(t[8]=e("option",{value:"",disabled:"",selected:""},"Please select Claim ID",-1)),t[9]||(t[9]=e("option",{value:""},"All",-1)),(r(!0),n(B,null,q(x.value,s=>(r(),n("option",{key:s,value:s},g(k(G)(s)),9,ge))),128))],512),[[j,p.value]])])])),o(A,{onClick:_},{default:h(()=>t[10]||(t[10]=[I("Download")])),_:1})]))}},Re={class:"flex justify-between content-center"},$e={key:0},ke={key:0},Te={key:1},Ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},Ce={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},Ue={class:"w-full md:w-3/4 bg-white"},Pe={class:"space-y-4"},Se={class:"tab-display","tab-name":"summaryReport"},Be={class:"flex items-center"},Le={class:"flex-1 p-4"},je={class:"space-y-4"},qe={class:"tab-display","tab-name":"transactionsReport"},Ie={class:"flex items-center"},Ae={class:"flex-1 p-4"},Fe={class:"space-y-4"},Ne={class:"tab-display","tab-name":"paymentDetailReport"},Oe={class:"flex items-center"},Ee={class:"flex-1 p-4"},Ke={key:1},Me={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},ze={class:"flex justify-center"},tt={__name:"Reports",setup(F){const u=d(!1);return K(()=>{const i=S(".tab-btn"),a=S(".tab-display"),p="active bg-violet-500 text-white";a.hide(),i.first().addClass(p),a.first().show(),S("body").on("click",".tab-btn",function(){a.hide(),i.removeClass(p),S(this).addClass(p),a.filter(`[tab-name="${S(this).attr("tab-name")}"]`).show()})}),(i,a)=>(r(),n(B,null,[o(k(W),{title:"Claims"}),o(J,null,Q({default:h(()=>[k(z)().value?(r(),n("div",$e,[u.value?(r(),n("div",ke,[o(M,{class:"mt-32"})])):(r(),n("div",Te,[e("div",Ve,[e("div",Ce,[a[0]||(a[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",Ue,[e("div",Pe,[e("div",Se,[e("div",Be,[e("div",Le,[o(ae)])])])]),e("div",je,[e("div",qe,[e("div",Ie,[e("div",Ae,[o(pe)])])])]),e("div",Fe,[e("div",Ne,[e("div",Oe,[e("div",Ee,[o(De)])])])])])])])]))])):(r(),n("div",Ke,[e("div",Me,[o(Y),e("div",ze,[o(k(X),{href:i.route("dashboard")},{default:h(()=>[o(A,{class:"p-4"},{default:h(()=>a[1]||(a[1]=[I("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[k(z)().value?{name:"header",fn:h(()=>[e("div",Re,[o(Z,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{tt as default};

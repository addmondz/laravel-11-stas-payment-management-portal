import{_ as G,a as K}from"./AuthenticatedLayout-BnAe-T-S.js";import{l as p,o as d,g as c,b as e,a,t as D,h as P,w as g,e as j,y as C,j as z,x as W,F as L,m as q,n as J,f as Q,D as H,p as E,q as X,u as O,E as Y,d as Z,P as ee}from"./app-CQ2egenK.js";import{S as V,L as M,d as te,N as se}from"./sweetalert2.esm.all-i480kb9D.js";import{_ as oe}from"./BreadcrumbComponent-B3cyuvn7.js";import{P as B}from"./PrimaryButton-Nv72QtsW.js";import{$ as U}from"./jquery-BqSeF98u.js";import{_ as R,a as $}from"./TextInput-oPge-Faa.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-M_mRncSF.js";const le={class:"flex mb-5"},re={class:"flex justify-center items-center"},ne={key:0,class:"text-red-500 text-sm mt-2"},ie={__name:"SummaryReportComponent",setup(f){const l=p(""),n=p(""),r=p(""),i=async()=>{var s,v;if(r.value="",!l.value||!n.value){r.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(n.value)<new Date(l.value)){r.value="'Date To' cannot be earlier than 'Date From'.";return}const m=route("reports.newSummaryReport",{dateFrom:l.value,dateTo:n.value});try{const y=await C.post(m,{},{responseType:"blob"}),w=new Blob([y.data],{type:y.headers["content-type"]}),b=document.createElement("a");b.href=URL.createObjectURL(w);const k=y.headers["content-disposition"],x=k?k.split("filename=")[1].replace(/"/g,""):"report.pdf";b.download=x,document.body.appendChild(b),b.click(),document.body.removeChild(b),V.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(y){V.fire({title:"Error!",text:((v=(s=y.response)==null?void 0:s.data)==null?void 0:v.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}};return(m,s)=>(d(),c("div",null,[s[4]||(s[4]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Summary Report")],-1)),e("div",le,[e("div",null,[a(R,{for:"receipt_date",value:"Date"}),e("div",re,[e("div",null,[a($,{id:"date_from",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=v=>l.value=v),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),s[2]||(s[2]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[a($,{id:"date_to",modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=v=>n.value=v),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])])]),r.value?(d(),c("p",ne,D(r.value),1)):P("",!0)])]),a(B,{onClick:i},{default:g(()=>s[3]||(s[3]=[j("Download")])),_:1})]))}},de={props:{choices:{type:Array,default:()=>[]},modelValue:{type:[Array,String],default:()=>[]},allowMultiChoice:{type:Boolean,default:!1},label:{type:String,default:""},choicesIsObject:{type:Boolean,default:!1}},data(){return{selectedFruits:[...this.modelValue],searchQuery:"",showDropdown:!1}},computed:{filteredChoices(){return!Array.isArray(this.choices)||this.choices.length===0?[]:this.choices.filter(f=>String(f).toLowerCase().includes(this.searchQuery.toLowerCase()))}},methods:{handleClickOutside(f){this.$refs.dropdown&&!this.$refs.dropdown.contains(f.target)&&this.$refs.dropdown.querySelector("input")&&!this.$refs.dropdown.querySelector("input").contains(f.target)&&(this.closeDropDown(),document.removeEventListener("mousedown",this.handleClickOutside))},selectFruit(f){if(this.allowMultiChoice){const l=this.selectedFruits.indexOf(f);l>-1?this.selectedFruits.splice(l,1):this.selectedFruits.push(f)}else this.selectedFruits=[f],this.closeDropDown()},closeDropDown(){this.showDropdown=!1,this.$emit("update:modelValue",this.selectedFruits)},openDropDown(){this.showDropdown=!0,this.showDropdown?document.addEventListener("mousedown",this.handleClickOutside):document.removeEventListener("mousedown",this.handleClickOutside)},getFruitName(f){const l=this.choices.find(n=>n.id===f);return l?l.name:f}}},ce={class:"p-2"},ue={key:0,class:"absolute w-full bg-white border rounded mt-1 z-10 rounded-md"},me={class:"p-2"},pe={key:0,class:"max-h-40 overflow-y-auto"},ve=["onClick"],fe={key:1,class:"max-h-40 overflow-y-auto"},ye=["onClick"];function he(f,l,n,r,i,m){return d(),c("div",null,[e("div",{ref:"dropdown",onClick:l[1]||(l[1]=(...s)=>m.openDropDown&&m.openDropDown(...s)),class:"mt-1 border-gray-300 border rounded-md shadow-sm w-72 relative cursor-pointer"},[e("div",ce,D(i.selectedFruits.length?i.selectedFruits.map(s=>m.getFruitName(s)).join(", "):"Select "+n.label),1),i.showDropdown?(d(),c("div",ue,[e("div",me,[z(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>i.searchQuery=s),placeholder:"Search...",class:"w-full p-2 border-b outline-none rounded-md"},null,512),[[W,i.searchQuery]])]),n.choicesIsObject?(d(),c("ul",pe,[(d(!0),c(L,null,q(m.filteredChoices,(s,v)=>(d(),c("li",{key:s.id,class:J(["p-2 px-4 cursor-pointer",{"bg-blue-200":i.selectedFruits.includes(s.id),"hover:bg-gray-100":!i.selectedFruits.includes(s.id)}]),onClick:Q(y=>m.selectFruit(s.id),["stop"])},D(s.name),11,ve))),128))])):(d(),c("ul",fe,[(d(!0),c(L,null,q(m.filteredChoices,(s,v)=>(d(),c("li",{key:s,class:J(["p-2 px-4 cursor-pointer",{"bg-blue-200":i.selectedFruits.includes(s),"hover:bg-gray-100":!i.selectedFruits.includes(s)}]),onClick:Q(y=>m.selectFruit(s),["stop"])},D(s),11,ye))),128))]))])):P("",!0)],512)])}const A=ae(de,[["render",he]]),_e={key:0},be={key:1,class:"flex mb-5 flex-col"},we={class:"mb-5"},xe={class:"flex justify-center items-center"},ge={key:0,class:"text-red-500 text-sm mt-2"},De={class:"mb-5"},Ce={class:"mb-5"},Re={__name:"TransactionsReportComponent",setup(f){const l=p(""),n=p(""),r=p(""),i=p([]),m=p(""),s=p(""),v=p(!1),y=p([]),w=p([]),b=async()=>{var S,F;if(m.value="",!l.value||!n.value){m.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(n.value)<new Date(l.value)){m.value="'Date To' cannot be earlier than 'Date From'.";return}const u=route("reports.transactionsReport",{dateFrom:l.value,dateTo:n.value}),t=new URLSearchParams;r.value&&t.append("payment_to",r.value),i.value.length&&t.append("claim_ids_filters",i.value.join(","));const o=`${u}?${t.toString()}`;try{const h=await C.post(o,{},{responseType:"blob"}),I=new Blob([h.data],{type:h.headers["content-type"]}),_=document.createElement("a");_.href=URL.createObjectURL(I);const T=h.headers["content-disposition"],N=T?T.split("filename=")[1].replace(/"/g,""):"report.pdf";_.download=N,document.body.appendChild(_),_.click(),document.body.removeChild(_),V.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(h){V.fire({title:"Error!",text:((F=(S=h.response)==null?void 0:S.data)==null?void 0:F.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}},k=async()=>{v.value=!0;try{const{data:u}=await C.get(route("paymentReceiver.listNameAndId"));y.value=u}catch(u){s.value=u}finally{v.value=!1}},x=async()=>{v.value=!0;let u=route("claims.listIds");const t=r.value;if(t!==""){const o=new URLSearchParams({payment_to:t});u+=`?${o.toString()}`}try{const{data:o}=await C.get(u);w.value=o}catch(o){s.value=o}finally{v.value=!1}};return H(r,(u,t)=>{JSON.stringify(u)!==JSON.stringify(t)&&(x(),i.value=[])},{deep:!0}),E(()=>{k(),x()}),(u,t)=>(d(),c("div",null,[t[7]||(t[7]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Transactions Report")],-1)),v.value?(d(),c("div",_e,[a(M,{class:"mt-20 mb-20"})])):(d(),c("div",be,[e("div",we,[a(R,{for:"receipt_date",value:"Date"}),e("div",xe,[e("div",null,[a($,{id:"date_from",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[4]||(t[4]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[a($,{id:"date_to",modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1))]),m.value?(d(),c("p",ge,D(m.value),1)):P("",!0)]),e("div",De,[a(R,{for:"payment_to",value:"Payment Receiver"}),a(A,{choices:y.value,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),label:"Payment Receiver",choicesIsObject:!0},null,8,["choices","modelValue"])]),e("div",Ce,[a(R,{for:"claim_ids_filters",value:"Claim ID"}),a(A,{choices:w.value,allowMultiChoice:!0,modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),label:"Claim IDs"},null,8,["choices","modelValue"])])])),a(B,{onClick:b},{default:g(()=>t[6]||(t[6]=[j("Download")])),_:1})]))}},ke={key:0},Ve={key:1,class:"flex mb-5 flex-col"},$e={class:"mb-5"},Se={class:"flex justify-center items-center"},Fe={key:0,class:"text-red-500 text-sm mt-2"},Te={class:"mb-5"},Ue={class:"mb-5"},Oe=["value"],Le={__name:"PaymentDetailReportComponent",setup(f){const l=p(""),n=p(""),r=p(""),i=p(""),m=p(""),s=p(""),v=p(!1),y=p([]),w=p([]),b=async()=>{var S,F;if(m.value="",!l.value||!n.value){m.value="Both 'Date From' and 'Date To' fields are required.";return}if(new Date(n.value)<new Date(l.value)){m.value="'Date To' cannot be earlier than 'Date From'.";return}const u=route("reports.paymentDetailReport",{dateFrom:l.value,dateTo:n.value}),t=new URLSearchParams;r.value&&t.append("payment_to",r.value),i.value&&t.append("claim_ids_filters",i.value);const o=`${u}?${t.toString()}`;try{const h=await C.post(o,{},{responseType:"blob"}),I=new Blob([h.data],{type:h.headers["content-type"]}),_=document.createElement("a");_.href=URL.createObjectURL(I);const T=h.headers["content-disposition"],N=T?T.split("filename=")[1].replace(/"/g,""):"report.pdf";_.download=N,document.body.appendChild(_),_.click(),document.body.removeChild(_),V.fire({title:"Success!",text:"The report has been successfully downloaded.",icon:"success",confirmButtonText:"OK"})}catch(h){V.fire({title:"Error!",text:((F=(S=h.response)==null?void 0:S.data)==null?void 0:F.error)||"An unexpected error occurred while generating the report.",icon:"error",confirmButtonText:"OK"})}},k=async()=>{v.value=!0;try{const{data:u}=await C.get(route("paymentReceiver.listNameAndId"));y.value=u}catch(u){s.value=u}finally{v.value=!1}},x=async()=>{v.value=!0;let u=route("claims.listIds");const t=r.value;if(t!==""){const o=new URLSearchParams({payment_to:t});u+=`?${o.toString()}`}try{const{data:o}=await C.get(u);w.value=o}catch(o){s.value=o}finally{v.value=!1}};return H(r,(u,t)=>{JSON.stringify(u)!==JSON.stringify(t)&&(x(),i.value=[])},{deep:!0}),E(()=>{k(),x()}),(u,t)=>(d(),c("div",null,[t[9]||(t[9]=e("div",{class:"flex justify-between content-center pt-2 pb-3 border-b border-gray-300 mb-6"},[e("p",{class:"font-bold"},"Payment Detail Report")],-1)),v.value?(d(),c("div",ke,[a(M,{class:"mt-20 mb-20"})])):(d(),c("div",Ve,[e("div",$e,[a(R,{for:"receipt_date",value:"Date"}),e("div",Se,[e("div",null,[a($,{id:"date_from",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[4]||(t[4]=e("div",{class:"p-2"}," to ",-1)),e("div",null,[a($,{id:"date_to",modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o),type:"date",class:"mt-1",required:""},null,8,["modelValue"])]),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1))]),m.value?(d(),c("p",Fe,D(m.value),1)):P("",!0)]),e("div",Te,[a(R,{for:"payment_to",value:"Payment Receiver"}),a(A,{choices:y.value,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=o=>r.value=o),label:"Payment Receiver",choicesIsObject:!0},null,8,["choices","modelValue"])]),e("div",Ue,[a(R,{for:"claim_ids_filters",value:"Claim ID"}),z(e("select",{id:"claim_ids_filters","onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),class:"mt-1 border-gray-300 rounded-md shadow-sm",required:""},[t[6]||(t[6]=e("option",{value:"",disabled:"",selected:""},"Please select Claim ID",-1)),t[7]||(t[7]=e("option",{value:""},"All",-1)),(d(!0),c(L,null,q(w.value,o=>(d(),c("option",{key:o,value:o},D(O(te)(o)),9,Oe))),128))],512),[[X,i.value]])])])),a(B,{onClick:b},{default:g(()=>t[8]||(t[8]=[j("Download")])),_:1})]))}},Pe={class:"flex justify-between content-center"},je={key:0},Be={key:0},Ie={key:1},Ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 mt-5"},qe={class:"flex flex-col md:flex-row m-h-10 bg-gray-100"},Ae={class:"w-full md:w-3/4 bg-white"},Ee={class:"space-y-4"},Me={class:"tab-display","tab-name":"summaryReport"},Ke={class:"flex items-center"},Je={class:"flex-1 p-4"},Qe={class:"space-y-4"},ze={class:"tab-display","tab-name":"transactionsReport"},He={class:"flex items-center"},Ge={class:"flex-1 p-4"},We={class:"space-y-4"},Xe={class:"tab-display","tab-name":"paymentDetailReport"},Ye={class:"flex items-center"},Ze={class:"flex-1 p-4"},et={key:1},tt={style:{"min-height":"80vh"},class:"flex flex-col justify-center items-center"},st={class:"flex justify-center"},mt={__name:"Reports",setup(f){const l=p(!1);return E(()=>{const n=U(".tab-btn"),r=U(".tab-display"),i="active bg-violet-500 text-white";r.hide(),n.first().addClass(i),r.first().show(),U("body").on("click",".tab-btn",function(){r.hide(),n.removeClass(i),U(this).addClass(i),r.filter(`[tab-name="${U(this).attr("tab-name")}"]`).show()})}),(n,r)=>(d(),c(L,null,[a(O(Z),{title:"Claims"}),a(G,null,Y({default:g(()=>[O(K)().value?(d(),c("div",je,[l.value?(d(),c("div",Be,[a(M,{class:"mt-32"})])):(d(),c("div",Ie,[e("div",Ne,[e("div",qe,[r[0]||(r[0]=e("div",{class:"w-full md:w-1/4 mb-6 md:mb-0"},[e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"summaryReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Summary Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"transactionsReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Transactions Report")])])])]),e("div",{class:"space-y-4"},[e("div",{class:"tab-btn border-4 border-white","tab-name":"paymentDetailReport"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 p-4"},[e("p",{class:"font-semibold"},"Payment Detail Report")])])])])],-1)),e("div",Ae,[e("div",Ee,[e("div",Me,[e("div",Ke,[e("div",Je,[a(ie)])])])]),e("div",Qe,[e("div",ze,[e("div",He,[e("div",Ge,[a(Re)])])])]),e("div",We,[e("div",Xe,[e("div",Ye,[e("div",Ze,[a(Le)])])])])])])])]))])):(d(),c("div",et,[e("div",tt,[a(se),e("div",st,[a(O(ee),{href:n.route("dashboard")},{default:g(()=>[a(B,{class:"p-4"},{default:g(()=>r[1]||(r[1]=[j("Back To Home Page")])),_:1})]),_:1},8,["href"])])])]))]),_:2},[O(K)().value?{name:"header",fn:g(()=>[e("div",Pe,[a(oe,{breadcrumbs:[{title:"Reports"}]})])]),key:"0"}:void 0]),1024)],64))}};export{mt as default};

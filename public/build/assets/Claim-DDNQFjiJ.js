import{a as l,o as d,g as m,b as e,j as h,k as q,u as a,n as B,l as g,h as I,t as b,w as k,P as Q,F as P,m as T,c as N,e as U,C as W,p as X,f as Z,q as j,s as M,x as ee,d as te}from"./app-PziVrzQt.js";import{_ as se,g as ae,i as le}from"./AuthenticatedLayout-Djr9Om8R.js";import{I as re,_ as oe}from"./BreadcrumbComponent-Bf2nQGg5.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as ne,a as ie,b as de,S as O,L as ce,c as ue}from"./sweetalert2.esm.all-BCc7K-uv.js";import{_ as me}from"./StatusLabel-Bewdy58U.js";import{_ as K}from"./ListComponent-2cDLgwJc.js";import{P as D}from"./PrimaryButton-DcvYJi6c.js";import{_ as w}from"./InputError-1H9n2_oq.js";import{_ as S,a as E}from"./TextInput-yFK3Fd7U.js";import{_ as pe}from"./Modal-C6Vs-fpi.js";import"./ApplicationLogo-M_mRncSF.js";var ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};function R(r){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},u=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(n).filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable}))),u.forEach(function(c){ve(r,c,n[c])})}return r}function ve(r,i,n){return i in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n,r}var L=function(i,n){var u=R({},i,n.attrs);return l(re,R({},u,{icon:ye}),null)};L.displayName="CheckOutlined";L.inheritAttrs=!1;const fe={},ge={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function _e(r,i){return d(),m("svg",ge,i[0]||(i[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m1 13 5.7-5.326a.909.909 0 0 0 0-1.348L1 1"},null,-1)]))}const Ce=G(fe,[["render",_e]]),xe={__name:"SquareBtn",props:{isSelected:{type:Boolean,default:!1}},emits:["update-selected"],setup(r,{emit:i}){const n=r,u=i,c=()=>{u("update-selected",!n.isSelected)};return(_,v)=>(d(),m("div",{class:B(["square-btn border-4 flex justify-center items-center",{"selected bg-violet-400 border-violet-400":r.isSelected,"border-gray-400":!r.isSelected}]),onClick:c},[h(l(a(L),{class:"font-extrabold text-white"},null,512),[[q,r.isSelected]])],2))}},be={class:"flex"},he={key:0,class:"flex justify-center items-center"},we={class:"flex-1"},Se={class:"grid lg:grid-cols-7 grid-cols-2 gap-x-4 gap-y-4"},ke={class:"col"},Ae={class:""},Pe={class:"col"},$e={class:""},Te={class:"col"},Oe={class:"capitalize"},Ue={class:"col"},Be={class:"whitespace-nowrap overflow-hidden text-ellipsis"},Fe={class:"col"},je={class:"truncate"},Ve={class:"col"},qe={class:"col"},Ne={class:""},De={class:"flex justify-center items-center"},Ie={class:"cursor-pointer hover:text-violet-600 transition-all"},Y={__name:"ClaimsListTemplate",props:{data:{type:Object,required:!0},showGroupActions:{type:Boolean,required:!1}},setup(r,{emit:i}){const n=i,u=r,c=g(!1),_=v=>{c.value=v,n("update-selected-list",{isSelected:v,id:u.data.id})};return(v,p)=>{var C;return d(),m("div",{class:B(["w-full flex flex-col justify-center order-last lg:order-none max-lg:mx-auto border p-5 rounded-xl overflow-hidden bg-white hover:border-violet-600 transition-all duration-500",{"bg-violet-50 border-violet-900":c.value}])},[e("div",be,[r.showGroupActions?(d(),m("div",he,[l(xe,{onUpdateSelected:_,isSelected:c.value,class:"block mr-5"},null,8,["isSelected"])])):I("",!0),e("div",we,[e("div",Se,[e("div",ke,[p[0]||(p[0]=e("div",{class:"mb-1 text-xs text-gray-500"},"ID",-1)),e("div",Ae,b(r.data.id),1)]),e("div",Pe,[p[1]||(p[1]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Type",-1)),e("div",$e,b(a(ne)(r.data.payment_type)),1)]),e("div",Te,[p[2]||(p[2]=e("div",{class:"mb-1 text-xs text-gray-500"},"Payment Category",-1)),e("div",Oe,b(r.data.payment_category_name),1)]),e("div",Ue,[p[3]||(p[3]=e("div",{class:"mb-1 text-xs text-gray-500"},"Total Amount",-1)),e("div",Be,b(r.data.currency)+" "+b(a(ie)(r.data.amount)),1)]),e("div",Fe,[p[4]||(p[4]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created By",-1)),e("div",je,b((C=r.data.created_user)==null?void 0:C.name),1)]),e("div",Ve,[p[5]||(p[5]=e("div",{class:"mb-1 text-xs text-gray-500"},"Status",-1)),l(me,{class:"overide-fs-11 inline-block w-[140px] rounded-xl",status:r.data.status},null,8,["status"])]),e("div",qe,[p[6]||(p[6]=e("div",{class:"mb-1 text-xs text-gray-500"},"Created At",-1)),e("div",Ne,b(a(de)(r.data.created_at)),1)])])]),e("div",De,[e("button",Ie,[l(a(Q),{href:v.route("claim.details",r.data.id)},{default:k(()=>[l(Ce,{class:"text-violet-700"})]),_:1},8,["href"])])])])],2)}}},z={__name:"AllClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(r,{emit:i}){const n=g([]),u=({isSelected:c,id:_})=>{n.value=c?[...new Set([...n.value,_])]:n.value.filter(v=>v!==_)};return(c,_)=>(d(),m("div",null,[l(K,{apiUrl:c.route("claims.list"),createCompleteSignal:r.createCompleteSignal,sortAndFilters:r.sortAndFilters,allowSorting:!0},{"list-view":k(({data:v,apiResponse:p})=>[(d(!0),m(P,null,T(v,C=>(d(),N(Y,{createComplete:r.createCompleteSignal,onUpdateSelectedList:u,key:C.id,data:C},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"])]))}},Le={__name:"PendingClaim",props:{createCompleteSignal:{type:Number,default:!1},sortAndFilters:{type:Array,required:!1}},setup(r,{emit:i}){const n=i,u=x=>{n("pendingClaimsCount",x)},c=g([]),_=g(1),v=({isSelected:x,id:f})=>{c.value=x?[...new Set([...c.value,f])]:c.value.filter($=>$!==f)},p=()=>{O.fire({title:"Are you sure?",text:"Are you sure you want to approve these Claims?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,stopKeydownPropagation:!0,preConfirm:()=>new Promise((x,f)=>{t()})})},C=()=>{_.value++,c.value=[]},t=async()=>{try{const x=await axios.post(route("claims.groupApprove",c.value.toString()));C(),O.fire({title:"Success!",text:"The claim has been successfully approved.",icon:"success",confirmButtonText:"OK"})}catch(x){O.fire({title:"Error!",text:x.response?x.response.data.error||"There was an error while approving the claim. Please try again.":"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}};return(x,f)=>(d(),m("div",null,[l(D,{class:B(["mt-5 mb-3",{invisible:!c.value.length}]),onClick:p},{default:k(()=>f[0]||(f[0]=[U("Approve Selected Claim")])),_:1},8,["class"]),(d(),N(K,{apiUrl:x.route("claims.listPendingApproval"),createCompleteSignal:r.createCompleteSignal,key:_.value,allowSorting:!0,sortAndFilters:r.sortAndFilters,hasPaddingTop:!1},{"list-view":k(({data:$,apiResponse:V})=>[U(b(u(V.total))+" ",1),(d(!0),m(P,null,T($,F=>(d(),N(Y,{showGroupActions:!0,createComplete:r.createCompleteSignal,onUpdateSelectedList:v,key:F.id,data:F},null,8,["createComplete","data"]))),128))]),_:1},8,["apiUrl","createCompleteSignal","sortAndFilters"]))]))}},Me={class:"space-y-6"},Ee={key:0},Re={key:1},ze={class:"grid grid-cols-1 gap-4 mt-4"},Ge=["value","data-attr-currency-id"],Ke=["value"],Ye=["value"],He={class:"col-span-2"},Je={class:"flex items-center space-x-4 mt-1"},Qe={class:"inline-flex items-center"},We={class:"inline-flex items-center"},Xe={class:"col-span-2"},Ze={class:"col-span-2"},et={key:2,class:"text-right mt-6"},tt={__name:"CreateClaimForm",setup(r,{emit:i}){const n=g(!1),u=g(!1),c=i,_=g([]),v=g([]),p=g([]),C=g(null),t=W({payment_to:"",payment_type:"",payment_category:"",currency:"",amount:"",gst:"",purpose:"",receipt_date:"",receipt:null}),x=()=>{n.value=!0},f=()=>{n.value=!1},$=async()=>{u.value=!0;try{const y=new FormData;y.append("receipt",t.receipt);for(const[o,A]of Object.entries(t.data()))y.append(o,A);const s=await axios.post(route("claims.store"),y,{headers:{"Content-Type":"multipart/form-data"}});O.fire({title:"Success!",text:s.data.success,icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"w-32"}}),f(),t.reset(),c("createComplete",!0),u.value=!1}catch(y){y.response&&y.response.data.errors?t.errors=y.response.data.errors:O.fire({title:"Error!",text:"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),u.value=!1}},V=async()=>{try{const{data:y}=await axios.get(route("currency.listShortCode"));_.value=y}catch(y){C.value=y}},F=y=>{var o;const s=(o=y.target.selectedOptions[0])==null?void 0:o.getAttribute("data-attr-currency-id");t.currency=s},H=async()=>{try{const{data:y}=await axios.get(route("paymentCategory.listChoice"));p.value=y}catch(y){C.value=y}},J=async()=>{try{const{data:y}=await axios.get(route("paymentReceiver.listNameAndId"));v.value=y}catch(y){C.value=y}};return X(()=>{V(),H(),J()}),(y,s)=>(d(),m("section",Me,[l(D,{onClick:x},{default:k(()=>s[10]||(s[10]=[U("Create Claim")])),_:1}),l(pe,{show:n.value,onClose:f},{default:k(()=>[e("form",{onSubmit:Z($,["prevent"]),class:"p-6"},[u.value?(d(),m("div",Ee,[l(ce,{class:"mt-32 mb-32"})])):(d(),m("div",Re,[s[17]||(s[17]=e("h2",{class:"text-lg font-medium text-gray-900"},"Create a New Claim",-1)),e("div",ze,[e("div",null,[l(S,{for:"payment_to",value:"Payment To"}),h(e("select",{id:"payment_to","onUpdate:modelValue":s[0]||(s[0]=o=>a(t).payment_to=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:"",onChange:F},[s[11]||(s[11]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Receiver",-1)),(d(!0),m(P,null,T(v.value,o=>(d(),m("option",{key:o.id,value:o.id,class:"capitalize","data-attr-currency-id":o.currency_id},b(o.name),9,Ge))),128))],544),[[j,a(t).payment_to]]),l(w,{message:a(t).errors.payment_to,class:"mt-2"},null,8,["message"])]),e("div",null,[l(S,{for:"payment_type",value:"Payment Type"}),h(e("select",{id:"payment_type","onUpdate:modelValue":s[1]||(s[1]=o=>a(t).payment_type=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},s[12]||(s[12]=[e("option",{value:"",disabled:"",selected:""},"Please select Payment Type",-1),e("option",{value:"reimbursement"},"Reimbursement",-1),e("option",{value:"external_payment"},"External Payment",-1)]),512),[[j,a(t).payment_type]]),l(w,{message:a(t).errors.payment_type,class:"mt-2"},null,8,["message"])]),e("div",null,[l(S,{for:"payment_category",value:"Payment Category"}),h(e("select",{id:"currency","onUpdate:modelValue":s[2]||(s[2]=o=>a(t).payment_category=o),class:"mt-1 payment_category w-full border-gray-300 rounded-md shadow-sm",required:""},[s[13]||(s[13]=e("option",{value:"",disabled:"",selected:""},"Please select Payment Category",-1)),(d(!0),m(P,null,T(p.value,(o,A)=>(d(),m("option",{key:A,value:A,class:"capitalize"},b(o),9,Ke))),128))],512),[[j,a(t).payment_category]]),l(w,{message:a(t).errors.payment_category,class:"mt-2"},null,8,["message"])]),e("div",null,[l(S,{for:"currency",value:"Currency"}),h(e("select",{id:"currency","onUpdate:modelValue":s[3]||(s[3]=o=>a(t).currency=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},[s[14]||(s[14]=e("option",{value:"",disabled:"",selected:""},"Please select Currency",-1)),(d(!0),m(P,null,T(_.value,(o,A)=>(d(),m("option",{key:A,value:A},b(o),9,Ye))),128))],512),[[j,a(t).currency]]),l(w,{message:a(t).errors.currency,class:"mt-2"},null,8,["message"])]),e("div",null,[l(S,{for:"amount",value:"Amount (incl. GST if any)"}),l(E,{id:"amount",modelValue:a(t).amount,"onUpdate:modelValue":s[4]||(s[4]=o=>a(t).amount=o),type:"number",step:"0.01",placeholder:"Enter amount",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(w,{message:a(t).errors.amount,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",He,[l(S,{value:"GST"}),e("div",Je,[e("label",Qe,[h(e("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=o=>a(t).gst=o),value:"1",class:"form-radio"},null,512),[[M,a(t).gst]]),s[15]||(s[15]=e("span",{class:"ml-2"},"Yes",-1))]),e("label",We,[h(e("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=o=>a(t).gst=o),value:"0",class:"form-radio"},null,512),[[M,a(t).gst]]),s[16]||(s[16]=e("span",{class:"ml-2"},"No",-1))])]),l(w,{message:a(t).errors.gst,class:"mt-2"},null,8,["message"])])]),e("div",null,[e("div",Xe,[l(S,{for:"purpose",value:"Purpose of Payment"}),h(e("textarea",{id:"purpose","onUpdate:modelValue":s[7]||(s[7]=o=>a(t).purpose=o),rows:"4",placeholder:"Enter purpose of payment",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",required:""},null,512),[[ee,a(t).purpose]]),l(w,{message:a(t).errors.purpose,class:"mt-2"},null,8,["message"])])]),e("div",null,[l(S,{for:"receipt_date",value:"Date of Receipt / Invoice"}),l(E,{id:"receipt_date",modelValue:a(t).receipt_date,"onUpdate:modelValue":s[8]||(s[8]=o=>a(t).receipt_date=o),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(w,{message:a(t).errors.receipt_date,class:"mt-2"},null,8,["message"])]),e("div",null,[e("div",Ze,[l(S,{for:"receipt",value:"Upload Receipt"}),e("input",{id:"receipt",type:"file",onChange:s[9]||(s[9]=o=>a(t).receipt=o.target.files[0]),accept:".jpeg,.jpg,.pdf,.png",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 cursor-pointer",required:""},null,32),l(w,{message:a(t).errors.receipt,class:"mt-2"},null,8,["message"])])])])])),u.value?I("",!0):(d(),m("div",et,[e("button",{type:"button",onClick:f,class:"bg-white hover:bg-gray-100 text-black inline-flex items-center px-4 py-2 border rounded-md font-semibold text-xs uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Close "),l(D,{type:"submit",class:B(["ms-3",{"opacity-25":a(t).processing}]),disabled:a(t).processing},{default:k(()=>s[18]||(s[18]=[U(" Submit Claim ")])),_:1},8,["class","disabled"])]))],32)]),_:1},8,["show"])]))}},st={class:"flex justify-between content-center"},at={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 p-5 sm:p-0 mt-3",style:{"padding-top":"20px","padding-bottom":"40px"}},lt={key:0},rt={class:"inline-flex bg-white rounded"},ot=["onClick"],nt={key:0,class:"bg-gray-500 px-2 py-1 ml-3 text-white text-xs notification-circle rounded"},it={class:"w-full"},dt={key:1},ct={__name:"Claim",setup(r){const i=g(2),n=g(0),u=g("allClaims"),c=g([{name:"allClaims",label:"All Claims"},{name:"pendingApproval",label:"Pending Approval"}]),_=t=>u.value===t?"active bg-violet-500 text-white font-bold":"hover:bg-gray-200 text-black bg-white",v=()=>{i.value=Math.floor(Math.random()*100)+1},p=t=>{n.value=t},C=g([{display_name:"Claim ID",field_name:"id",field_type:"string"},{field_name:"payment_type",field_type:"select",options:{reimbursement:"Reimbursement",external_payment:"External Payment"}},{display_name:"Payment Category",field_name:"payment_category_id",field_type:"select",api:route("paymentCategory.listChoice")},{display_name:"Currency",field_name:"currency_id",field_type:"select",api:route("currency.listShortCode")},{field_name:"status",field_type:"select",api:route("approvalStatus.list")}]);return(t,x)=>(d(),m(P,null,[l(a(te),{title:"Claims"}),l(se,null,{header:k(()=>[e("div",st,[l(oe,{breadcrumbs:[{title:"Claims"}]}),l(tt,{onCreateComplete:v})])]),default:k(()=>[e("div",at,[a(ae)().value||a(le)().value?(d(),m("div",lt,[e("div",rt,[(d(!0),m(P,null,T(c.value,f=>(d(),m("span",{key:f.name,class:B(["tab-btn p-2 px-5 text-md rounded flex justify-center items-center",_(f.name)]),onClick:$=>u.value=f.name},[U(b(f.label)+" ",1),f.name=="pendingApproval"&&n.value!=0&&n.value!=null?(d(),m("span",nt,b(a(ue)(n.value)),1)):I("",!0)],10,ot))),128))]),e("div",it,[h(e("div",null,[l(Le,{createCompleteSignal:i.value,onPendingClaimsCount:p},null,8,["createCompleteSignal"])],512),[[q,u.value==="pendingApproval"]]),h(e("div",null,[l(z,{createCompleteSignal:i.value,sortAndFilters:C.value},null,8,["createCompleteSignal","sortAndFilters"])],512),[[q,u.value==="allClaims"]])])])):(d(),m("div",dt,[l(z,{createCompleteSignal:i.value,sortAndFilters:C.value},null,8,["createCompleteSignal","sortAndFilters"])]))])]),_:1})],64))}},wt=G(ct,[["__scopeId","data-v-4e71205e"]]);export{wt as default};
